{"version":3,"sources":["RushingtonAtNight.png","Components/Pages/SignIn.js","logo.svg","Components/Fragments/High Level/Header.js","Components/Fragments/Mid Level/Resources.js","Components/Fragments/Low Level/Popup.js","Components/Fragments/Low Level/CitizenUserDropboxMenu.js","Components/Fragments/Low Level/NewTransferPopupBody.js","Components/Fragments/Mid Level/Bank.js","Components/Fragments/Mid Level/Calendar.js","Components/Fragments/Mid Level/Constitution.js","Components/Fragments/Low Level/CitizenGovernmentDropboxMenu.js","Components/Fragments/Low Level/NewChargePopupBody.js","Components/Fragments/Low Level/AddPropertyPopupBody.js","Components/Fragments/Low Level/AddCitizenPopupBody.js","Components/Fragments/Low Level/AddBusinessPopupBody.js","Components/Fragments/Low Level/PropertyDropboxMenu.js","Components/Fragments/Low Level/NewGovernmentTransferPopupBody.js","Components/Fragments/Mid Level/Government.js","Components/Fragments/Mid Level/Home.js","Components/Fragments/Mid Level/Profile.js","Components/Fragments/Mid Level/Licenses.js","Components/Fragments/Low Level/PostPage.js","RushingtonMap.png","Components/Fragments/Mid Level/Map.js","Components/Fragments/Mid Level/Properties.js","Components/Fragments/Mid Level/Citizens.js","Components/Fragments/Mid Level/Settings.js","Components/Fragments/Low Level/AddNewBusinessPopupBody.js","Components/Fragments/Mid Level/Businesses.js","Components/Fragments/Low Level/NewBusinessTransferPopupBody.js","Components/Fragments/Mid Level/Business.js","Components/Fragments/Mid Level/Panel.js","Components/Fragments/High Level/Content.js","Components/Fragments/High Level/Footer.js","Components/Pages/Main.js","App.js","reportWebVitals.js","index.js"],"names":["Join","setSignedIn","citizens","setIsAdmin","setUser","useState","undefined","localStorage","getItem","citizenIDInput","setCitizenIDInput","errorMessage","setErrorMessage","onClickSignIn","isCitizenIDValid","citizensObjects","Object","values","foundCitizenIDMatch","forEach","citizenObject","citizenID","process","setItem","JSON","stringify","duringTyping","changeErrorMessage","length","startsWith","Number","substring","console","log","classNames","classes","filter","Boolean","join","className","style","backgroundImage","RushingtonAtNight","backgroundRepeat","backgroundSize","href","placeholder","value","onInput","event","target","onKeyDown","code","onClick","React","memo","navLinksAdmin","title","active","navLinksUser","Header","isAdmin","currentTime","currentDate","currentYear","user","signOut","as","open","profileOpen","Button","name","show","Fragment","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Items","static","Item","preventDefault","window","location","map","link","Root","Child","Overlay","Panel","focus","src","Logo","alt","n","idx","Resources","resources","subtext","icon","LibraryIcon","CashIcon","CreditCardIcon","UsersIcon","MapIcon","BookOpenIcon","CalendarIcon","resource","Popup","setOpen","header","additionalComponent","cancelButtonRef","useRef","AdditionalComponent","onClose","type","ref","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","Title","CitizenUserDropboxMenu","selectedCitizen","setSelectedCitizen","filteredCitizens","setFilteredCitizens","searchCitizensInput","setSearchCitizensInput","UpOrDownArrow","props","class","defaultValue","onChange","citizen","toUpperCase","includes","NewTransferPopupBody","database","getTime","setMeldas","meldas","getDate","getYear","setNewTransferPopupOpen","setTransfers","setCitizens","transferAmount","setTransferAmount","transferReason","setTransferReason","salesTaxRate","setSalesTaxRate","rushingtonEpoch","generateTransferID","transferID","i","String","Math","floor","random","isTransferAmountValid","useEffect","get","then","val","salesTaxRateSnapshot","min","max","round","receiverResultingBalance","senderResultingBalance","meldasSnapshot","amountTaxed","set","date","time","ssre","Date","amount","receiverID","receiverName","reason","resultingBalance","senderID","senderName","taxTransferID","governmentSnapshot","newGovernmentFunds","transfersSnapshot","transfers","sort","transfer1","transfer2","Bank","newTransferPopupOpen","bankAccounts","censor","id","onClickSave","inputs","saveText","transfer","Transfer","Calendar","getHoliday","day","monthNumber","days","push","generateDays","formatDate","month","dayString","endsWith","concat","number","week","slice","Constitution","lawNumber","rightNumber","policyNumber","civilResponsibilityNumber","constitutionalAdditionsChangeNumber","law","right","policy","civilResponsibility","constitutionalAdditionsChange","CitizenGovernmentDropboxMenu","NewChargePopupBody","setNewChargePopupOpen","setValues","selectedDefendant","selectedProsecutor","setSelectedProsecutor","allegedCrime","setAllegedCrime","reasonForVerdict","setReasonForVerdict","punishment","setPunishment","citizenGuilty","setCitizenGuilty","citizenSnapshot","editedSelectedCitizen","newCharge","newChargeID","chargeID","generateChargeID","defendant","prosecutor","crime","verdict","charges","parse","AddPropertyPopupBody","properties","setProperties","setAddPropertyPopupOpen","selectedPropertyType","setSelectedPropertyType","address","setAddress","width","setWidth","setLength","price","setPrice","propertyTypeOptions","propertyTypeOption","propertyID","generatePropertyID","newProperty","size","dateAdded","timeAdded","editedProperties","AddCitizenPopupBody","setAddCitizenPopupOpen","setName","setCitizenID","initialMeldas","newCitizenID","generateCitizenID","addedCitizen","editedCitizens","AddBusinessPopupBody","selectedProperty","setSelectedProperty","setAddChangeBusinessPopupOpen","description","setDescription","business","newBusiness","owner","editedSelectedProperty","PropertyDropboxMenu","filteredProperties","setFilteredProperties","searchPropertiesInput","setSearchPropertiesInput","property","NewGovernmentTransferPopupBody","setNewGovernmentTransferPopupOpen","governmentFunds","receiverCitizenID","senderCitizenID","Government","selectedSection","setSelectedSection","announcementText","setAnnouncementText","filteredDropboxCitizens","setFilteredDropboxCitizens","announcements","setAnnouncements","businesses","setBusinesses","setGovernmentFunds","licenseTitle","setLicenseTitle","licensePermissions","setLicensePermissions","licensePrice","setLicensePrice","licenses","setLicenses","selectedDropdownProperty","setSelectedDropdownProperty","interestRate","setInterestRate","taxRate","setTaxRate","selectedNewPropertyOwner","setSelectedNewPropertyOwner","grantedMeldas","setGrantedMeldas","governmentGrantedMeldas","setGovernmentGrantedMeldas","governmentTransfers","setGovernmentTransfers","newChargePopupOpen","addChangeBusinessPopupOpen","addPropertyPopupOpen","newGovernmentTransferPopupBodyOpen","addCitizenPopupOpen","navigationSections","sectionName","sectionSelected","citizensSnapshot","citizen1","citizen2","localeCompare","propertiesSnapshot","property1","property2","announcementsSnapshot","announcement1","announcement2","licensesSnapshot","businessesSnapshot","onClickPostAnnouncement","announcementID","generateID","text","datePosted","timePosted","getResultingInterestPayout","totalMeldasGranted","meldasGranted","getResultingTaxRevenue","totalTaxRevenue","tax","prefix","navigationSection","newTransfer","abs","charge1","charge2","charge","CriminalCharge","findPropertyByID","Property","license1","license2","license","LicenseUser","totalMeldasInBank","getTotalMeldasInBank","newCitizensObject","licenseID","permissions","LicenseGovernment","announcement","Announcement","datePurchased","Home","setSelectedPost","selectedPost","criminalCharges","setCriminalCharges","posts","setPosts","filteredPosts","setFilteredPosts","notifications","setNotifications","postText","setPostText","numberOfPostsShown","setNumberOfPostsShown","selectedFilter","setSelectedFilter","postsLoaded","setPostsLoaded","notificationsLoaded","setNotificationsLoaded","unseenNotifications","setUnseenNotifications","announcementsLoaded","setAnnouncementsLoaded","criminalChargesLoaded","setCriminalChargesLoaded","NewspaperIcon","SpeakerphoneIcon","ScaleIcon","BellIcon","updateValues","notificationsSnapshot","notification1","notification2","notification","seen","unseenNotificationsValue","count","updateUnseenNotifications","postsSnapshot","post1","post2","updateFilteredPosts","criminalChargesSnapshot","postsInput","sortedPosts","post1Likes","liked","post1Dislikes","disliked","makeReadableTimeAgo","post","secondsSincePost","yearsAgo","toFixed","monthsAgo","daysAgo","minutesSincePost","num","fixed","re","RegExp","toString","match","onClickPost","postID","generatePostID","newPost","poster","Icon","criminalCharge","Post","newNumberOfPostsShown","postSnapshot","action","actor","commentText","object","comment","comments","splice","indexOf","comment1","comment2","comment1Likes","Profile","editingBiography","setEditingBiography","biography","newBiography","setNewBiography","License","Licenses","userSnapshot","onClickBuyLicense","addedLicense","userResultingBalance","governmentMeldas","governmentResultingBalance","keys","PostPage","updatePost","onClickPostComment","commentsSnapshot","commentID","generateCommentID","newComment","setCommentText","commentSnapshot","Map","RushingtonMap","Properties","Citizens","Citizen","Settings","updateUser","newPassword","setNewPassword","settings","requirePassword","requirePasswordChecked","setRequirePasswordChecked","isEditingPassword","setIsEditingPassword","showPassword","setShowPassword","Switch","checked","censorCitizenID","color","password","crypto","subtle","digest","str","buf","ArrayBuffer","bufView","Uint16Array","strLen","charCodeAt","stringToArrayBuffer","result","hashHex","Array","from","Uint8Array","b","padStart","AddNewBusinessPopupBody","setAddNewBusinessPopupOpen","updateBusinesses","newBusinessID","generateBusinessID","businessID","founder","owners","yearAdded","Businesses","userBusinesses","setUserBusinesses","filteredBusinesses","setFilteredBusinesses","addNewBusinessPopupOpen","userHasBAOLicense","found","business1","business2","userIsOwner","checkUserIsOwner","filteredBusiness","Business","businessPurchases","purchase1","purchase2","purchase","Purchase","yearPurchased","total","purchaseID","product","quantity","buyingPrice","orderingPrice","delivered","dateDelivered","yearDelivered","timeDelivered","businessSnapshot","NewBusinessTransferPopupBody","updateBusiness","setNewBusinessTransferPopupOpen","selectedBusiness","setSelectedBusiness","addItemPopupOpen","setAddItemPopupOpen","editItemPopupOpen","setEditItemPopupOpen","productBeingEdited","setProductBeingEdited","searchInput","setSearchInput","newBusinessName","setNewBusinessName","newBusinessDescription","setNewBusinessDescription","citizenIsNotInList","CollectionIcon","TruckIcon","BriefcaseIcon","EditProductPopupBody","AddItemPopupBody","products","product1","product2","Product","orders","order1","order2","order","Order","ownersList","setQuantity","buyable","orderable","businessResultingBalance","productID","timePurchased","customer","newItemBuyingPrice","setNewItemBuyingPrice","newItemOrderingPrice","setNewItemOrderingPrice","newItemName","setNewItemName","newItemBuyable","setNewItemBuyable","newItemOrderable","setNewItemOrderable","newProductID","generateProductID","itemBuyingPrice","setItemBuyingPrice","itemOrderingPrice","setItemOrderingPrice","itemName","setItemName","itemBuyable","setItemBuyable","itemOrderable","setItemOrderable","businessOrderReference","citizenPurchaseReference","exact","path","render","Content","Footer","Main","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","booleanify","s","months","currentTotalSeconds","year","hour","seconds","monthString","monthItem","App","signedIn","setCurrentYear","setCurrentDate","setCurrentTime","interval","setInterval","clearInterval","SignIn","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.97320d0d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/RushingtonAtNight.5d0400fe.png\";","import React, { useState } from 'react';\r\nimport RushingtonAtNight from '../../RushingtonAtNight.png'\r\n\r\nconst Join = ({setSignedIn, citizens, setIsAdmin, setUser}) => {\r\n\r\n  const [citizenIDInput, setCitizenIDInput] = useState(localStorage.getItem('citizenID') != undefined ? localStorage.getItem('citizenID') : '');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  function onClickSignIn(){\r\n    if(isCitizenIDValid(citizenIDInput, false, true) && citizens != undefined){\r\n      const citizensObjects = Object.values(citizens);\r\n      var foundCitizenIDMatch = false;\r\n    citizensObjects.forEach(citizenObject => {\r\n      if(citizenObject.citizenID == citizenIDInput){\r\n        foundCitizenIDMatch = true;        \r\n          setUser(citizenObject);\r\n          setIsAdmin(citizenIDInput == process.env.REACT_APP_JONAH_CITIZEN_ID);\r\n          localStorage.setItem('signedIn', 'true');\r\n          localStorage.setItem('user', JSON.stringify(citizenObject));\r\n          localStorage.setItem('isAdmin', citizenIDInput == process.env.REACT_APP_JONAH_CITIZEN_ID);\r\n          setSignedIn(true);\r\n        \r\n      }\r\n    });\r\n    setErrorMessage(foundCitizenIDMatch ? '' : 'Citizen ID has a valid format, but found no matches. Try refreshing')\r\n    }\r\n  }\r\n\r\n  function isCitizenIDValid(citizenID, duringTyping, changeErrorMessage){\r\n    if((citizenID.length == 1 && !citizenID.startsWith('C')) ||\r\n       (citizenID.length == 2 && !citizenID.startsWith('CI')) ||\r\n       (citizenID.length >= 3 && !citizenID.startsWith('CI-'))){\r\n      if(citizenID.length < 8){\r\n        if(citizenID.length == 0){\r\n          if(changeErrorMessage)setErrorMessage(duringTyping ? '' : 'Enter Citizen ID to sign in');\r\n          return duringTyping ? true : false;\r\n        } else {\r\n        if(changeErrorMessage)setErrorMessage(\"Invalid format. Citizen ID must begin with 'CI-'\");\r\n        return false;\r\n        }\r\n      } else {\r\n        if(changeErrorMessage)setErrorMessage(\"Invalid format. Citizen ID must begin with 'CI-' and be followed by 5 numbers\");\r\n        return false;\r\n      }\r\n    } else {\r\n      if(citizenID.length == 0){\r\n        if(changeErrorMessage)setErrorMessage(duringTyping ? '' : 'Enter Citizen ID to sign in');\r\n        return duringTyping ? true : false;\r\n      } else {\r\n        if(citizenID.length < 8){\r\n          if(changeErrorMessage)setErrorMessage(duringTyping ? '' : \"Invalid format. Citizen ID is too short. 5 numbers must follow 'CI-'\");\r\n          return duringTyping ? true : false;\r\n        } else {\r\n          if(citizenID.length > 8){\r\n            if(changeErrorMessage)setErrorMessage(\"Invalid format. Citizen ID is too dang long! At most 5 numbers must follow 'CI-'\");\r\n            return false;\r\n          } else {\r\n            //console.log('checking if numbers', Number(citizenID.substring(3, 9)) !== NaN, Number(citizenID.substring(3, 9)))\r\n            if(!Number(citizenID.substring(3, 9))){\r\n              if(changeErrorMessage)setErrorMessage(\"Invalid format. 5 numbers must follow 'CI-'\");\r\n              return false;\r\n            } else {\r\n              console.log('nu', Number(citizenID.substring(3, 9)))\r\n              if(changeErrorMessage)setErrorMessage('');\r\n              return true;\r\n            }\r\n            \r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n  }\r\n\r\n  function classNames(...classes) {\r\n    return classes.filter(Boolean).join(\" \");\r\n  }\r\n\r\n    return(\r\n\r\n      <div className=\"min-h-screen justify-center py-12\"\r\n      style={{ \r\n        backgroundImage: `url(${RushingtonAtNight})`,\r\n        backgroundRepeat: 'no-repeat',\r\n        backgroundSize: \"cover\",\r\n      }}\r\n      >\r\n        <div className='mx-6 lg:mx-0'>\r\n        <div className='sm:mx-auto  sm:w-full sm:max-w-md '>\r\n        <div className='flex justify-center bg-gray-200 py-8 px-4 shadow rounded-t-lg sm:px-10'>\r\n        <div className=\"shadow bg-white border-l-2 border-b-2 border-blue-300 border-b-blue-200\">\r\n                <a href=\"#\">\r\n                  <span className=\"sr-only\">Workflow</span>\r\n                  <p className='text-3xl font-bold text-gray-700 p-1 border-r-2 border-t-2 border-yellow-300'>Rushington Hub</p>\r\n                </a>\r\n              </div>\r\n          </div>\r\n    </div>\r\n\r\n  <div className=\"sm:mx-auto  sm:w-full sm:max-w-md\">\r\n    <div className=\"bg-blue-200 py-8 px-4 shadow rounded-b-lg sm:px-10\">\r\n\r\n      \r\n        \r\n        <div className=\"w-full\">\r\n          <p className='font-semibold text-center'>Enter Citizen ID to Continue</p>\r\n        <input placeholder='e.g. CI-49893, CI-28492...'\r\n          value={citizenIDInput}\r\n          onInput={event => {setCitizenIDInput(event.target.value);\r\n          isCitizenIDValid(event.target.value, true, true);  \r\n      }} \r\n          onKeyDown={event => {\r\n            if(event.code === 'Enter'){\r\n              onClickSignIn();\r\n            }\r\n          }}\r\n          className={\r\n            classNames(isCitizenIDValid(citizenIDInput, true, false) ? '' : 'text-red-500 font-semibold',\r\n            'w-full type-password focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1 rounded')}></input>\r\n        <div className='w-full flex justify-center py-6'>\r\n        <button className={classNames(citizens != undefined && isCitizenIDValid(citizenIDInput, false, false) ?  'bg-yellow-300 text-gray-800 hover:bg-yellow-400' : 'bg-yellow-200 text-gray-400',\r\n          'flex justify-center w-1/3 py-2 shadow font-semibold rounded')} onClick={onClickSignIn}>SIGN IN</button>\r\n        </div>\r\n        {errorMessage &&\r\n        <p className='text-center text-red-500 bg-white shadow p-1 font-semibold'>{errorMessage}</p>\r\n        }\r\n      </div>\r\n    </div>\r\n  </div>\r\n  </div>\r\n</div>\r\n    )\r\n}\r\n\r\nexport default React.memo(Join);\r\n","export default __webpack_public_path__ + \"static/media/logo.a626faa1.svg\";","import React, { Fragment } from \"react\";\r\nimport { Menu, Popover, Transition } from \"@headlessui/react\";\r\nimport { MenuIcon, XIcon } from \"@heroicons/react/outline\";\r\nimport Logo from '../../../logo.svg';\r\n\r\n\r\n\r\nfunction classNames(...classes) {\r\n  return classes.filter(Boolean).join(\" \");\r\n}\r\n\r\n// Changes navigation links based on if the user is an admin. If they aren't, I don't want them\r\n// seeing the government nav link, even though they can't access it anyway at .../government\r\nconst navLinksAdmin = [\r\n  { title: \"Home\", active: true, href: \"/\" },\r\n  { title: \"All Resources\", active: false, href: \"/resources\" },\r\n  { title: \"Profile\", active: false, href: '/profile'},\r\n  { title: \"Government\", active: false, href: \"/government\"}\r\n];\r\n\r\nconst navLinksUser = [\r\n  { title: \"Home\", active: true, href: \"/\" },\r\n  { title: \"All Resources\", active: false, href: \"/resources\" },\r\n  { title: \"Profile\", active: false, href: '/profile'},\r\n];\r\n\r\nconst Header = ({\r\n  setSignedIn,\r\n  isAdmin,\r\n  setIsAdmin,\r\n  currentTime,\r\n  currentDate,\r\n  currentYear,\r\n  user,\r\n  setUser\r\n}) => {\r\n\r\n  // The local storage values are set so that you can't refresh the page after logging out and stay logged in, since\r\n  // the initial values are set to the local storage values at the top\r\n  function signOut(){\r\n        setUser(null);\r\n        setIsAdmin(null);\r\n        localStorage.setItem('signedIn', null);\r\n        localStorage.setItem('user', null);\r\n        localStorage.setItem('isAdmin', null);\r\n        setSignedIn(null);\r\n  }\r\n\r\n  // Censor function ready in case I ever implement a settings page that would allow user to hide or show\r\n  // their citizen ID in case they want to screenshot or show something to someone else without giving\r\n  // away their citizen ID\r\n  function censor(citizenID){\r\n      return citizenID;\r\n  }\r\n\r\n  return (\r\n    <Popover as=\"header\" className=\"pb-24 bg-gray-100 align-bottom\">\r\n      {({ open }) => (\r\n        <>\r\n          <a className='lg:hidden bg-black w-full flow-root px-2 pt-2.5 pb-1 h-10 fixed z-50'\r\n            href='/calendar'\r\n          >\r\n              <p className='text-white float-right font-semibold'>{currentDate}, {currentYear}</p>\r\n              <p className='text-white float-left font-semibold'>{currentTime}</p>\r\n          </a>\r\n          <div className=\" px-4 sm:px-6 pt-9 lg:pt-0 w-full\">\r\n            <div className=\"relative pt-5 pb-1 align-items-bottom items-baseline h-16 lg:h-24\">\r\n            <div className='flow-root w-full align-bottom'>\r\n                        <div className='absolute bottom-1 lg:bottom-0 left-0'>\r\n                           {/* Logo */}\r\n              <div className=\"shadow bg-white border-l-2 border-b-2 border-blue-300 border-b-blue-200\">\r\n                <a href=\"/\">\r\n                  <span className=\"sr-only\">Workflow</span>\r\n                  <p className='text-3xl font-bold text-gray-700 p-1 border-r-2 border-t-2 border-yellow-300'>Rushington Hub</p>\r\n                </a>\r\n              </div>\r\n              <a\r\n              href='/calendar'\r\n              className='hidden lg:flow-root hover:bg-white px-1 hover:border hover:border-1 hover:border-gray-700'>\r\n                          <div className='float-left'>\r\n                        <p className='text-base text-gray-700 font-semibold'>{currentTime}</p>\r\n                        </div>\r\n                        <p className='text-base text-gray-700 float-right font-semibold'>{currentDate}, {currentYear}</p>\r\n                        </a>\r\n                              </div>\r\n              {/* Right section on desktop */}\r\n              <div className=\"absolute bottom-0 right-0\">\r\n                {/* Profile dropdown */}\r\n                <Menu as=\"div\" className=\"relative flex-shrink-0\">\r\n                  {({ profileOpen }) => (\r\n                    <>\r\n                      <div>\r\n                        <Menu.Button className=\"bg-gray hover:bg-white px-2 rounded text-right text-sm focus:outline-none focus:ring-opacity-100\">\r\n                                <p className='lg:text-lg text-gray-700 font-semibold'>{censor(user.citizenID)}</p>\r\n                                <p className='lg:text-lg text-gray-700 font-semibold'>{user.name}</p>\r\n                        </Menu.Button>\r\n                      </div>\r\n                      <Transition\r\n                        show={profileOpen}\r\n                        as={Fragment}\r\n                        enter=\"transition ease-out duration-75\"\r\n                        enterFrom=\"transform opacity-0 scale-95\"\r\n                        enterTo=\"transform opacity-100 scale-100\"\r\n                        leave=\"transition ease-in duration-75\"\r\n                        leaveFrom=\"transform opacity-100 scale-100\"\r\n                        leaveTo=\"transform opacity-0 scale-95\"\r\n                      >\r\n                        <Menu.Items\r\n                          static\r\n                          className=\"origin-top-right z-40 absolute -right-2 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-green ring-opacity-5 focus:outline-none\"\r\n                        >\r\n                          <Menu.Item>\r\n                            {({ active }) => (\r\n                               <button\r\n                               onClick={event => {\r\n                                      event.preventDefault();\r\n                                      localStorage.setItem('selectedCitizen', JSON.stringify(user));\r\n                                      window.location.href = '/profile';\r\n                              }}\r\n                               className={classNames(\r\n                                 active ? \"bg-gray-100\" : \"\",\r\n                                 \"block px-4 py-2 text-sm w-full text-left text-green\"\r\n                               )}\r\n                             >\r\n                              Profile\r\n                             </button>\r\n                            )}\r\n                          </Menu.Item>\r\n                          {\r\n                            // Settings link in case I ever implement them\r\n                          }\r\n                          {/* <Menu.Item>\r\n                            {({ active }) => (\r\n                               \r\n                              <a\r\n                              href='/settings'\r\n                              className={classNames(\r\n                                active ? \"bg-gray-100\" : \"\",\r\n                                \"block px-4 py-2 text-sm text-green w-full text-left\"\r\n                              )}\r\n                              >Settings</a>\r\n                             \r\n                            )}\r\n                          </Menu.Item> */}\r\n                          <Menu.Item>\r\n                            {({ active }) => (\r\n                               \r\n                              <a onClick={signOut}\r\n                              href='/'\r\n                              className={classNames(\r\n                                active ? \"bg-gray-100\" : \"\",\r\n                                \"block px-4 py-2 text-sm text-green w-full text-left\"\r\n                              )}\r\n                              >Sign Out</a>\r\n                             \r\n                            )}\r\n                          </Menu.Item>\r\n                          \r\n                        </Menu.Items>\r\n                      </Transition>\r\n                    </>\r\n                  )}\r\n                </Menu>\r\n              </div>\r\n              </div>\r\n              {/* Menu button */}\r\n              <div className=\"absolute right-0 flex-shrink-0 hidden\">\r\n                {/* Mobile menu button */}\r\n                <Popover.Button className=\"bg-transparent p-2 rounded-md inline-flex items-center justify-center text-green hover:text-green hover:bg-gray hover:bg-opacity-10\">\r\n                  <span className=\"sr-only\">Open main menu</span>\r\n                  {open ? (\r\n                    <XIcon className=\"block h-6 w-6\" aria-hidden=\"true\" />\r\n                  ) : (\r\n                    <MenuIcon className=\"block h-6 w-6\" aria-hidden=\"true\" />\r\n                  )}\r\n                </Popover.Button>\r\n              </div>\r\n              </div>\r\n\r\n            <div className=\"lg:block border-t border-gray-700 border-opacity-40 py-3\">\r\n              <div className=\"lg:grid lg:grid-cols-3 lg:gap-8 lg:items-center\">\r\n                <div className=\"lg:col-span-2\">\r\n                  {isAdmin &&\r\n                  <nav className=\"flex lg:space-x-4\">\r\n                    {navLinksAdmin.map((link) => (\r\n                      <a\r\n                        key={link.title}\r\n                        href={link.href}\r\n                        onClick={event => {\r\n                          if(link.href == '/profile'){\r\n                                event.preventDefault();\r\n                                localStorage.setItem('selectedCitizen', JSON.stringify(user));\r\n                                window.location.href = '/profile';\r\n                          }\r\n                        }}\r\n                        className={classNames(\r\n                          link.active ? \"text-blue-600\" : \"text-blue-600\",\r\n                          \"flex-auto lg:flex-none text-center lg:text-left text-sm font-semibold rounded-md px-3 py-2 hover:bg-gray-200\"\r\n                        )}\r\n                        aria-current={link.active ? \"page\" : \"false\"}\r\n                      >\r\n                        {link.title}\r\n                      </a>\r\n                    ))}\r\n                  </nav>}\r\n                  {!isAdmin &&\r\n                  <nav className=\"flex lg:space-x-4\">\r\n                  {navLinksUser.map((link) => (\r\n                    <a\r\n                      key={link.title}\r\n                      href={link.href}\r\n                      onClick={event => {\r\n                        if(link.href == '/profile'){\r\n                              event.preventDefault();\r\n                              localStorage.setItem('selectedCitizen', JSON.stringify(user));\r\n                              window.location.href = '/profile';\r\n                        }\r\n                      }}\r\n                      className={classNames(\r\n                        link.active ? \"text-blue-600\" : \"text-blue-600\",\r\n                        \"flex-auto lg:flex-none text-center lg:text-left text-sm font-semibold rounded-md px-3 py-2 hover:bg-gray-200\"\r\n                      )}\r\n                      aria-current={link.active ? \"page\" : \"false\"}\r\n                    >\r\n                      {link.title}\r\n                    </a>\r\n                  ))}\r\n                </nav>\r\n                  }\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <Transition.Root show={open} as={Fragment}>\r\n            <div className=\"lg:hidden\">\r\n              <Transition.Child\r\n                as={Fragment}\r\n                enter=\"duration-150 ease-out\"\r\n                enterFrom=\"opacity-0\"\r\n                enterTo=\"opacity-100\"\r\n                leave=\"duration-150 ease-in\"\r\n                leaveFrom=\"opacity-100\"\r\n                leaveTo=\"opacity-0\"\r\n              >\r\n                <Popover.Overlay\r\n                  static\r\n                  className=\"z-20 fixed inset-0 bg-gray bg-opacity-25\"\r\n                />\r\n              </Transition.Child>\r\n\r\n              <Transition.Child\r\n                as={Fragment}\r\n                enter=\"duration-150 ease-out\"\r\n                enterFrom=\"opacity-0 scale-95\"\r\n                enterTo=\"opacity-100 scale-100\"\r\n                leave=\"duration-150 ease-in\"\r\n                leaveFrom=\"opacity-100 scale-100\"\r\n                leaveTo=\"opacity-0 scale-95\"\r\n              >\r\n                <Popover.Panel\r\n                  focus\r\n                  static\r\n                  className=\"z-30 absolute top-0 inset-x-0 max-w-3xl mx-auto w-full p-2 transition transform origin-top\"\r\n                >\r\n                  <div className=\"rounded-lg shadow-lg ring-1 ring-green ring-opacity-5 bg-white divide-y divide-gray\">\r\n                    <div className=\"pt-3 pb-2\">\r\n                      <div className=\"flex items-center justify-between px-4\">\r\n                        <div>\r\n                          <img\r\n                            className=\"h-8 w-auto\"\r\n                            src={Logo}\r\n                            alt=\"GET Graph\"\r\n                          />\r\n                        </div>\r\n                        <div className=\"-mr-2\">\r\n                          <Popover.Button className=\"bg-gray rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100\">\r\n                            <span className=\"sr-only\">Close menu</span>\r\n                            <XIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\r\n                          </Popover.Button>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"mt-3 px-2 space-y-1\">\r\n                        {isAdmin &&\r\n                        navLinksAdmin.map((n,idx) => {\r\n                          return(\r\n                            <a\r\n                            key={idx}\r\n                            href={n.href}\r\n                            className=\"block rounded-md px-3 py-2 text-base text-blue-600 font-semibold hover:bg-dark hover:text-blue-800\"\r\n                            >\r\n                            {n.title}\r\n                          </a>\r\n                          )\r\n                        })}\r\n                        {!isAdmin &&\r\n                        navLinksUser.map((n,idx) => {\r\n                          return(\r\n                            <a\r\n                            key={idx}\r\n                            href={n.href}\r\n                            className=\"block rounded-md px-3 py-2 text-base text-blue-600 font-semibold hover:bg-dark hover:text-blue-800\"\r\n                            >\r\n                            {n.title}\r\n                          </a>\r\n                          )\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Popover.Panel>\r\n              </Transition.Child>\r\n            </div>\r\n          </Transition.Root>\r\n        </>\r\n      )}\r\n    </Popover>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import { BookOpenIcon, CalendarIcon, CreditCardIcon, LibraryIcon, MapIcon, OfficeBuildingIcon, UsersIcon, CashIcon } from \"@heroicons/react/outline\"\r\n\r\nconst Resources = ({}) => {\r\n    const resources = [\r\n        {name: 'Bank', subtext: \"Transfer money, see balance, and see transfer history\", icon: LibraryIcon, href: '/bank'},\r\n        {name: 'Businesses', subtext: \"Add businesses and buy from other businesses\", icon: CashIcon, href: '/businesses'},\r\n        {name: 'Licenses', subtext: \"Buy new Rushington licenses and see purchased ones\", icon: CreditCardIcon, href: '/licenses'},\r\n        {name: 'Citizens', subtext: \"See all Rushington citizens and their profiles\", icon: UsersIcon, href: '/citizens'},\r\n        {name: 'Map', subtext: \"Full map of Rushington\", icon: MapIcon, href: '/map'},\r\n\r\n        // Properties. Might unhide if I ever add everyone's properties to their file\r\n        // {name: 'Properties', subtext: \"See Rushington properties, which are owned, and which are available\", icon: OfficeBuildingIcon, href: '/properties'},\r\n        \r\n        {name: 'Constitution', subtext: \"Rushington's system of government, laws, rights, and policies\", icon: BookOpenIcon, href: '/constitution'},\r\n        {name: 'Calendar', subtext: \"Rushington's yearly calendar by month and day\", icon: CalendarIcon, href: '/calendar'},\r\n    ]\r\n    return(\r\n        <div>\r\n            <div>\r\n                {resources.map(resource => {\r\n                    return(\r\n                    <div className='px-2 lg:px-20 py-2'>\r\n                    <a className=''\r\n                        href={resource.href}\r\n                    >\r\n                        <div className='w-full rounded bg-yellow-300 hover:bg-yellow-400 shadow py-6 px-2'>\r\n                        <div className='flex justify-center'>\r\n                            <resource.icon className='h-7 w-7'/>\r\n                            <p className='font-bold text-xl pl-1'>{resource.name}</p>\r\n                        </div>\r\n                        <p className='text-center text-gray-700'>{resource.subtext}</p>\r\n                        </div>\r\n                    </a>\r\n                    </div>)\r\n                })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Resources;","import React from \"react\";\r\nimport { EmojiSadIcon, PencilIcon } from \"@heroicons/react/solid\";\r\nimport { Dialog, Transition } from \"@headlessui/react\";\r\nimport { CheckIcon } from \"@heroicons/react/outline\";\r\nimport { Fragment, useRef, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useParams } from \"react-router\";\r\n\r\nconst Popup = ({ open, setOpen, header, additionalComponent }) => {\r\n  const cancelButtonRef = useRef(null);\r\n\r\n  // Optional additional comp. passed as prop. Has to be a function for React to use it as a component\r\n  function AdditionalComponent(){\r\n    return additionalComponent();\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Transition.Root show={open} as={Fragment}>\r\n        <Dialog\r\n          as=\"div\"\r\n          static\r\n          className=\"fixed z-10 inset-0 overflow-y-auto \"\r\n          open={open}\r\n          onClose={setOpen}\r\n        >\r\n          <div className=\"flex items-end justify-center  min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n            <Transition.Child\r\n              as={Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0\"\r\n              enterTo=\"opacity-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100\"\r\n              leaveTo=\"opacity-0\"\r\n            >\r\n              <Dialog.Overlay className=\"fixed inset-0 bg-gray-700 bg-opacity-30 transition-opacity\" />\r\n            </Transition.Child>\r\n\r\n            {/* This element is to trick the browser into centering the modal contents. */}\r\n            <span\r\n              className=\"hidden sm:inline-block sm:align-middle sm:h-screen\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              &#8203;\r\n            </span>\r\n            <Transition.Child\r\n              as={Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\r\n              enterTo=\"opacity-100 translate-y-0 sm:scale-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\r\n              leaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\r\n            >\r\n              <div className=\"inline-block align-bottom justify-items-center bg-gray-100 rounded-lg px-4 pt-5 pb-4 overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6\">\r\n              <div className='flow-root w-full'>\r\n              <button\r\n                    type=\"button\"\r\n                    className=\"mt-3 inline-flex float-right justify-center rounded-sm border border-gray-600 shadow-sm px-4 py-1 bg-red text-base font-medium text-gray hover:bg-red-600 hover:text-white focus:outline-none sm:mt-0 sm:col-start-1 sm:text-sm\"\r\n                    onClick={() => setOpen(false)}\r\n                    ref={cancelButtonRef}\r\n                  >\r\n                    <svg\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      className=\"h-4 w-4\"\r\n                      fill=\"none\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      stroke=\"currentColor\"\r\n                    >\r\n                      <path\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                        strokeWidth={2}\r\n                        d=\"M6 18L18 6M6 6l12 12\"\r\n                      />\r\n                    </svg>\r\n                    \r\n                  </button>\r\n                  </div>\r\n                <div>\r\n                  <div className=\"flex items-center justify-center rounded-full\">\r\n                    <h1 className=\"text-green text-center font-semibold text-2xl px-2\">{header}</h1>\r\n                  </div>\r\n                  <div className=\"mt-3 text-center sm:mt-5\">\r\n                    <Dialog.Title\r\n                      as=\"h3\"\r\n                      className=\"text-lg leading-6 font-medium text-green\"\r\n                    >\r\n                      \r\n                    </Dialog.Title>\r\n                    <div className=\"mt-2\">\r\n                      {additionalComponent &&\r\n                      <AdditionalComponent/>\r\n                      }\r\n                      <p className=\"text-sm text-gray-500\"></p>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                </div>\r\n                \r\n                  \r\n                  \r\n              </div>\r\n            </Transition.Child>\r\n          </div>\r\n        </Dialog>\r\n      </Transition.Root>\r\n    </>\r\n  );\r\n};\r\nexport default Popup;\r\n","import { Menu, Transition } from \"@headlessui/react\"\r\nimport { Fragment, useState } from \"react\"\r\n\r\n\r\nconst CitizenUserDropboxMenu = ({className, citizens, user, selectedCitizen, setSelectedCitizen, filteredCitizens, setFilteredCitizens, type}) => {\r\n    const [searchCitizensInput, setSearchCitizensInput] = useState('')\r\n    \r\n    function UpOrDownArrow(props){\r\n        if(props.open){\r\n            return <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 15l7-7 7 7\" />\r\n              </svg>} else {\r\n            return <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n              </svg>\r\n          }\r\n        }\r\n    function classNames(...classes) {\r\n            return classes.filter(Boolean).join(\" \");\r\n          }\r\n      \r\n    function censor(citizenID){\r\n            return(user.citizenID != citizenID ? `CI-***${citizenID.substring(6, 8)}` : citizenID);\r\n    }\r\n\r\n    return(\r\n        <Menu as=\"div\" className={classNames(\"flex-shrink-0 justify-center\", className)}>\r\n                  {({ open }) => (\r\n                    <>\r\n                      <div className='flex justify-center'>\r\n                        <Menu.Button className=\"bg-white justify-center flex rounded-lg flex px-2 py-2 text-sm ring-2 ring-gray ring-opacity-20 focus:outline-none focus:ring-opacity-100\">\r\n                            <p className='text-center'>\r\n                              {selectedCitizen != undefined ? selectedCitizen.name : \"Select Citizen...\"}\r\n                            </p>\r\n                            <UpOrDownArrow open={open}/>\r\n                        </Menu.Button>\r\n                      </div>\r\n                      <Transition\r\n                        show={open}\r\n                        as={Fragment}\r\n                        enter=\"transition ease-out duration-75\"\r\n                        enterFrom=\"transform opacity-0 scale-95\"\r\n                        enterTo=\"transform opacity-100 scale-100\"\r\n                        leave=\"transition ease-in duration-75\"\r\n                        leaveFrom=\"transform opacity-100 scale-100\"\r\n                        leaveTo=\"transform opacity-0 scale-95\"\r\n                      >\r\n                        <div className='flex justify-center'>\r\n                          \r\n                        <Menu.Items\r\n                          static\r\n                          className=\"z-50 absolute justify-center h-auto w-56 rounded-md shadow-lg py-1 bg-white ring-1 ring-green ring-opacity-5 focus:outline-none\"\r\n                        >\r\n                          <div className='px-1'>\r\n                        <input className='rounded w-full focus:outline-none border-2 px-1 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700' defaultValue={searchCitizensInput} placeholder='Search'\r\n                              onChange={event => {\r\n                                setSearchCitizensInput(event.target.value);\r\n                                setFilteredCitizens(citizens.filter(citizen => {\r\n                                  console.log(filteredCitizens)\r\n                                  return citizen.name.toUpperCase().includes(event.target.value.toUpperCase());\r\n                                }))\r\n                              }}></input>\r\n                        </div>\r\n                          <div className='max-h-40 overflow-y-scroll'>\r\n                          {filteredCitizens.filter(citizen => {\r\n                            return type != undefined && type == 'All' ? true : citizen.citizenID != user.citizenID\r\n                          }).map(citizen => {\r\n                            return(\r\n                              <Menu.Item>\r\n                            {({ active }) => (\r\n                               <button\r\n                               onClick={()=>{setSelectedCitizen(citizen)}}\r\n                               className={classNames(\r\n                                 active ? \"bg-gray-100\" : \"\",\r\n                                 \"block w-full text-left px-2 py-2 text-sm text-green\"\r\n                               )}\r\n                             >\r\n                               <div className='w-full flow-root'>\r\n                                  <p className='float-left font-semibold'>{citizen.name}</p>\r\n                                  <p className='float-right'>{censor(citizen.citizenID)}</p>\r\n                               </div>\r\n                             </button>\r\n                            )}\r\n                          </Menu.Item>\r\n                            )\r\n                          })}\r\n                          </div>\r\n                        </Menu.Items>\r\n                        </div>\r\n                      </Transition>\r\n                    </>\r\n                  )}\r\n                </Menu>\r\n    )\r\n}\r\n\r\nexport default CitizenUserDropboxMenu","import CitizenUserDropboxMenu from './CitizenUserDropboxMenu'\r\nimport React, {useEffect, useState} from 'react'\r\nimport { ArrowCircleUpIcon } from '@heroicons/react/outline';\r\n\r\nconst NewTransferPopupBody = ({database, user, setMeldas, meldas, getTime, getDate, getYear, setTransfers, setNewTransferPopupOpen}) => {\r\n    const [citizens, setCitizens] = useState([]);\r\n    const [filteredCitizens, setFilteredCitizens] = useState([]);\r\n    const [selectedCitizen, setSelectedCitizen] = useState();\r\n    const [transferAmount, setTransferAmount] = useState(0);\r\n    const [transferReason, setTransferReason] = useState('');\r\n    const [salesTaxRate, setSalesTaxRate] = useState(0);\r\n    const rushingtonEpoch = 1522648800;\r\n\r\n    useEffect(()=>{addCitizens();\r\n        console.log('Called useeffect')\r\n    }, []);\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n      }\r\n    function addCitizens(){\r\n    database.ref('/citizens').get().then(citizensObjects => {\r\n        setCitizens(Object.values(citizensObjects.val()));\r\n        setFilteredCitizens(Object.values(citizensObjects.val()));\r\n        //setSelectedCitizen(Object.values(citizensObjects.val())[0]);\r\n        database.ref('/government/salesTaxRate').get().then(salesTaxRateSnapshot => {\r\n            setSalesTaxRate(salesTaxRateSnapshot.val());\r\n        })\r\n    })}\r\n\r\n    function onClickSendTransfer(){\r\n        var receiverResultingBalance = 0;\r\n        var senderResultingBalance = 0;\r\n        if(isTransferAmountValid()){\r\n        database.ref(`/citizens/${selectedCitizen.citizenID}/meldas`).get().then(\r\n            meldasSnapshot => {\r\n                const amountTaxed = Math.round(Number(transferAmount) * salesTaxRate);\r\n                receiverResultingBalance = (Number(meldasSnapshot.val()) + Number(transferAmount)) - amountTaxed;\r\n                database.ref(`/citizens/${selectedCitizen.citizenID}/meldas`).set(receiverResultingBalance);\r\n                database.ref(`/citizens/${user.citizenID}/meldas`).get().then(\r\n                    meldasSnapshot => {\r\n                        senderResultingBalance = Number(meldasSnapshot.val()) - Number(transferAmount)\r\n                        database.ref(`/citizens/${user.citizenID}/meldas`).set(senderResultingBalance);\r\n                        user.meldas = senderResultingBalance;\r\n                        const transferID = generateTransferID();\r\n                        database.ref(`/citizens/${user.citizenID}/transfers/${transferID}`).set(\r\n                        {\r\n                            transferID: transferID,\r\n                            date: `${getDate()}, ${getYear()}`,\r\n                            time: getTime(),\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                            amount: transferAmount,\r\n                            receiverID: selectedCitizen.citizenID,\r\n                            receiverName: selectedCitizen.name,\r\n                            type: \"Outgoing\",\r\n                            reason: transferReason.length != 0 ? transferReason : 'None given',\r\n                            resultingBalance: senderResultingBalance\r\n                        }\r\n                        \r\n                    );\r\n                    database.ref(`/citizens/${selectedCitizen.citizenID}/transfers/${transferID}`).set(\r\n                        {\r\n                            transferID: transferID,\r\n                            date: `${getDate()}, ${getYear()}`,\r\n                            time: getTime(),\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                            amount: transferAmount - amountTaxed,\r\n                            senderID: user.citizenID,\r\n                            senderName: user.name,\r\n                            type: \"Incoming\",\r\n                            reason: transferReason.length != 0 ? transferReason : 'None given',\r\n                            resultingBalance: receiverResultingBalance\r\n                        }\r\n                        \r\n                    );\r\n                    if(amountTaxed > 0){\r\n                    const taxTransferID = generateTransferID();\r\n                    database.ref('/government').get().then(governmentSnapshot => {\r\n                        var governmentFunds = governmentSnapshot.val().meldas;\r\n                        const newGovernmentFunds = governmentFunds + amountTaxed;\r\n                        database.ref('/government/meldas').set(newGovernmentFunds);\r\n                        database.ref(`/government/transfers/${taxTransferID}`).set(\r\n                            {\r\n                                transferID: taxTransferID,\r\n                                date: `${getDate()}, ${getYear()}`,\r\n                                time: getTime(),\r\n                                ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                                amount: amountTaxed,\r\n                                senderID: user.citizenID,\r\n                                senderName: user.name,\r\n                                type: \"Incoming\",\r\n                                reason: `${salesTaxRate * 100}% tax of ${transferID}`,\r\n                                resultingBalance: newGovernmentFunds\r\n                            }\r\n                        )\r\n                    })\r\n                }\r\n                    database.ref(`/citizens/${user.citizenID}/transfers`).get().then(\r\n                        transfersSnapshot => {\r\n                            console.log(\"Transfers\", transfersSnapshot.val())\r\n                            user.transfers = Object.values(transfersSnapshot.val()).sort((transfer1, transfer2) => {\r\n                                return transfer2.ssre - transfer1.ssre\r\n                            });\r\n                            localStorage.setItem('user', JSON.stringify(user));\r\n                            setNewTransferPopupOpen(false);\r\n                        }\r\n                    )\r\n                    }\r\n                    \r\n                )\r\n            }\r\n        );\r\n        }\r\n    }\r\n\r\n    function generateTransferID(){\r\n        var transferID = 'MT-'\r\n        for(var i = 0; i < 5; i++){\r\n            transferID = transferID + String(Math.floor(Math.random()*10));\r\n        }\r\n        return(transferID);\r\n    }\r\n\r\n    function isTransferAmountValid(){\r\n        return selectedCitizen != undefined && String(transferAmount).length != 0 && !String(transferAmount).startsWith('-') \r\n                && (Number(user.meldas) - Number(transferAmount) >= 0) && transferAmount != 0;\r\n    }\r\n\r\n    return(\r\n        <div className='w-full justify-center '>\r\n            <div className='pb-4'>\r\n            <div className='p-5 bg-blue-200 rounded shadow'>\r\n                <div className=''>\r\n                <div className='w-full pb-2'>\r\n                <p className='text-sm font-bold'>TO</p>\r\n                <CitizenUserDropboxMenu\r\n                    filteredCitizens={filteredCitizens}\r\n                    setFilteredCitizens={setFilteredCitizens}\r\n                    citizens={citizens}\r\n                    selectedCitizen={selectedCitizen}\r\n                    setSelectedCitizen={setSelectedCitizen}\r\n                    className='pb-2'\r\n                    user={user}\r\n                />\r\n                </div>\r\n                <div className='w-full pb-2'>\r\n                <p className='text-sm font-bold'>AMOUNT</p>\r\n                <div className='flex w-full justify-center'>\r\n                <input type='Number' placeholder='' min={0} max={user.meldas} defaultValue={transferAmount} onChange={event => {setTransferAmount(Number(event.target.value))}} className='rounded appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1'></input>\r\n                <p className='font-semibold pl-1 text-xl'>[M]</p>\r\n                </div>\r\n                </div>\r\n                </div>\r\n                <div className='pb-2'>\r\n                <p className='text-sm font-bold'>REASON</p>\r\n                <div className='flex justify-center'>\r\n                <textarea placeholder='' onChange={event => {setTransferReason(event.target.value)}} className='rounded w-full bg-white h-20 flex justify-center resize-none focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-2'></textarea>\r\n                </div>\r\n                </div>\r\n                {isTransferAmountValid() &&\r\n                <div>\r\n                <div className='pb-2'>\r\n                    \r\n                    <p className='text-sm font-bold'>RESULTING BALANCE</p>\r\n                    \r\n                    <p className='p-1 font-semibold shadow bg-white '>{Number(user.meldas) - Number(transferAmount)} {'[M]'}</p>\r\n                </div>\r\n                <div className='pb-2'>\r\n                    \r\n                <p className='text-sm font-bold'>AMOUNT TAXED</p>\r\n                \r\n                <p className='p-1 font-semibold shadow bg-white '>{Math.round(Number(transferAmount) * Number(salesTaxRate))} [M]</p>\r\n            </div>\r\n            </div>\r\n                }\r\n            </div>\r\n            </div>\r\n            <button className={classNames(\r\n                isTransferAmountValid()\r\n                ? 'text-black bg-yellow-300 hover:bg-yellow-400' : 'text-gray-400 bg-yellow-100',\r\n                'w-1/3 rounded py-1 px-2 font-semibold shadow')}\r\n                onClick={onClickSendTransfer}\r\n            >\r\n                <div className='flex justify-center'>\r\n                <ArrowCircleUpIcon className='h-6 w-6'/>\r\n                SEND\r\n                </div>\r\n                </button>\r\n                \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default React.memo(NewTransferPopupBody)","import { PlusCircleIcon } from \"@heroicons/react/outline\";\r\nimport Popup from '../Low Level/Popup'\r\nimport {useEffect, useState} from 'react'\r\nimport NewTransferPopupBody from \"../Low Level/NewTransferPopupBody\";\r\n\r\nconst Bank = ({user, citizenID, database, getTime, getDate, getYear}) => {\r\n  \r\n    const [newTransferPopupOpen, setNewTransferPopupOpen] = useState(false);\r\n    const [meldas, setMeldas] = useState('...');\r\n    const [bankAccounts, setBankAccounts] = useState([]);\r\n    \r\n    function censor(id){\r\n        return(id.startsWith('CI-') && user.citizenID != id ? `CI-***${id.substring(6, 8)}` : id);\r\n    }\r\n\r\n    return(\r\n        <div className='mx-1 lg:mx-10 my-1 lg:my-5'>\r\n            <div className='flow-root py-2'>\r\n                <div className='float-left'>\r\n            <p className='text-4xl text-black font-bold'>Bank</p>\r\n            \r\n            </div>\r\n            \r\n            <div className='float-right'>\r\n                <button className='rounded bg-yellow-300 p-2 font-semibold hover:bg-yellow-400 flex shadow'\r\n                    onClick={()=>{setNewTransferPopupOpen(true)}}\r\n                ><PlusCircleIcon className='w-6 h-6'/><p className='pl-1'>NEW TRANSFER</p>\r\n                <Popup\r\n                    open={newTransferPopupOpen}\r\n                    setOpen={setNewTransferPopupOpen}\r\n                    header='New Transfer'\r\n                    onClickSave={()=>{}}\r\n                    inputs={[]}\r\n\r\n                    saveText={'Send'}\r\n                    additionalComponent={()=>{return <NewTransferPopupBody database={database} bankAccounts={bankAccounts} user={user} setMeldas={setMeldas} meldas={meldas} getTime={getTime} getDate={getDate} getYear={getYear} setNewTransferPopupOpen={setNewTransferPopupOpen}/>}}\r\n                />\r\n                </button>\r\n            </div>\r\n            </div>\r\n            <div className='p-2 lg:p-6 group bg-gray-100 rounded'>\r\n            <div className='lg:flow-root w-full  p-1 shadow bg-white border-4 border-gray-500 text-bottom'>\r\n                <div className='lg:float-left text-bottom bg-white'>\r\n                <p className='text-2xl font-semibold pl-1 text-gray-700'>Current Balance</p>\r\n                \r\n                \r\n                </div>\r\n            <div className='flex justify-center text-2xl font-bold lg:float-right px-1 border-2 border-gray-500 bg-white'>\r\n                <p className='pr-1'>{user.meldas}</p>\r\n                <p>[M]</p>\r\n            </div>\r\n            </div>\r\n            \r\n            <div className='w-full border-gray-500 border-b-4 border-r-4 border-l-4 bg-white'>\r\n                \r\n                <p className='font-semibold text-gray-700 px-2 pt-2 text-2xl'>Transaction History</p>\r\n                {user.transfers != undefined && Object.values(user.transfers).length != 0 ?\r\n                <div className='lg:p-2 p-1 bg-gray-200'>\r\n                {Object.values(user.transfers).sort((transfer1, transfer2) => {\r\n                    return transfer2.ssre - transfer1.ssre;\r\n                }).map(transfer => {\r\n                    return(\r\n                        <div className='p-1'>\r\n                            <Transfer transfer={transfer}/>\r\n                        </div>\r\n                    )\r\n                })}\r\n                </div> :\r\n                <div className='p-2 bg-gray-100'>\r\n                <p className='font-bold text-2xl'>Nothing yet</p>\r\n                </div>\r\n            }\r\n                \r\n            </div>\r\n            </div>\r\n            \r\n            \r\n            \r\n            \r\n        </div>\r\n    )\r\n    \r\n\r\nfunction Transfer({transfer}){\r\n    \r\n        return(\r\n            <div className='rounded bg-white shadow'>\r\n                <div className='w-full lg:flow-root'>\r\n                <p className='lg:float-left pl-2 pt-2 font-semibold text-gray-700'>{transfer.date} at {transfer.time}</p>\r\n                <p className='lg:float-right lg:pl-0 pl-2 pr-2 pt-2 font-semibold text-gray-700'>{transfer.transferID} {transfer.ssre}</p>\r\n                </div>\r\n                <div className='grid grid-cols-4 lg:gap-3 gap-y-3 p-2'>\r\n                {transfer.type == \"Incoming\" ?\r\n                <div className='col-span-4 lg:col-span-2 grid grid-cols-2'>\r\n                            <div className='col-span-1'>\r\n                                <p className='font-semibold'>Amount</p>\r\n                                <p className='text-green-700'>+{transfer.amount} [M]</p>\r\n                            </div>\r\n                            <div className='col-span-1'>\r\n                                <p className='font-semibold'>Sender</p>\r\n                                <p className=''>{transfer.senderName}</p>\r\n                                <p className=''>{transfer.senderName != 'Rushington Government' && transfer.senderName != 'Rushington Bank' ? \r\n                                    censor(transfer.senderID) : ''}</p>\r\n                            </div>\r\n                            </div>\r\n                :    \r\n                <div className='col-span-4 lg:col-span-2 grid grid-cols-2'>\r\n                <div className='col-span-1'>\r\n                    <p className='font-semibold'>Amount</p>\r\n                    <p className='text-red-700'>-{transfer.amount} [M]</p>\r\n                </div>\r\n                <div className='col-span-1'>\r\n                    <p className='font-semibold'>Receiver</p>\r\n                    <p className=''>{transfer.receiverName}</p>\r\n                    <p className=''>{transfer.receiverName != 'Rushington Government' && transfer.receiverName != 'Rushington Bank' && transfer.receiverName != 'Real Currency' ? \r\n                                    censor(transfer.receiverID) : ''}</p>\r\n                </div>\r\n                </div>\r\n                        }\r\n                <div className='col-span-2 lg:col-span-1'>\r\n                                <p className='font-semibold'>Reason</p>\r\n                                <p className=''>{transfer.reason}</p>\r\n                            </div>\r\n                <div className='col-span-2 lg:col-span-1'>\r\n                                <p className='font-semibold'>Resulting Balance</p>\r\n                                <p className=''>{transfer.resultingBalance} [M]</p>\r\n                            </div>\r\n                        </div>\r\n                </div>\r\n        )\r\n    \r\n}\r\n}\r\n\r\n\r\nexport default Bank;","const Calendar = ({currentDate, currentYear}) => {\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n      }\r\n\r\n    const months = [\r\n    {number: 1, name: 'Igmo'},\r\n    {number: 2, name: 'Bostiod'},\r\n    {number: 3, name: 'Walin'},\r\n    {number: 4, name: 'Sabetata'},\r\n    {number: 5, name: 'Carton'},\r\n    {number: 6, name: 'Wayu'},\r\n    {number: 7, name: 'Wildder'},\r\n    {number: 8, name: 'Wekenbarg'},\r\n    {number: 9, name: 'Pape'},\r\n    {number: 10, name: 'Fortis'},\r\n    {number: 11, name: 'Callidus'},\r\n    {number: 12, name: 'Fastis'}\r\n    ];\r\n\r\n    function generateDays(){\r\n        var days = [];\r\n        for(var i = 1; i < 25; i++){\r\n            days.push(i);\r\n        }\r\n        return(days)\r\n    }\r\n\r\n    function getHoliday(day, monthNumber){\r\n        if(monthNumber == 1 && day == 10){\r\n            return('Dependence Day')\r\n        } else if(monthNumber == 1 && day == 23){\r\n            return('To Day')\r\n        } else if(monthNumber == 2 && day == 3){\r\n            return('Coupon Day')\r\n        } else if(monthNumber == 2 && day == 4){\r\n            return('Government Harassment Day')\r\n        } else if(monthNumber == 2 && day == 30){\r\n            return('Monkey Day')\r\n        } else if(monthNumber == 3 && day == 1){\r\n            return('Day of Stain')\r\n        } else if(monthNumber == 3 && day == 14){\r\n            return('Crisis Day')\r\n        } else if(monthNumber == 4 && day == 15){\r\n            return('Cruelty Day')\r\n        } else if(monthNumber == 4 && day == 22){\r\n            return('Shantik Forest Memorial Day')\r\n        } else if(monthNumber == 5 && day == 19){\r\n            return('Blood Day')\r\n        } else if(monthNumber == 5 && day == 24){\r\n            return('Insurance Day')\r\n        } else if(monthNumber == 6 && day == 5){\r\n            return('Argument Day')\r\n        } else if(monthNumber == 6 && day == 17){\r\n            return('China Day')\r\n        } else if(monthNumber == 7 && day == 1){\r\n            return('Clothes Day')\r\n        } else if(monthNumber == 7 && day == 20){\r\n            return('Thankstaking')\r\n        } else if(monthNumber == 8 && day == 9){\r\n            return('Chive Day')\r\n        } else if(monthNumber == 8 && day == 20){\r\n            return('Jazz Day')\r\n        }\r\n    }\r\n\r\n    const days = generateDays();\r\n\r\n    function formatDate(month, day){\r\n        var dayString = '' + day;\r\n        console.log(dayString.endsWith('1'));\r\n        if(dayString.endsWith('0') ||\r\n        dayString.endsWith('4') ||\r\n        dayString.endsWith('5') ||\r\n        dayString.endsWith('6') ||\r\n        dayString.endsWith('7') ||\r\n        dayString.endsWith('8') ||\r\n        dayString.endsWith('9')){\r\n          dayString = dayString.concat('th');\r\n        } else if(dayString.endsWith('1')){\r\n          dayString = dayString == '11' ? dayString.concat('th') : dayString.concat('st');\r\n        } else if(dayString.endsWith('2')){\r\n          dayString = dayString == '12' ? dayString.concat('th') : dayString.concat('nd');\r\n        } else if(dayString.endsWith('3')){\r\n          dayString = dayString == '13' ? dayString.concat('th') : dayString.concat('rd');\r\n        }\r\n        return(`${month} ${dayString}`);\r\n      }\r\n    console.log(days);\r\n    return(\r\n        <div className='py-10 px-1 lg:px-16'>\r\n            <div className='flex justify-center'>\r\n            <h className='text-center text-3xl font-bold'>Year {currentYear}</h>\r\n            </div>\r\n             {months.map(month=>{return(\r\n        <div className='py-5'>\r\n           \r\n        <table class=\"table-fixed w-full border-collapse\">\r\n\r\n  <thead>\r\n  \r\n    <tr>\r\n      <th className=\"text-left text-xl\">{month.name}</th>\r\n      \r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n \r\n  \r\n    {[4, 3, 2, 1].map(week => {\r\n        return(\r\n            <tr className=\"\">\r\n    {days.slice(24-(6*week), 24-(6*week)+6).map(day => {\r\n        return(\r\n            <td className={classNames(currentDate == formatDate(month.name, day) ? 'bg-yellow-300 hover:bg-yellow-400 text-black' : 'bg-white hover:bg-gray-200 text-blue-600',\r\n                \"border border-gray-500 px-1 h-24\")}>\r\n                    <div className='w-full h-full'>\r\n                <div className=''>\r\n                <p className='text-black'>{day}</p>\r\n                </div>\r\n                <div className=''>\r\n                <p className='break-normal overflow-hidden font-semibold text-xs lg:text-base'>{getHoliday(day, month.number)}</p>\r\n                </div>\r\n                </div>\r\n            </td>\r\n        )\r\n    })}\r\n    </tr>\r\n        )\r\n    })}\r\n  \r\n  \r\n  </tbody>\r\n</table>\r\n</div>\r\n    )})}\r\n    </div>)\r\n}\r\n\r\nexport default Calendar;","const Constitution = () => {\r\n    const laws = [\r\n        'No citizen can alter any governmental, business, or residential property that is not their own unless given verbal or written permission by the owner of the property.',\r\n        'No citizen can interact with containers (chests, furnaces, etc.) that arent theirs unless given verbal or written permission or they are labeled Public.',\r\n        'No citizen can trespass on residential property that isnt theirs unless given verbal or written permission.',\r\n        'No citizen can own TNT.',\r\n        'No citizen can plot to overthrow the government.',\r\n        'No citizen can farm crops/animals, ride horses, create potions, or create and operate a business, unless they paid for and own a license signed by the dictator of Rushington.',\r\n        'No citizen can kill or hurt anyone else unless by self-defense.',\r\n        'No citizen can take items or property (including animals and mobs) that isnt their own unless given verbal or written permission.'\r\n    ]\r\n\r\n    const rights = [\r\n        'All citizens of Rushington have the right to say whatever they want without punishment, unless whats said is a threat against others or the government.',\r\n        'All citizens of Rushington have the right to use any of the government services in the government area of Rushington.',\r\n        'All citizens of Rushington, if they own a business license signed by the dictator of Rushington, have the right to create and operate a business on a business lot they paid for, at a price given by the dictator of Rushington.',\r\n        'All citizens of Rushington have the right to buy (at a price given by the dictator of Rushington), own, and alter property that is their own.',\r\n        'All citizens of Rushington have the right to own any item they want, except TNT.',\r\n        'All citizens of Rushington have the right to a fair public trial by the dictator if they feel they were wrongly prosecuted.',\r\n        'All citizens of Rushington have the right to resist being searched by military personnel if they believe its unnecessary, although the dictator may issue a search warrant to allow them to do so.',\r\n        'All citizens have the right to go onto any governmental property (except the Town Hall) and business property unless the property is labeled Private.',\r\n        'All businesses have the right to refuse service to anyone they want.',\r\n        'All citizens have the right to go onto business properties, as long as business is in mind.',\r\n        'All citizens have the right to alter terrain outside of Rushington.',\r\n        'All citizens have the right to fair treatment under the law.'\r\n    ]\r\n\r\n    const policies = [\r\n        'To become a citizen of Rushington, one has to register with the dictator at the registry/licensure. He or she will receive an official certificate of citizenship that contains their information that is signed by the dictator of Rushington. The citizen will then be guaranteed the rights laid out by the Rights section of the Constitution and will be required to follow all laws, or he or she will be punished. It is not required by law that citizens uphold civil responsibilities laid out in the Civil Responsibilities section of the Constitution, but it is preferred.',\r\n        'To create regular currency, a citizen must find/mine/get gold and rename it with an anvil. Gold nuggets are renamed Meldas, gold ingots are renamed Demorias, and gold blocks are renamed Rildas. Each citizen is free to use currency however they please.',\r\n        'To get a property, a citizen must ask which properties are free to use, and the dictator of Rushington will show them which to use based on the purpose (residential vs. business, type of business, etc.) and property balance across the city.',\r\n        'To create a book for the library, a citizen has to put the book in a submission box in the library, and the book will be put in the library in its appropriate genre if its approved by the dictator.',\r\n        'To attain a license, a citizen must buy it on the Rushington Hub website. It is illegal for a citizen to do an action that legally requires a license without owning that license.',\r\n        'To sign up for the military, a citizen must meet with the dictator or general at the military office and be trained, approved, and registered.',\r\n        'To become a police officer, a citizen must purchase a Police Officer License on the Rushington Hub website. He or she will be encouraged to wear the now legal netherite armor and will legally be able to reasonably threaten to enact or enact violence to enforce the law. If the Rushington government believes the threat or enaction was not reasonable, however, that is grounds for license revocation.',\r\n        'To use the bank, a citizen drops their gold nuggets, ingots, or blocks into their deposit box at the bank, and the dictator will keep track of the money of each citizen, occasionally granting interest at the cost of the government.'\r\n    ]\r\n\r\n    const civilResponsibilities = [\r\n        'All citizens should kill any harmful mobs they see within Rushington.',\r\n        'All citizens should fix any property damage caused by creepers/fire/TNT that they find to the best of their ability.',\r\n        'All citizens should buy residential property and build a home.',\r\n        'All citizens should start a business or get a job as part of an already existing business.',\r\n        'All citizens should use government services.'\r\n    ]\r\n\r\n    const constitutionalAdditionsChanges = [\r\n        '(Additional Law). Advisors are citizens in the eyes of the law, but they can legally alter any governmental property as they see fit.',\r\n        '(Additional Right). All citizens have the right to expression. They may wear any skin and armor.',\r\n        '(Additional Law). No citizen can wear/own a green leather cap, as they are only worn by military personnel, and any offense would be stolen valor.',\r\n        '(Additional Right). All citizens have the right to kill any animals/mobs on their property or on governmental/business property that doesnt clearly belong to that government/business.',\r\n        '(Additional Law). All citizens have to fix any property damage that was caused by a creeper that exploded in an attempt to kill that citizen.',\r\n        '(Additional Law). The most recent edition of the Constitution is the Supreme Law of the Land.',\r\n        '(Additional Right). No citizen of Rushington can be convicted of a crime that was not prohibited previous of the crime.',\r\n        '(Addition to the System of Government). The dictator of Rushington needs the approval of one of the advisors of a punishment when deciding a verdict.',\r\n        '(Clarification of Right 8). No citizen can enter or alter the property that the Town Hall is on (defined the innermost green hedge).',\r\n        '(Addition to the System of Government). The dictator of Rushington has the right to infringe upon a citizens right(s) if given permission by both advisors.',\r\n        '(Additional Policy). Citizens have to pay for their residential/business property within a month of beginning the purchase.',\r\n        '(Additional Policy). Citizens have to start paying for a residential/business property within a day of the property being registered to the citizen.',\r\n        '(Additional Law). No citizen can host a business on their business property if he or she does not own a Business and Organization License.',\r\n        '(Additional Law). No citizen can wear netherite armor if he or she is not a licensed police officer.'\r\n    ]\r\n    \r\n    var lawNumber = 0;\r\n    var rightNumber = 0;\r\n    var policyNumber = 0;\r\n    var civilResponsibilityNumber = 0;\r\n    var constitutionalAdditionsChangeNumber = 0;\r\n    return(\r\n        <div className='px-2 lg:px-16 py-8'>\r\n            <p className='font-bold text-2xl text-center'>Constitution of Rushington</p>\r\n            <p className='text-sm text-center font-semibold text-gray-800'>THE SUPREME LAW OF THE LAND</p>\r\n            <p className='font-bold pt-5'>\r\n                System of Government\r\n            </p>\r\n            <div>\r\n                <p>\r\n                    The government of Rushington is a Demoperiatic Oligarchy under the sovereignty of a dictator and a council consisting of two advisors, who are, under the law, citizens. The dictator can create/change laws and any other legal policies. The citizens must follow these laws and legal policies or they will be sentenced to a punishment that the dictator, who acts as a judge, or an appointed licensed judge sees as necessary. The dictator of Rushington can break any laws or legal policies with the permission of both advisors.\r\n                </p>\r\n            </div>\r\n            <p className='font-bold pt-5'>\r\n                Laws\r\n            </p>\r\n            <p className='pb-2'>\r\n                The following laws are enforced by the government and licensed police. Citizens must follow these laws within Rushington or they will be sentenced to a punishment.\r\n            </p>\r\n            {laws.map(law => {\r\n                lawNumber++;\r\n                return(\r\n                    <div>\r\n                    <p>{lawNumber}. {law}</p>\r\n                    </div>\r\n                )\r\n            })}\r\n            <p className='font-bold pt-5'>\r\n                Rights\r\n            </p>\r\n            <p className='pb-2'>\r\n                All citizens of Rushington have the following rights while in Rushington that cannot be infringed upon.\r\n            </p>\r\n            {rights.map(right => {\r\n                rightNumber++;\r\n                return(\r\n                    <div>\r\n                    <p>{rightNumber}. {right}</p>\r\n                    </div>\r\n                )\r\n            })}\r\n            <p className='font-bold pt-5'>\r\n                Policies\r\n            </p>\r\n            <p className='pb-2'>\r\n                The following policies describe important information in the daily life of a Rushington citizen.\r\n            </p>\r\n            {policies.map(policy => {\r\n                policyNumber++;\r\n                return(\r\n                    <div>\r\n                    <p>{policyNumber}. {policy}</p>\r\n                    </div>\r\n                )\r\n            })}\r\n            <p className='font-bold pt-5'>\r\n                Civil Responsibilities\r\n            </p>\r\n            <p className='pb-2'>\r\n                The following civil responsibilities are not required by law to perform, but they are preferred in order to maintain Rushington the best that is possible.\r\n            </p>\r\n            {civilResponsibilities.map(civilResponsibility => {\r\n                civilResponsibilityNumber++;\r\n                return(\r\n                    <div>\r\n                    <p>{civilResponsibilityNumber}. {civilResponsibility}</p>\r\n                    </div>\r\n                )\r\n            })}\r\n            <p className='font-bold pt-5'>\r\n                Constitutional Additions/Changes\r\n            </p>\r\n            <p className='pb-2'>\r\n                The following additions/changes overrule any already existing constitutional ideas.\r\n            </p>\r\n            {constitutionalAdditionsChanges.map(constitutionalAdditionsChange => {\r\n                constitutionalAdditionsChangeNumber++;\r\n                return(\r\n                    <div>\r\n                    <p>{constitutionalAdditionsChangeNumber} {constitutionalAdditionsChange}</p>\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Constitution;","import { Menu, Transition } from \"@headlessui/react\"\r\nimport { Fragment, useState } from \"react\"\r\n\r\nconst CitizenGovernmentDropboxMenu = ({className, citizens, user, selectedCitizen, setSelectedCitizen, filteredCitizens, setFilteredCitizens}) => {\r\n    const [searchCitizensInput, setSearchCitizensInput] = useState('')\r\n    \r\n    function UpOrDownArrow(props){\r\n        if(props.open){\r\n            return <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 15l7-7 7 7\" />\r\n              </svg>} else {\r\n            return <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n              </svg>\r\n          }\r\n        }\r\n    function classNames(...classes) {\r\n            return classes.filter(Boolean).join(\" \");\r\n          }\r\n\r\n    return(\r\n        <Menu as=\"div\" className={classNames(\"flex-shrink-0 justify-center\", className)}>\r\n                  {({ open }) => (\r\n                    <>\r\n                      <div className='flex justify-center'>\r\n                        <Menu.Button className=\"bg-white justify-center flex rounded-lg flex px-2 py-1 text-sm ring-2 ring-gray ring-opacity-20 focus:outline-none focus:ring-opacity-100\">\r\n                            <p className='text-center'>\r\n                              {selectedCitizen != undefined ? selectedCitizen.name : \"Select Citizen...\"}\r\n                            </p>\r\n                            <UpOrDownArrow open={open}/>\r\n                        </Menu.Button>\r\n                      </div>\r\n                      <Transition\r\n                        show={open}\r\n                        as={Fragment}\r\n                        enter=\"transition ease-out duration-75\"\r\n                        enterFrom=\"transform opacity-0 scale-95\"\r\n                        enterTo=\"transform opacity-100 scale-100\"\r\n                        leave=\"transition ease-in duration-75\"\r\n                        leaveFrom=\"transform opacity-100 scale-100\"\r\n                        leaveTo=\"transform opacity-0 scale-95\"\r\n                      >\r\n                        <div className='flex justify-center'>\r\n                          \r\n                        <Menu.Items\r\n                          static\r\n                          className=\"z-50 absolute justify-center h-auto w-56 rounded-md shadow-lg py-1 bg-white ring-1 ring-green ring-opacity-5 focus:outline-none\"\r\n                        >\r\n                          <div className='px-1'>\r\n                        <input className='w-full focus:outline-none bg-gray-100 border-2 px-1 border-gray-500 focus:border-gray-700' defaultValue={searchCitizensInput} placeholder='Search'\r\n                              onChange={event => {\r\n                                setSearchCitizensInput(event.target.value);\r\n                                setFilteredCitizens(citizens.filter(citizen => {\r\n                                  console.log(filteredCitizens)\r\n                                  return citizen.name.toUpperCase().includes(event.target.value.toUpperCase());\r\n                                }))\r\n                              }}></input>\r\n                        </div>\r\n                          <div className='max-h-40 overflow-y-scroll'>\r\n                          {filteredCitizens.map(citizen => {\r\n                            return(\r\n                              <Menu.Item>\r\n                            {({ active }) => (\r\n                               <button\r\n                               onClick={()=>{setSelectedCitizen(citizen)}}\r\n                               className={classNames(\r\n                                 active ? \"bg-gray-100\" : \"\",\r\n                                 \"block w-full text-left px-2 py-2 text-sm text-green\"\r\n                               )}\r\n                             >\r\n                               <div className='w-full flow-root'>\r\n                                  <p className='float-left font-semibold'>{citizen.name}</p>\r\n                                  <p className='float-right'>{citizen.citizenID}</p>\r\n                               </div>\r\n                             </button>\r\n                            )}\r\n                          </Menu.Item>\r\n                            )\r\n                          })}\r\n                          </div>\r\n                        </Menu.Items>\r\n                        </div>\r\n                      </Transition>\r\n                    </>\r\n                  )}\r\n                </Menu>\r\n    )\r\n}\r\n\r\nexport default CitizenGovernmentDropboxMenu","import CitizenGovernmentDropboxMenu from './CitizenGovernmentDropboxMenu'\r\nimport React, {useEffect, useState} from 'react'\r\n\r\nconst NewChargePopupBody = ({database, getTime, getDate, getYear, selectedCitizen, setSelectedCitizen, setNewChargePopupOpen, setValues}) => {\r\n    const [citizens, setCitizens] = useState([]);\r\n    const [filteredCitizens, setFilteredCitizens] = useState([]);\r\n    const [selectedDefendant, setSelectedDefendant] = useState(selectedCitizen);\r\n    const [selectedProsecutor, setSelectedProsecutor] = useState();\r\n    const [allegedCrime, setAllegedCrime] = useState('');\r\n    const [reasonForVerdict, setReasonForVerdict] = useState('');\r\n    const [punishment, setPunishment] = useState('');\r\n    const [citizenGuilty, setCitizenGuilty] = useState(true);\r\n    const rushingtonEpoch = 1522648800;\r\n\r\n    useEffect(()=>{addCitizens();\r\n        console.log('Called useeffect')\r\n    }, []);\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n      }\r\n    function addCitizens(){\r\n    database.ref('/citizens').get().then(citizensObjects => {\r\n        setCitizens(Object.values(citizensObjects.val()));\r\n        setFilteredCitizens(Object.values(citizensObjects.val()));\r\n        //setSelectedCitizen(Object.values(citizensObjects.val())[0]);\r\n        console.log(Object.values(citizensObjects.val())[0])\r\n    })}\r\n\r\n    function onClickAddChargeButton(){\r\n        database.ref(`/citizens/${selectedCitizen.citizenID}`).get().then(\r\n            citizenSnapshot => {\r\n                var editedSelectedCitizen = citizenSnapshot.val();\r\n                var newCharge = {};\r\n                const newChargeID = generateChargeID();\r\n                if(citizenGuilty){\r\n                    newCharge = {\r\n                        date: `${getDate()}, ${getYear()}`,\r\n                        time: `${getTime()}`,\r\n                        ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                        chargeID: newChargeID,\r\n                        defendant: {name: selectedDefendant.name, citizenID: selectedDefendant.citizenID},\r\n                        prosecutor: {name: selectedProsecutor.name, citizenID: selectedProsecutor.citizenID},\r\n                        crime: allegedCrime,\r\n                        verdict: \"Guilty\",\r\n                        reasonForVerdict: reasonForVerdict,\r\n                        punishment: punishment} \r\n                } else {\r\n                    newCharge = {\r\n                        date: `${getDate()}, ${getYear()}`,\r\n                        time: `${getTime()}`,\r\n                        ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                        chargeID: newChargeID,\r\n                        defendant: {name: selectedDefendant.name, citizenID: selectedDefendant.citizenID},\r\n                        prosecutor: {name: selectedProsecutor.name, citizenID: selectedProsecutor.citizenID},\r\n                        allegedCrime: allegedCrime,\r\n                        verdict: \"Not Guilty\",\r\n                        reasonForVerdict: reasonForVerdict\r\n                    };\r\n                } \r\n                database.ref(`/citizens/${selectedCitizen.citizenID}/charges/${newChargeID}`).set(newCharge);\r\n                database.ref(`/criminalCharges/${newChargeID}`).set(newCharge);\r\n                console.log(\"Charges\", selectedCitizen.charges)\r\n                editedSelectedCitizen.charges = editedSelectedCitizen.charges != undefined ? JSON.parse(JSON.stringify([...Object.values(editedSelectedCitizen.charges), newCharge])) : JSON.parse(JSON.stringify([newCharge]));\r\n                setValues();\r\n                setSelectedCitizen(editedSelectedCitizen);\r\n                setNewChargePopupOpen(false);\r\n            }\r\n        )\r\n    }\r\n\r\n    function generateChargeID(){\r\n        var chargeID = 'CC-'\r\n        for(var i = 0; i < 5; i++){\r\n            chargeID = chargeID + String(Math.floor(Math.random()*10));\r\n        }\r\n        return(chargeID);\r\n    }\r\n    return(\r\n        <div className='w-full justify-center '>\r\n            <div className='pb-4'>\r\n            <div className='p-5 bg-blue-200 rounded shadow'>\r\n                <div className='flow-root w-full pb-5'>\r\n                <div className='float-left w-1/2'>\r\n                <p className='text-sm font-bold'>PROSECUTOR</p>\r\n                <CitizenGovernmentDropboxMenu\r\n                    filteredCitizens={filteredCitizens}\r\n                    setFilteredCitizens={setFilteredCitizens}\r\n                    citizens={citizens}\r\n                    selectedCitizen={selectedProsecutor}\r\n                    setSelectedCitizen={setSelectedProsecutor}\r\n                    className='pb-2'\r\n                />\r\n                </div>\r\n                <div className='float-right w-1/2'>\r\n                <p className='text-sm font-bold'>DEFENDANT</p>\r\n                <p>{selectedCitizen.name}</p>\r\n                </div>\r\n                </div>\r\n                <div className='w-full'>\r\n                    <p className='text-sm font-bold'>ALLEGED CRIME</p>\r\n                    <textarea className='w-full focus:outline-none p-2' placeholder=\"\" onChange={event=>{setAllegedCrime(event.target.value)}}></textarea>\r\n                </div>\r\n                <div className='w-full flex justify-center pt-2'>\r\n                    <button className={classNames(citizenGuilty ? 'text-black bg-yellow-300' : 'text-gray-400 bg-yellow-100 hover:bg-yellow-200',\r\n                        'w-1/3 rounded-l py-1 px-2 font-semibold text-sm')}\r\n                        onClick={()=>{setCitizenGuilty(true)}}>GUILTY</button>\r\n                    <button className={classNames(!citizenGuilty ? 'text-black bg-yellow-300' : 'text-gray-400 bg-yellow-100 hover:bg-yellow-200',\r\n                        'w-1/3 rounded-r py-1 px-2 font-semibold text-sm')}\r\n                        onClick={()=>{setCitizenGuilty(false)}}>NOT GUILTY</button>\r\n                </div>\r\n                <div className='w-full pt-2'>\r\n                    <p className='text-sm font-bold'>REASON</p>\r\n                    <textarea className='w-full focus:outline-none p-2' placeholder=\"\" onChange={event=>{setReasonForVerdict(event.target.value)}}></textarea>\r\n                </div>\r\n                {citizenGuilty &&\r\n                <div className='w-full pt-2'>\r\n                    <p className='text-sm font-bold'>PUNISHMENT</p>\r\n                    <textarea className='w-full focus:outline-none p-2' placeholder=\"\" onChange={event=>{setPunishment(event.target.value)}}></textarea>\r\n                </div>\r\n                }\r\n            </div>\r\n            </div>\r\n            <button className={classNames(\r\n                selectedDefendant != undefined &&  selectedProsecutor != undefined ? 'text-black bg-yellow-300 hover:bg-yellow-400' : 'text-gray-400 bg-yellow-100',\r\n                'w-1/3 rounded py-1 px-2 font-semibold')}\r\n                onClick={onClickAddChargeButton}\r\n            >Add</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default React.memo(NewChargePopupBody)","import { Menu, Transition } from \"@headlessui/react\"\r\nimport { Fragment, useState } from \"react\"\r\n\r\nconst AddPropertyPopupBody = ({database, getTime, getDate, getYear, properties, setProperties, setAddPropertyPopupOpen}) => {\r\n  const [selectedPropertyType, setSelectedPropertyType] = useState();\r\n  const [address, setAddress] = useState('');\r\n  const [width, setWidth] = useState();\r\n  const [length, setLength] = useState();\r\n  const [price, setPrice] = useState();\r\n  const propertyTypeOptions = ['Residential', 'Business'];\r\n  const rushingtonEpoch = 1522648800;\r\n\r\n  function UpOrDownArrow(props){\r\n    if(props.open){\r\n        return <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 15l7-7 7 7\" />\r\n          </svg>} else {\r\n        return <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n          </svg>\r\n      }\r\n    }\r\n\r\n    function classNames(...classes) {\r\n      return classes.filter(Boolean).join(\" \");\r\n    }\r\n\r\n    function onClickAddPropertyButton(){\r\n      if(selectedPropertyType != undefined && length != undefined && width != undefined && address != undefined && price != undefined){\r\n        const propertyID = generatePropertyID();\r\n        const newProperty = {\r\n          propertyID: propertyID,\r\n          address: address,\r\n          type: selectedPropertyType,\r\n          price: Number(price),\r\n          width: Number(width),\r\n          length: Number(length),\r\n          size: length * width,\r\n          ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n          dateAdded: `${getDate()}, ${getYear()}`,\r\n          timeAdded: getTime()\r\n        }\r\n        database.ref(`/properties/${propertyID}`).set(newProperty);\r\n        const editedProperties = [...properties];\r\n        editedProperties.push(newProperty);\r\n        setProperties(editedProperties);\r\n        setAddPropertyPopupOpen(false);\r\n      }\r\n    }\r\n\r\n    function generatePropertyID(){\r\n      var propertyID = 'PR-'\r\n      for(var i = 0; i < 5; i++){\r\n          propertyID = propertyID + String(Math.floor(Math.random()*10));\r\n      }\r\n      return(propertyID);\r\n    }\r\n    return(\r\n    <div>\r\n      <div className='pb-4'>\r\n        <div className='p-5 bg-blue-200 rounded shadow'>\r\n        <div className='w-full flex gap-4 justify-center items-center pb-4'>\r\n          <div>\r\n        <div className='align-center'>\r\n                    <p className='text-sm font-bold'>PROPERTY TYPE</p>\r\n                    \r\n        <Menu as=\"div\" className={classNames(\"flex-shrink-0 align-center w-full\")}>\r\n                  {({ open }) => (\r\n                    <>\r\n                      \r\n                        <Menu.Button className=\"bg-white w-full justify-center rounded-lg flex align-center p-2 text-sm ring-2 ring-gray ring-opacity-20 focus:outline-none focus:ring-opacity-100\">\r\n                            <p className='text-center'>\r\n                              {selectedPropertyType != undefined ? selectedPropertyType : 'Select Property Type...'}\r\n                            </p>\r\n                            <UpOrDownArrow open={open}/>\r\n                        </Menu.Button>\r\n                      <Transition\r\n                        show={open}\r\n                        as={Fragment}\r\n                        enter=\"transition ease-out duration-75\"\r\n                        enterFrom=\"transform opacity-0 scale-95\"\r\n                        enterTo=\"transform opacity-100 scale-100\"\r\n                        leave=\"transition ease-in duration-75\"\r\n                        leaveFrom=\"transform opacity-100 scale-100\"\r\n                        leaveTo=\"transform opacity-0 scale-95\"\r\n                      >\r\n                        <div className='flex justify-center'>\r\n                          \r\n                        <Menu.Items\r\n                          static\r\n                          className=\"z-40 absolute justify-center h-auto w-56 rounded-md shadow-lg py-1 bg-white ring-1 ring-green ring-opacity-5 focus:outline-none\"\r\n                        >\r\n                        \r\n\r\n                          <div className='max-h-40'>\r\n                          {propertyTypeOptions.map(propertyTypeOption => {\r\n                            return(\r\n                              <Menu.Item>\r\n                            {({ active }) => (\r\n                               <button\r\n                               onClick={()=>{setSelectedPropertyType(propertyTypeOption)}}\r\n                               className={classNames(\r\n                                 active ? \"bg-gray-100\" : \"\",\r\n                                 \"block w-full text-left px-4 py-2 text-sm text-green\"\r\n                               )}\r\n                             >\r\n                              {propertyTypeOption}\r\n                             </button>\r\n                            )}\r\n                          </Menu.Item>\r\n                            )\r\n                          })}\r\n                          </div>\r\n                        </Menu.Items>\r\n                        </div>\r\n                      </Transition>\r\n                    </>\r\n                  )}\r\n                </Menu>\r\n                </div>\r\n                    </div>\r\n                  \r\n                </div>\r\n                <div className='align-center'>\r\n                    <p className='text-sm font-bold'>ADDRESS</p>\r\n                    <div className='flex justify-center'>\r\n                    <input placeholder='' onChange={event => {setAddress(event.target.value)}} className='flex justify-center border-2 border-gray-500 focus:border-gray-700 focus:outline-none bg-white p-1 w-full'></input>\r\n                    </div>\r\n                    </div>\r\n                <div className='flex gap-3 justify-center pt-4'>\r\n                      <div className='w-full'>\r\n                        <p className='text-sm font-bold'>WIDTH</p>\r\n                        <input className='focus:outline-none bg-white w-full p-1 border-2 border-gray-500 focus:border-gray-700'\r\n                          onChange={event => {setWidth(event.target.value)}}\r\n                        ></input>\r\n                      </div>\r\n                      <div className='w-full'>\r\n                        <p className='text-sm font-bold'\r\n                        >LENGTH</p>\r\n                        <input className='focus:outline-none bg-white p-1 w-full border-2 border-gray-500 focus:border-gray-700'\r\n                          onChange={event => {setLength(event.target.value)}}\r\n                        ></input>\r\n                      </div>\r\n                      {length && width &&\r\n                      <div className='w-full'>\r\n                        <p className='text-sm font-bold'>SIZE</p>\r\n                        <p className='p-1 bg-white w-full shadow border-2 border-white break-none'>{length * width} Blocks</p>\r\n                      </div>\r\n                      }\r\n                </div>\r\n                \r\n                <div className='pt-4'>\r\n                  <p className='text-sm font-bold'>PRICE</p>\r\n                  <div className='flex gap-1 justify-center'>\r\n                    <input className='focus:outline-none bg-white p-1 w-32 border-2 border-gray-500 focus:border-gray-700'\r\n                      onChange={event => {setPrice(event.target.value)}}\r\n                    ></input>\r\n                    <p className='font-semibold text-lg'>[M]</p>\r\n                  </div>\r\n                </div>\r\n                <div></div>\r\n          </div>\r\n          \r\n          </div>\r\n          <div className='flex justify-center'>\r\n            <button className={classNames(\r\n                selectedPropertyType != undefined && length != undefined && width != undefined && address != undefined && price != undefined ? 'text-black bg-yellow-300 hover:bg-yellow-400' : 'text-gray-400 bg-yellow-100',\r\n                'w-1/3 rounded py-1 px-2 font-semibold shadow')}\r\n                onClick={onClickAddPropertyButton}\r\n            >ADD</button>\r\n            </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default AddPropertyPopupBody;","import DropboxMenu from './CitizenUserDropboxMenu'\r\nimport React, {useEffect, useState} from 'react'\r\n\r\nconst AddCitizenPopupBody = ({database, setAddCitizenPopupOpen, citizens, setCitizens, getTime, getDate, getYear}) => {\r\n    const [name, setName] = useState('');\r\n    const [citizenID, setCitizenID] = useState('');\r\n    const [initialMeldas, setInitialMeldas] = useState(0);\r\n    \r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n      }\r\n    \r\n    function onClickAddCitizenButton(){\r\n        const newCitizenID = generateCitizenID();\r\n        if(name){\r\n            const addedCitizen = {\r\n                citizenID: citizenID ? citizenID : newCitizenID,\r\n                name: name,\r\n                meldas: initialMeldas,\r\n                dateAdded: `${getDate()}, ${getYear()}`\r\n            }\r\n            database.ref('/citizens/' + (citizenID ? citizenID : newCitizenID)).set(addedCitizen);\r\n            const editedCitizens = [...citizens];\r\n            editedCitizens.push(addedCitizen);\r\n            setCitizens(editedCitizens);\r\n            setAddCitizenPopupOpen(false);\r\n        }\r\n    }\r\n\r\n    function generateCitizenID(){\r\n        var citizenID = 'CI-'\r\n        for(var i = 0; i < 5; i++){\r\n            citizenID = citizenID + String(Math.floor(Math.random()*10));\r\n        }\r\n        return(citizenID);\r\n    }\r\n    return(\r\n        <div className='w-full justify-center '>\r\n            <div className='pb-4'>\r\n            <div className='p-5 bg-blue-200 rounded shadow'>\r\n                \r\n                <div className=''>\r\n                <p className='text-sm font-bold'>NAME</p>\r\n                <input className='p-1 focus:outline-none'\r\n                    onChange={event => {setName(event.target.value)}}\r\n                ></input>\r\n                </div>\r\n                <div className='pt-2'>\r\n                <p className='text-sm font-bold'>CITIZEN ID</p>\r\n                \r\n                <input className='p-1 focus:outline-none'\r\n                    placeholder='Generated if no input'\r\n                    onChange={event => {setCitizenID(event.target.value)}}\r\n                ></input>\r\n                </div>\r\n                <div className='pt-2'>\r\n                <p className='text-sm font-bold'>INITIAL MELDAS</p>\r\n                \r\n                <input type='Number' defaultValue='0' className='p-1 focus:outline-none'></input>\r\n                </div>\r\n                \r\n            </div>\r\n            </div>\r\n            <button className={classNames(\r\n                name ? 'text-black bg-yellow-300 hover:bg-yellow-400' : 'text-gray-400 bg-yellow-100',\r\n                'w-1/3 rounded py-1 px-2 font-semibold')}\r\n                onClick={onClickAddCitizenButton}\r\n            >Add</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default React.memo(AddCitizenPopupBody)","import { useState } from \"react\";\r\n\r\nconst AddBusinessPopupBody = ({database, setValues, selectedProperty, setSelectedProperty, setAddChangeBusinessPopupOpen}) => {\r\n    const [name, setName] = useState();\r\n    const [description, setDescription] = useState();\r\n\r\n    function onClickAddBusinessButton(){\r\n        const newBusiness = {\r\n            name: name,\r\n            description: description\r\n        }\r\n        database.ref(`/properties/${selectedProperty.propertyID}/business`).set(newBusiness);\r\n        database.ref(`/citizens/${selectedProperty.owner.citizenID}/properties/${selectedProperty.propertyID}/business`).set(newBusiness);\r\n        setValues();\r\n        var editedSelectedProperty = JSON.parse(JSON.stringify(selectedProperty));\r\n        editedSelectedProperty.business = newBusiness;\r\n        setSelectedProperty(editedSelectedProperty);\r\n        setAddChangeBusinessPopupOpen(false);\r\n    }\r\n\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n    }\r\n\r\n    return(\r\n        <div className='w-full justify-center '>\r\n            <div className='pb-4'>\r\n            <div className='p-5 bg-blue-200 rounded shadow'>\r\n                \r\n                <div className=''>\r\n                <p className='text-sm font-bold'>NAME</p>\r\n                <input className='p-1 w-full border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 focus:outline-none'\r\n                    defaultValue={selectedProperty.business != undefined ? selectedProperty.business.name : ''}\r\n                    onChange={event => {setName(event.target.value)}}\r\n                ></input>\r\n                </div>\r\n                <div className='pt-2'>\r\n                <p className='text-sm font-bold'>DESCRIPTION</p>\r\n                \r\n                <textarea className='p-1 w-full border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 resize-none focus:outline-none'\r\n                    defaultValue={selectedProperty.business != undefined ? selectedProperty.business.description : ''}\r\n                    onChange={event => {setDescription(event.target.value)}}\r\n                ></textarea>\r\n                </div>\r\n            </div>\r\n            </div>\r\n            <button className={classNames(\r\n                name && description ? 'text-black bg-yellow-300 hover:bg-yellow-400' : 'text-gray-400 bg-yellow-100',\r\n                'w-1/3 rounded py-1 px-2 font-semibold')}\r\n                onClick={onClickAddBusinessButton}\r\n            >Add</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AddBusinessPopupBody;","import { Menu, Transition } from \"@headlessui/react\"\r\nimport { Fragment, useState } from \"react\"\r\n\r\nconst PropertyDropboxMenu = ({className, properties, user, selectedProperty, setSelectedProperty, filteredProperties, setFilteredProperties}) => {\r\n    const [searchPropertiesInput, setSearchPropertiesInput] = useState('')\r\n    \r\n    function UpOrDownArrow(props){\r\n        if(props.open){\r\n            return <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 15l7-7 7 7\" />\r\n              </svg>} else {\r\n            return <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n              </svg>\r\n          }\r\n        }\r\n    function classNames(...classes) {\r\n            return classes.filter(Boolean).join(\" \");\r\n          }\r\n\r\n    return(\r\n        <Menu as=\"div\" className={classNames(\"flex-shrink-0 justify-center\", className)}>\r\n                  {({ open }) => (\r\n                    <>\r\n                      <div className='flex justify-center'>\r\n                        <Menu.Button className=\"bg-white justify-center flex rounded-lg flex px-2 py-1 text-sm ring-2 ring-gray ring-opacity-20 focus:outline-none focus:ring-opacity-100\">\r\n                            <p className='text-center'>\r\n                              {selectedProperty != undefined ? selectedProperty.address : \"Select Property...\"}\r\n                            </p>\r\n                            <UpOrDownArrow open={open}/>\r\n                        </Menu.Button>\r\n                      </div>\r\n                      <Transition\r\n                        show={open}\r\n                        as={Fragment}\r\n                        enter=\"transition ease-out duration-75\"\r\n                        enterFrom=\"transform opacity-0 scale-95\"\r\n                        enterTo=\"transform opacity-100 scale-100\"\r\n                        leave=\"transition ease-in duration-75\"\r\n                        leaveFrom=\"transform opacity-100 scale-100\"\r\n                        leaveTo=\"transform opacity-0 scale-95\"\r\n                      >\r\n                        <div className='flex justify-center'>\r\n                          \r\n                        <Menu.Items\r\n                          static\r\n                          className=\"z-40 absolute justify-center h-auto w-56 rounded-md shadow-lg py-1 bg-white ring-1 ring-green ring-opacity-5 focus:outline-none\"\r\n                        >\r\n                          <div className='px-1'>\r\n                        <input className='w-full focus:outline-none bg-gray-100 border-2 px-1 border-gray-500 focus:border-gray-700' defaultValue={searchPropertiesInput} placeholder='Search'\r\n                              onChange={event => {\r\n                                setSearchPropertiesInput(event.target.value);\r\n                                setFilteredProperties(properties.filter(property => {\r\n                                  //console.log(filteredCitizens)\r\n                                  return property.address.toUpperCase().includes(event.target.value.toUpperCase());\r\n                                }))\r\n                              }}></input>\r\n                        </div>\r\n                          <div className='max-h-40 overflow-y-scroll'>\r\n                          {filteredProperties.map(property => {\r\n                            return(\r\n                              <Menu.Item>\r\n                            {({ active }) => (\r\n                               <button\r\n                               onClick={()=>{setSelectedProperty(property)}}\r\n                               className={classNames(\r\n                                 active ? \"bg-gray-100\" : \"\",\r\n                                 \"block w-full text-left px-2 py-2 text-sm text-green\"\r\n                               )}\r\n                             >\r\n                               <div className='w-full flow-root'>\r\n                                  <p className='float-left font-semibold'>{property.address}</p>\r\n                                  <p className='float-right'>{property.propertyID}</p>\r\n                               </div>\r\n                             </button>\r\n                            )}\r\n                          </Menu.Item>\r\n                            )\r\n                          })}\r\n                          </div>\r\n                        </Menu.Items>\r\n                        </div>\r\n                      </Transition>\r\n                    </>\r\n                  )}\r\n                </Menu>\r\n    )\r\n}\r\n\r\nexport default PropertyDropboxMenu","import React, {useEffect, useState} from 'react'\r\nimport { ArrowCircleUpIcon } from '@heroicons/react/outline';\r\n\r\nconst NewGovernmentTransferPopupBody = ({database, user, getTime, getDate, getYear, setNewGovernmentTransferPopupOpen, selectedCitizen, setValues, governmentFunds}) => {\r\n    const [citizens, setCitizens] = useState([]);\r\n    const [filteredCitizens, setFilteredCitizens] = useState([]);\r\n    const [transferAmount, setTransferAmount] = useState(0);\r\n    const [transferReason, setTransferReason] = useState('');\r\n    const rushingtonEpoch = 1522648800;\r\n\r\n    useEffect(()=>{addCitizens();\r\n        console.log('Called useeffect')\r\n    }, []);\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n      }\r\n    function addCitizens(){\r\n    database.ref('/citizens').get().then(citizensObjects => {\r\n        setCitizens(Object.values(citizensObjects.val()));\r\n        setFilteredCitizens(Object.values(citizensObjects.val()));\r\n        //setSelectedCitizen(Object.values(citizensObjects.val())[0]);\r\n        console.log(Object.values(citizensObjects.val())[0])\r\n    })}\r\n\r\n    function onClickSendTransfer(){\r\n        var receiverResultingBalance = 0;\r\n        var senderResultingBalance = 0;\r\n        if(isTransferAmountValid()){\r\n        database.ref(`/citizens/${selectedCitizen.citizenID}/meldas`).get().then(\r\n            meldasSnapshot => {\r\n                receiverResultingBalance = Number(meldasSnapshot.val()) + Number(transferAmount)\r\n                database.ref(`/citizens/${selectedCitizen.citizenID}/meldas`).set(receiverResultingBalance);\r\n                database.ref(`/government/meldas`).get().then(\r\n                    meldasSnapshot => {\r\n                        senderResultingBalance = Number(meldasSnapshot.val()) - Number(transferAmount)\r\n                        database.ref(`/government/meldas`).set(senderResultingBalance);\r\n                        const transferID = generateTransferID();\r\n                        database.ref(`/government/transfers/${transferID}`).set(\r\n                        {\r\n                            transferID: transferID,\r\n                            date: `${getDate()}, ${getYear()}`,\r\n                            time: getTime(),\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                            amount: transferAmount,\r\n                            receiverCitizenID: selectedCitizen.citizenID,\r\n                            receiverName: selectedCitizen.name,\r\n                            type: \"Outgoing\",\r\n                            reason: transferReason.length != 0 ? transferReason : 'None given',\r\n                            resultingBalance: senderResultingBalance\r\n                        }\r\n                        \r\n                    );\r\n                    database.ref(`/citizens/${selectedCitizen.citizenID}/transfers/${transferID}`).set(\r\n                        {\r\n                            transferID: transferID,\r\n                            date: `${getDate()}, ${getYear()}`,\r\n                            time: getTime(),\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                            amount: transferAmount,\r\n                            senderCitizenID: 'CI-78614',\r\n                            senderName: 'Rushington Government',\r\n                            type: \"Incoming\",\r\n                            reason: transferReason.length != 0 ? transferReason : 'None given',\r\n                            resultingBalance: receiverResultingBalance\r\n                        }\r\n                        \r\n                    );\r\n                    setValues();\r\n                    setNewGovernmentTransferPopupOpen(false);\r\n                    }\r\n                    \r\n                )\r\n            }\r\n        );\r\n        }\r\n    }\r\n\r\n    function generateTransferID(){\r\n        var transferID = 'MT-'\r\n        for(var i = 0; i < 5; i++){\r\n            transferID = transferID + String(Math.floor(Math.random()*10));\r\n        }\r\n        return(transferID);\r\n    }\r\n\r\n    function isTransferAmountValid(){\r\n        return selectedCitizen != undefined && String(transferAmount).length != 0 && !String(transferAmount).startsWith('-') \r\n                && (Number(governmentFunds) - Number(transferAmount) >= 0) && transferAmount != 0;\r\n    }\r\n\r\n    return(\r\n        <div className='w-full justify-center '>\r\n            <div className='pb-4'>\r\n            <div className='p-5 bg-blue-200 rounded shadow'>\r\n                <div className=''>\r\n                <div className='w-full pb-2'>\r\n                <p className='text-sm font-bold'>TO</p>\r\n                <div className='bg-white shadow p-1'>\r\n                    <p>{selectedCitizen.name}</p>\r\n                    <p>{selectedCitizen.citizenID}</p>\r\n                </div>\r\n                </div>\r\n                <div className='w-full pb-2'>\r\n                <p className='text-sm font-bold'>AMOUNT</p>\r\n                <div className='flex w-full justify-center'>\r\n                <input type='Number' placeholder='' min={0} max={governmentFunds} defaultValue={transferAmount} onChange={event => {setTransferAmount(Number(event.target.value))}} className='appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1'></input>\r\n                <p className='font-semibold pl-1 text-xl'>[M]</p>\r\n                </div>\r\n                </div>\r\n                </div>\r\n                <div className='pb-2'>\r\n                <p className='text-sm font-bold'>REASON</p>\r\n                <div className='flex justify-center'>\r\n                <textarea placeholder='' onChange={event => {setTransferReason(event.target.value)}} className='w-full bg-white h-20 flex justify-center resize-none focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-2'></textarea>\r\n                </div>\r\n                </div>\r\n                {isTransferAmountValid() &&\r\n                <div className='pb-2'>\r\n                    \r\n                    <p className='text-sm font-bold'>RESULTING BALANCE</p>\r\n                    \r\n                    <p className='p-1 font-semibold shadow bg-white '>{Number(governmentFunds) - Number(transferAmount)} {'[M]'}</p>\r\n                </div>}\r\n            </div>\r\n            </div>\r\n            <button className={classNames(\r\n                isTransferAmountValid()\r\n                ? 'text-black bg-yellow-300 hover:bg-yellow-400' : 'text-gray-400 bg-yellow-100',\r\n                'w-1/3 rounded py-1 px-2 font-semibold shadow')}\r\n                onClick={onClickSendTransfer}\r\n            >\r\n                <div className='flex justify-center'>\r\n                <ArrowCircleUpIcon className='h-6 w-6'/>\r\n                SEND\r\n                </div>\r\n                </button>\r\n                \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default React.memo(NewGovernmentTransferPopupBody)","import { useEffect, useState } from \"react\";\r\nimport { PlusCircleIcon, PencilIcon, ArrowCircleUpIcon, ArrowCircleDownIcon, UserAddIcon, CreditCardIcon, CheckCircleIcon } from \"@heroicons/react/outline\";\r\nimport Popup from \"../Low Level/Popup\";\r\nimport NewChargePopupBody from \"../Low Level/NewChargePopupBody\";\r\nimport AddPropertyPopupBody from \"../Low Level/AddPropertyPopupBody\";\r\nimport AddCitizenPopupBody from \"../Low Level/AddCitizenPopupBody\";\r\nimport AddBusinessPopupBody from \"../Low Level/AddBusinessPopupBody\"\r\nimport CitizenGovernmentDropboxMenu from \"../Low Level/CitizenGovernmentDropboxMenu\";\r\nimport PropertyDropboxMenu from \"../Low Level/PropertyDropboxMenu\";\r\nimport NewGovernmentTransferPopupBody from \"../Low Level/NewGovernmentTransferPopupBody\";\r\n\r\nconst Government = ({database, getTime, getDate, getYear, user, setUser}) => {\r\n    const [selectedSection, setSelectedSection] = useState('Citizens');\r\n    const [citizens, setCitizens] = useState(localStorage.getItem('citizens') ? JSON.parse(localStorage.getItem('citizens')) : []);\r\n    const [announcementText, setAnnouncementText] = useState('');\r\n    const [filteredCitizens, setFilteredCitizens] = useState(localStorage.getItem('filteredCitizens') ? JSON.parse(localStorage.getItem('filteredCitizens')) : []);\r\n    const [filteredDropboxCitizens, setFilteredDropboxCitizens] = useState(localStorage.getItem('filteredCitizens') ? JSON.parse(localStorage.getItem('filteredCitizens')) : []);\r\n    const [announcements, setAnnouncements] = useState([]);\r\n    const [searchCitizensInput, setSearchCitizensInput] = useState('');\r\n    const [searchPropertiesInput, setSearchPropertiesInput] = useState('');\r\n    const [businesses, setBusinesses] = useState([])\r\n    const [governmentFunds, setGovernmentFunds] = useState(0);\r\n    const [licenseTitle, setLicenseTitle] = useState('');\r\n    const [licensePermissions, setLicensePermissions] = useState('');\r\n    const [licensePrice, setLicensePrice] = useState(0);\r\n    const [licenses, setLicenses] = useState([]);\r\n    const [selectedDropdownProperty, setSelectedDropdownProperty] = useState();\r\n    const [filteredProperties, setFilteredProperties] = useState([]);\r\n    const [selectedCitizen, setSelectedCitizen] = useState(localStorage.getItem('selectedCitizen') ? JSON.parse(localStorage.getItem('selectedCitizen')) : undefined);\r\n    const [interestRate, setInterestRate] = useState(0);\r\n    const [taxRate, setTaxRate] = useState(0);\r\n    const [salesTaxRate, setSalesTaxRate] = useState(0);\r\n    const [selectedProperty, setSelectedProperty] = useState(localStorage.getItem('selectedProperty') ? JSON.parse(localStorage.getItem('selectedProperty')) : undefined);\r\n    const [selectedNewPropertyOwner, setSelectedNewPropertyOwner] = useState();\r\n    const [grantedMeldas, setGrantedMeldas] = useState(0);\r\n    const [governmentGrantedMeldas, setGovernmentGrantedMeldas] = useState(0);\r\n    const [governmentTransfers, setGovernmentTransfers] = useState([]);\r\n    const [newChargePopupOpen, setNewChargePopupOpen] = useState(false);\r\n    const [addChangeBusinessPopupOpen, setAddChangeBusinessPopupOpen] = useState(false);\r\n    const [selectedPropertiesSection, setSelectedPropertiesSection] = useState('All');\r\n    const [addPropertyPopupOpen, setAddPropertyPopupOpen] = useState(false);\r\n    const [newGovernmentTransferPopupBodyOpen, setNewGovernmentTransferPopupOpen] = useState(false);\r\n    const [addCitizenPopupOpen, setAddCitizenPopupOpen] = useState(false);\r\n    const [properties, setProperties] = useState([]);\r\n    const rushingtonEpoch = 1522648800;\r\n\r\n    useEffect(setValues, []);\r\n    const navigationSections = [\r\n        {sectionName: 'Citizens', sectionSelected: selectedSection == 'Citizens'},\r\n        {sectionName: 'Bank', sectionSelected: selectedSection == 'Bank'},\r\n        {sectionName: 'Properties', sectionSelected: selectedSection == 'Properties'},\r\n        {sectionName: 'Licenses', sectionSelected: selectedSection == 'Licenses'},\r\n        {sectionName: 'Announcements', sectionSelected: selectedSection == 'Announcements'}\r\n    ]\r\n\r\n    function setValues(){\r\n        database.ref('/citizens').get().then(\r\n            citizensSnapshot => {\r\n                setCitizens(Object.values(citizensSnapshot.val()).sort((citizen1, citizen2) => {\r\n                    return citizen1.name.localeCompare(citizen2.name);\r\n                }));\r\n                setFilteredDropboxCitizens(Object.values(citizensSnapshot.val()).sort((citizen1, citizen2) => {\r\n                    return citizen1.name.localeCompare(citizen2.name);\r\n                }));\r\n                setFilteredCitizens(Object.values(citizensSnapshot.val()).sort((citizen1, citizen2) => {\r\n                    return citizen1.name.localeCompare(citizen2.name);\r\n                }).filter(citizen => {\r\n                      return citizen.name.toUpperCase().includes(searchCitizensInput.toUpperCase());\r\n                    }));\r\n                setSelectedCitizen(selectedCitizen != undefined ? citizensSnapshot.val()[selectedCitizen.citizenID] : undefined);\r\n                if(selectedCitizen != undefined){\r\n                    setSelectedCitizen(citizensSnapshot.val()[selectedCitizen.citizenID]);\r\n                    localStorage.setItem('selectedCitizen', JSON.stringify(citizensSnapshot.val()[selectedCitizen.citizenID]));\r\n                    if(user.citizenID == selectedCitizen.citizenID){\r\n                        setUser(citizensSnapshot.val()[user.citizenID]);\r\n                        localStorage.setItem('user', JSON.stringify(citizensSnapshot.val()[user.citizenID]))\r\n                    }\r\n                }\r\n                localStorage.setItem('citizens', JSON.stringify(Object.values(citizensSnapshot.val()).sort((citizen1, citizen2) => {\r\n                    return citizen1.name.localeCompare(citizen2.name);\r\n                })));\r\n                localStorage.setItem('filteredCitizens', JSON.stringify(Object.values(citizensSnapshot.val()).sort((citizen1, citizen2) => {\r\n                    return citizen1.name.localeCompare(citizen2.name);\r\n                })));\r\n            }\r\n        );\r\n        database.ref('/properties').get().then(\r\n            propertiesSnapshot => {\r\n                console.log('properties', propertiesSnapshot)\r\n                if(propertiesSnapshot.val() != undefined){\r\n                    setProperties(Object.values(propertiesSnapshot.val()).sort((property1, property2) => {\r\n                        return property1.address.localeCompare(property2.address);\r\n                    }));\r\n                    setFilteredProperties(Object.values(propertiesSnapshot.val()).sort((property1, property2) => {\r\n                        return property1.address.localeCompare(property2.address);\r\n                    }));\r\n                    console.log(selectedProperty != undefined ? selectedProperty.propertyID : 'undfee')\r\n                    setSelectedProperty(selectedProperty != undefined ? propertiesSnapshot.val()[selectedProperty.propertyID] : undefined)                \r\n                }\r\n            }\r\n        );\r\n        database.ref('/announcements').get().then(\r\n            announcementsSnapshot => {\r\n                if(announcementsSnapshot.val() != undefined){setAnnouncements(Object.values(announcementsSnapshot.val()).sort(\r\n                    (announcement1, announcement2) => {\r\n                        return announcement2.ssre - announcement1.ssre;\r\n                    }\r\n                ));}\r\n            }\r\n        );\r\n        database.ref('/government').get().then(\r\n            governmentSnapshot => {\r\n                console.log('gover funds', governmentSnapshot.val().meldas)\r\n                setGovernmentFunds(Number(governmentSnapshot.val().meldas));\r\n                setSalesTaxRate(Number(governmentSnapshot.val().salesTaxRate) * 100);\r\n                setGovernmentTransfers(Object.values(governmentSnapshot.val().transfers).sort((transfer1, transfer2) => {\r\n                    return transfer2.ssre - transfer1.ssre;\r\n                }));\r\n            }\r\n        );\r\n        database.ref('/licenses').get().then(\r\n            licensesSnapshot => {\r\n                if(licensesSnapshot.val() != undefined){\r\n                    setLicenses(Object.values(licensesSnapshot.val()));\r\n                }\r\n            }\r\n        );\r\n        database.ref('/businesses').get().then(\r\n            businessesSnapshot => {\r\n                if(businessesSnapshot.val() != undefined){\r\n                    setBusinesses(Object.values(businessesSnapshot.val()));\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    function onClickGrantMeldasButton(){\r\n        database.ref(`/citizens/${selectedCitizen.citizenID}/meldas`).get().then(\r\n            meldasSnapshot => {\r\n                const resultingBalance = Number(meldasSnapshot.val()) + Number(grantedMeldas);\r\n                \r\n                database.ref(`/citizens/${selectedCitizen.citizenID}/meldas`).set(\r\n                    resultingBalance\r\n                );\r\n                var editedSelectedCitizen = JSON.stringify(selectedCitizen);\r\n                editedSelectedCitizen = JSON.parse(editedSelectedCitizen);\r\n                editedSelectedCitizen.meldas = resultingBalance;\r\n                \r\n                const transferID = generateID('MT');\r\n                const newTransfer = grantedMeldas >= 0 ? {\r\n                    transferID: transferID,\r\n                    date: `${getDate()}, ${getYear()}`,\r\n                    time: getTime(),\r\n                    ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                    amount: grantedMeldas,\r\n                    senderCitizenID: 'CI-78614',\r\n                    senderName: 'Rushington Bank',\r\n                    type: \"Incoming\",\r\n                    reason: 'Deposit',\r\n                    resultingBalance: resultingBalance\r\n                } :\r\n                {\r\n                    transferID: transferID,\r\n                    date: `${getDate()}, ${getYear()}`,\r\n                    time: getTime(),\r\n                    ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                    amount: Math.abs(grantedMeldas),\r\n                    receiverName: 'Real Currency',\r\n                    receiverCitizenID: selectedCitizen.citizenID,\r\n                    type: \"Outgoing\",\r\n                    reason: 'Withdrawal',\r\n                    resultingBalance: resultingBalance\r\n                }\r\n                database.ref(`/citizens/${selectedCitizen.citizenID}/transfers/${transferID}`).set(newTransfer);\r\n                editedSelectedCitizen.transfers = editedSelectedCitizen.transfers != undefined ? [...Object.values(editedSelectedCitizen.transfers), newTransfer] :\r\n                    [newTransfer];\r\n                console.log(\"Transfers\", Object.values(editedSelectedCitizen.transfers));\r\n                setValues();\r\n                if(editedSelectedCitizen.citizenID == user.citizenID){\r\n                    setUser(editedSelectedCitizen);\r\n                    localStorage.setItem('user', JSON.stringify(editedSelectedCitizen));\r\n                }\r\n                setSelectedCitizen(editedSelectedCitizen);\r\n            }\r\n        )\r\n    }\r\n\r\n    function onClickGrantGovernmentMeldas(){\r\n        database.ref('/government/meldas').set(Number(governmentFunds) + Number(governmentGrantedMeldas));\r\n        const transferID = generateID('MT');\r\n        const newTransfer = governmentGrantedMeldas >= 0 ? {\r\n            transferID: transferID,\r\n            date: `${getDate()}, ${getYear()}`,\r\n            time: getTime(),\r\n            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n            amount: Number(governmentGrantedMeldas),\r\n            senderCitizenID: 'CI-78614',\r\n            senderName: 'Rushington Bank',\r\n            type: \"Incoming\",\r\n            reason: 'Deposit',\r\n            resultingBalance: Number(governmentFunds) + Number(governmentGrantedMeldas)\r\n        } :\r\n        {\r\n            transferID: transferID,\r\n            date: `${getDate()}, ${getYear()}`,\r\n            time: getTime(),\r\n            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n            amount: Math.abs(governmentGrantedMeldas),\r\n            receiverName: 'Real Currency',\r\n            type: \"Outgoing\",\r\n            reason: 'Withdrawal',\r\n            resultingBalance: Number(governmentFunds) + Number(governmentGrantedMeldas)\r\n        }\r\n        database.ref(`/government/transfers/${transferID}`).set(newTransfer);\r\n        setGovernmentGrantedMeldas(0);\r\n        setValues();\r\n    }\r\n\r\n    function onClickGrantProperty(){\r\n        console.log(selectedDropdownProperty)\r\n        if(selectedDropdownProperty.owner != undefined){\r\n            console.log(selectedDropdownProperty.propertyID)\r\n            database.ref(`/citizens/${selectedDropdownProperty.owner.citizenID}/properties/${selectedDropdownProperty.propertyID}`).set(null);\r\n\r\n        };\r\n        var editedSelectedProperty = JSON.stringify(selectedDropdownProperty);\r\n        editedSelectedProperty = JSON.parse(editedSelectedProperty);\r\n        editedSelectedProperty.owner = {\r\n                name: selectedCitizen.name,\r\n                citizenID: selectedCitizen.citizenID,\r\n                dateAdded: `${getDate()}, ${getYear()}`\r\n        }\r\n        console.log('edited sp', editedSelectedProperty)\r\n        database.ref(`/properties/${selectedDropdownProperty.propertyID}/owner`).set(\r\n            {\r\n                name: selectedCitizen.name,\r\n                citizenID: selectedCitizen.citizenID,\r\n                dateAdded: `${getDate()}, ${getYear()}`\r\n            }\r\n        );\r\n        \r\n        database.ref(`/citizens/${selectedCitizen.citizenID}/properties/${selectedDropdownProperty.propertyID}`).set(\r\n            editedSelectedProperty\r\n        );\r\n        setValues();\r\n        /* setSelectedDropdownProperty(editedSelectedProperty);\r\n        var editedSelectedCitizen = JSON.parse(JSON.stringify(selectedCitizen));\r\n        const editedPropertyID = selectedDropdownProperty.propertyID;\r\n        if(editedSelectedCitizen.properties == undefined){\r\n            //console.log(JSON.stringify(properties))\r\n            //console.log(`{\"${editedPropertyID}\": ${JSON.stringify(editedSelectedProperty)}}`);\r\n            editedSelectedCitizen.properties = JSON.parse(`{\"${editedPropertyID}\": ${JSON.stringify(editedSelectedProperty)}}`);\r\n        } else {\r\n            console.log('edited prop id', editedSelectedCitizen.properties)\r\n            editedSelectedCitizen.properties[editedPropertyID] = editedSelectedProperty;\r\n        }\r\n        setSelectedCitizen(editedSelectedCitizen);\r\n        if(selectedProperty != undefined && selectedProperty.propertyID == selectedDropdownProperty.propertyID){\r\n            setSelectedProperty(editedSelectedProperty);\r\n            \r\n        } */\r\n    }\r\n\r\n    function onClickPostAnnouncement(){\r\n        const announcementID = generateID('GA');\r\n        database.ref(`/announcements/${announcementID}`).set(\r\n            {\r\n                announcementID: announcementID,\r\n                text: announcementText,\r\n                datePosted: `${getDate()}, ${getYear()}`,\r\n                timePosted: getTime(),\r\n                ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch)\r\n            }\r\n        );\r\n        setValues();\r\n    }\r\n\r\n    function onClickPayAsGovernmentButton(){\r\n        setNewGovernmentTransferPopupOpen(true);\r\n    }\r\n\r\n    function onClickAddLicense(){\r\n        const licenseID = generateID('LI');\r\n        database.ref(`/licenses/${licenseID}`).set(\r\n            {\r\n                licenseID: licenseID,\r\n                title: licenseTitle,\r\n                permissions: licensePermissions,\r\n                price: Number(licensePrice),\r\n                dateAdded: `${getDate()}, ${getYear()}`\r\n            }\r\n        );\r\n        setValues();\r\n    }\r\n\r\n    function onClickGrantInterest(){\r\n        const editedCitizens = [...citizens];\r\n        const newCitizensObject = {};\r\n        var totalMeldasGranted = 0;\r\n        editedCitizens.forEach(citizen => {\r\n            const meldasGranted = Math.round(Number(citizen.meldas) * (0.01 * interestRate));\r\n            if(meldasGranted != 0){\r\n            citizen.meldas = Number(citizen.meldas) + Number(meldasGranted);\r\n            totalMeldasGranted = totalMeldasGranted + meldasGranted;\r\n            const transferID = generateID('MT');\r\n            if(citizen.transfers == undefined)citizen.transfers = {}\r\n            citizen.transfers[transferID] = {\r\n                transferID: transferID,\r\n                date: `${getDate()}, ${getYear()}`,\r\n                time: getTime(),\r\n                ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                amount: meldasGranted,\r\n                senderCitizenID: 'CI-78614',\r\n                senderName: 'Rushington Bank',\r\n                type: \"Incoming\",\r\n                reason: `Accrued ${interestRate}% Interest`,\r\n                resultingBalance: citizen.meldas\r\n            }}\r\n            newCitizensObject[citizen.citizenID] = citizen;\r\n        });\r\n        const transferID = generateID('MT');\r\n        database.ref(`/government/transfers/${transferID}`).set(\r\n            {\r\n                transferID: transferID,\r\n                date: `${getDate()}, ${getYear()}`,\r\n                time: getTime(),\r\n                ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                amount: totalMeldasGranted,\r\n                receiverName: 'All Citizens',\r\n                type: \"Outgoing\",\r\n                reason: `Accrued ${interestRate}% Interest`,\r\n                resultingBalance: governmentFunds - Number(totalMeldasGranted)\r\n            }\r\n        )\r\n        //console.log('edited citizens', editedCitizens);\r\n        database.ref('/citizens').set(newCitizensObject);\r\n        database.ref('/government/meldas').set(governmentFunds - Number(totalMeldasGranted));\r\n        setInterestRate(0);\r\n        setValues();\r\n    }\r\n\r\n    \r\n    function onClickPullTaxes(){\r\n        const editedCitizens = [...citizens];\r\n        const newCitizensObject = {};\r\n        var totalTaxRevenue = 0;\r\n        editedCitizens.forEach(citizen => {\r\n            const tax = Math.round(Number(citizen.meldas) * (0.01 * taxRate));\r\n            if(tax != 0){\r\n            citizen.meldas = Number(citizen.meldas) - Number(tax);\r\n            totalTaxRevenue = totalTaxRevenue + tax;\r\n            const transferID = generateID('MT');\r\n            if(citizen.transfers == undefined)citizen.transfers = {}\r\n            citizen.transfers[transferID] = {\r\n                transferID: transferID,\r\n                date: `${getDate()}, ${getYear()}`,\r\n                time: getTime(),\r\n                ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                amount: tax,\r\n                receiverCitizenID: 'CI-78614',\r\n                receiverName: 'Rushington Government',\r\n                type: \"Outgoing\",\r\n                reason: `${taxRate}% Tax`,\r\n                resultingBalance: citizen.meldas\r\n            }}\r\n            newCitizensObject[citizen.citizenID] = citizen;\r\n        });\r\n        const transferID = generateID('MT');\r\n        database.ref(`/government/transfers/${transferID}`).set(\r\n            {\r\n                transferID: transferID,\r\n                date: `${getDate()}, ${getYear()}`,\r\n                time: getTime(),\r\n                ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                amount: totalTaxRevenue,\r\n                senderName: 'All Citizens',\r\n                type: \"Incoming\",\r\n                reason: `${taxRate}% Tax`,\r\n                resultingBalance: governmentFunds - Number(totalTaxRevenue)\r\n            }\r\n        )\r\n        //console.log('edited citizens', editedCitizens);\r\n        database.ref('/citizens').set(newCitizensObject);\r\n        database.ref('/government/meldas').set(governmentFunds + Number(totalTaxRevenue));\r\n        setTaxRate(0);\r\n        setValues();\r\n    }\r\n\r\n    function getTotalMeldasInBank(){\r\n        var totalMeldasInBank = 0;\r\n        citizens.forEach(citizen => {\r\n            totalMeldasInBank = totalMeldasInBank + Number(citizen.meldas);\r\n        });\r\n        businesses.forEach(business => {\r\n            totalMeldasInBank = totalMeldasInBank + Number(business.meldas);\r\n        });\r\n        return totalMeldasInBank + governmentFunds;\r\n    }\r\n\r\n    function getResultingInterestPayout(){\r\n        const editedCitizens = [...citizens];\r\n        var totalMeldasGranted = 0;\r\n        editedCitizens.forEach(citizen => {\r\n            const meldasGranted = Math.round(Number(citizen.meldas) * (0.01 * interestRate));\r\n            totalMeldasGranted = totalMeldasGranted + meldasGranted;\r\n        });\r\n        return totalMeldasGranted;\r\n    }\r\n\r\n    function getResultingTaxRevenue(){\r\n        const editedCitizens = [...citizens];\r\n        var totalTaxRevenue = 0;\r\n        editedCitizens.forEach(citizen => {\r\n            const tax = Math.round(Number(citizen.meldas) * (0.01 * taxRate));\r\n            totalTaxRevenue = totalTaxRevenue + tax;\r\n        });\r\n        return totalTaxRevenue;\r\n    }\r\n    function onClickAddChargeButton(){\r\n        /* database.ref(`/Users/${selectedCitizen[\"Citizen ID\"]}/Charges`).get().then(\r\n            chargesSnapshot => {\r\n                var editedSelectedCitizen = JSON.stringify(selectedCitizen);\r\n                editedSelectedCitizen = JSON.parse(editedSelectedCitizen);\r\n                const chargeID = generateID('CC');\r\n                const newCharge = {\r\n                    \"Transfer ID\": transferID,\r\n                    \"Date\": `${getDate()}, ${getYear()}`,\r\n                    \"Time\": getTime(),\r\n                    \"SSRE\": Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                    \"Amount\": grantedMeldas,\r\n                    \"Sender Citizen ID\": 'CI-78614',\r\n                    \"Sender Name\": 'Rushington Bank',\r\n                    \"Type\": \"Incoming\",\r\n                    \"Reason\": 'Deposit',\r\n                    \"Resulting Balance\": resultingBalance\r\n                }\r\n                database.ref(`/Users/${selectedCitizen[\"Citizen ID\"]}/Transfers/${transferID}`).set(newTransfer);\r\n                editedSelectedCitizen.Transfers = editedSelectedCitizen.Transfers != undefined ? [...Object.values(editedSelectedCitizen.Transfers), newTransfer] :\r\n                    [newTransfer];\r\n                console.log(\"Transfers\", Object.values(editedSelectedCitizen.Transfers));\r\n                setSelectedCitizen(editedSelectedCitizen);\r\n            }\r\n        ) */\r\n    }\r\n\r\n    function onClickAddChangeOwnerButton(){\r\n        if(selectedProperty.owner != undefined){\r\n            database.ref(`/citizens/${selectedProperty.owner.citizenID}/properties/${selectedProperty.propertyID}`).set(null);\r\n        }\r\n        var editedSelectedProperty = JSON.stringify(selectedProperty);\r\n        editedSelectedProperty = JSON.parse(editedSelectedProperty);\r\n        editedSelectedProperty.owner = {\r\n                name: selectedNewPropertyOwner.name,\r\n                citizenID: selectedNewPropertyOwner.citizenID,\r\n                dateAdded: `${getDate()}, ${getYear()}`\r\n        }\r\n        console.log('edited sp', editedSelectedProperty)\r\n        database.ref(`/properties/${selectedProperty.propertyID}/owner`).set(\r\n            {\r\n                name: selectedNewPropertyOwner.name,\r\n                citizenID: selectedNewPropertyOwner.citizenID,\r\n                dateAdded: `${getDate()}, ${getYear()}`\r\n            }\r\n        );\r\n        database.ref(`/citizens/${selectedNewPropertyOwner.citizenID}/properties/${selectedProperty.propertyID}`).set(\r\n            editedSelectedProperty\r\n        );\r\n        //setSelectedProperty(editedSelectedProperty);\r\n        setValues();\r\n        /* if(selectedCitizen != undefined && selectedNewPropertyOwner.citizenID == selectedCitizen.citizenID){\r\n            var editedSelectedCitizen = JSON.parse(JSON.stringify(selectedCitizen));\r\n        const editedPropertyID = selectedProperty.propertyID;\r\n        if(editedSelectedCitizen.properties == undefined){\r\n            //console.log(JSON.stringify(properties))\r\n            //console.log(`{\"${editedPropertyID}\": ${JSON.stringify(editedSelectedProperty)}}`);\r\n            editedSelectedCitizen.properties = JSON.parse(`{\"${editedPropertyID}\": ${JSON.stringify(editedSelectedProperty)}}`);\r\n        } else {\r\n            console.log('edited prop id', editedSelectedCitizen.properties)\r\n            editedSelectedCitizen.properties[editedPropertyID] = editedSelectedProperty;\r\n        }\r\n        setSelectedCitizen(editedSelectedCitizen);\r\n        } */\r\n    }\r\n    function generateID(prefix){\r\n        var id = `${prefix}-`;\r\n        for(var i = 0; i < 5; i++){\r\n            id = id + String(Math.floor(Math.random()*10));\r\n        }\r\n        return(id);\r\n    }\r\n\r\n    function findPropertyByID(id){\r\n        for(var i = 0; i < properties.length; i++){\r\n            if(properties[i].propertyID == id){\r\n                return properties[i];\r\n            }\r\n        }\r\n    }\r\n\r\n    function findCitizenByID(id){\r\n        for(var i = 0; i < citizens.length; i++){\r\n            if(citizens[i].citizenID == id){\r\n                return citizens[i];\r\n            }\r\n        }\r\n    }\r\n    \r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n      }\r\n    return(\r\n        <div>\r\n            <div className='lg:grid lg:grid-cols-6 lg:gap-5'>\r\n                <div className='lg:col-span-1 pb-4 lg:pb-0'>\r\n                    <div>\r\n                    {navigationSections.map(navigationSection => {\r\n                        return(\r\n                        <div>\r\n                            \r\n                        <button\r\n                            onClick={()=>{setSelectedSection(navigationSection.sectionName)}}\r\n                            className={classNames(navigationSection.sectionSelected ? 'bg-gray-200' : 'bg-white hover:bg-gray-100',\r\n                                'rounded p-2 w-full text-center lg:text-left'\r\n                            )}\r\n                        >\r\n                            <p className='text-gray-800 font-semibold'>{navigationSection.sectionName}</p></button>\r\n                        </div>\r\n                        )\r\n                    })}\r\n                    </div>\r\n                </div>\r\n                <div className='lg:col-span-5 bg-gray-100 rounded'>\r\n                    {selectedSection == 'Citizens' &&\r\n                        <div className='lg:grid lg:grid-cols-3'>\r\n                            <div className='col-span-2 p-2'>\r\n                                {selectedCitizen == undefined &&\r\n                                    <p className='text-gray-500 p-5 font-semibold text-center lg:text-left'>NO CITIZEN SELECTED</p>\r\n                                }\r\n                                {selectedCitizen != undefined &&\r\n                                    <div className='bg-white rounded'>\r\n                                        <div className='p-2'>\r\n                                            \r\n                                            <div className='grid grid-cols-3 border-2 border-gray-400'>\r\n                                            <div className='col-span-1 p-2'>\r\n                                                <p className='font-semibold'>Name</p>\r\n                                                <p>{selectedCitizen.name}</p>\r\n                                            </div>\r\n                                            <div className='col-span-1 p-2'>\r\n                                                <p className='font-semibold'>Citizen ID</p>\r\n                                                <p>{selectedCitizen.citizenID}</p>\r\n                                            </div>\r\n                                            <div className='col-span-1 p-2'>\r\n                                                <p className='font-semibold'>Date Added</p>\r\n                                                <p>{selectedCitizen.dateAdded}</p>\r\n                                            </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className='p-2'>\r\n                                            <div className='grid grid-cols-2'>\r\n                                            <div className='col-span-2 p-2'>\r\n                                                \r\n                                                <div className='bg-white'>\r\n                                                    \r\n                                                    <div className='w-full flow-root p-2 bg-gray-200'>\r\n                                                    <p className='font-semibold float-left'>BANK</p>\r\n                                                    <div className='float-right flex gap-1'>\r\n                                                        \r\n                                                        <input type='Number' onChange={event => {setGrantedMeldas(event.target.value)}} className='px-2 border-2 border-gray-700 w-20 focus:outline-none'></input>\r\n                                                        \r\n                                                        \r\n                                                        <button \r\n                                                            onClick={onClickGrantMeldasButton}\r\n                                                            className='bg-yellow-300 py-1 px-2 mr-2 flex text-sm hover:bg-yellow-400 font-semibold rounded shadow'>\r\n                                                            <PlusCircleIcon className='w-5 h-5'/>{grantedMeldas < 0 ? 'WITHDRAW' : 'DEPOSIT'}</button>\r\n                                                            <button \r\n                                                            onClick={onClickPayAsGovernmentButton}\r\n                                                            className='bg-yellow-300 py-1 px-2 flex text-sm hover:bg-yellow-400 font-semibold rounded shadow'>\r\n                                                            <PlusCircleIcon className='w-5 h-5'/>\r\n                                                                <Popup\r\n                                                                    header='New Government Transfer'\r\n                                                                    open={newGovernmentTransferPopupBodyOpen}\r\n                                                                    setOpen={setNewGovernmentTransferPopupOpen}\r\n                                                                    inputs={[]}\r\n                                                                    additionalComponent={()=>{return <NewGovernmentTransferPopupBody\r\n                                                                        database={database} getTime={getTime} getDate={getDate} getYear={getYear} setNewGovernmentTransferPopupOpen={setNewGovernmentTransferPopupOpen} setValues={setValues} selectedCitizen={selectedCitizen} governmentFunds={governmentFunds}\r\n                                                                    />}}\r\n                                                                />\r\n                                                            NEW TRANSFER</button>\r\n                                                    </div>\r\n                                                    </div>\r\n                                                    <div className='flow-root p-2 border-2 border-gray-400'>\r\n                                                        <p className='float-left font-semibold text-gray-700'>Balance</p>\r\n                                                        <p className='float-right'>{selectedCitizen.meldas} [M]</p>\r\n                                                    </div>\r\n                                                    <div className='p-2 border-b-2 border-r-2 border-l-2 border-gray-400'>\r\n                                                        <p className='font-semibold text-gray-700'>Transfers</p>\r\n                                                        {selectedCitizen.transfers != undefined &&\r\n                                                        <div className='max-h-96 overflow-y-scroll bg-gray-100'>\r\n                                                            \r\n                                                            \r\n                                                            \r\n                                                        {Object.values(selectedCitizen.transfers).sort((transfer1, transfer2)=>{\r\n                                                            return(transfer2.ssre - transfer1.ssre);\r\n                                                        }).map(transfer => {\r\n                                                            return(\r\n                                                                <div className='p-1'>\r\n                                                                <Transfer transfer={transfer}/>\r\n                                                                </div>\r\n                                                            )\r\n                                                        })}\r\n                                                        \r\n                                                        \r\n                                                        </div>}\r\n                                                        {selectedCitizen.transfers == undefined &&\r\n                                                        <div className=''>None yet</div>\r\n                                                        }\r\n                                                    </div>\r\n                                                </div>\r\n                                                \r\n                                            </div>\r\n                                            <div className='col-span-2 p-2'>\r\n                                                \r\n                                                <div className='bg-white'>\r\n                                                <div className='p-2 flow-root w-full bg-gray-200'>\r\n                                                <p className='font-semibold float-left'>CRIMINAL CHARGES</p>\r\n                                                        <button \r\n                                                            onClick={()=>{setNewChargePopupOpen(true)}}\r\n                                                            className='bg-yellow-300 float-right flex py-1 px-2 hover:bg-yellow-400 text-sm font-semibold rounded shadow'>\r\n                                                            <PlusCircleIcon className='w-5 h-5'/>ADD CHARGE</button>\r\n                                                            <Popup\r\n                                                                open={newChargePopupOpen}\r\n                                                                setOpen={setNewChargePopupOpen}\r\n                                                                header='New Charge'\r\n                                                                onClickSave={()=>{}}\r\n                                                                inputs={[]}\r\n                                                                saveText={'Add'}\r\n                                                                additionalComponent={()=>{return <NewChargePopupBody database={database} getTime={getTime} getDate={getDate} getYear={getYear} setNewChargePopupOpen={setNewChargePopupOpen} selectedCitizen={selectedCitizen} setSelectedCitizen={setSelectedCitizen} setValues={setValues}/>}}\r\n                                                            />\r\n                                                    </div>\r\n                                                    <div className='flow-root p-2 border-2 border-gray-400'>\r\n                                                        <p className='float-left font-semibold text-gray-700'>Total</p>\r\n                                                        <p className='float-right'>{selectedCitizen.charges ? Object.values(selectedCitizen.charges).length : 0}</p>\r\n                                                    </div>\r\n                                                    <div className='p-2 border-b-2 border-r-2 border-l-2 border-gray-400'>\r\n                                                        {selectedCitizen.charges != undefined &&\r\n                                                        <div className='max-h-96 overflow-y-scroll bg-gray-100'>\r\n                                                            \r\n                                                            \r\n                                                            \r\n                                                        {Object.values(selectedCitizen.charges).sort((charge1, charge2)=>{\r\n                                                            return(charge2.ssre - charge1.ssre);\r\n                                                        }).map(charge => {\r\n                                                            return(\r\n                                                                <div className='p-1'>\r\n                                                                <CriminalCharge charge={charge}/>\r\n                                                                </div>\r\n                                                            )\r\n                                                        })}\r\n                                                        \r\n                                                        \r\n                                                        </div>}\r\n                                                        {selectedCitizen.charges == undefined &&\r\n                                                        <div className=''>None yet</div>\r\n                                                        }\r\n                                                    </div>\r\n                                                </div>\r\n                                                \r\n                                            \r\n                                            </div>\r\n                                            <div className='col-span-2 p-2'>\r\n                                                \r\n                                                <div className='bg-white'>\r\n                                                <div className='p-2 flow-root w-full bg-gray-200'>\r\n                                                <p className='font-semibold float-left'>PROPERTIES</p>\r\n                                                        <div className='flex gap-2 float-right'>\r\n                                                            <PropertyDropboxMenu\r\n                                                                properties={properties}\r\n                                                                user={user}\r\n                                                                selectedProperty={selectedDropdownProperty}\r\n                                                                setSelectedProperty={setSelectedDropdownProperty}\r\n                                                                filteredProperties={filteredProperties}\r\n                                                                setFilteredProperties={setFilteredProperties}\r\n                                                            />\r\n                                                        <button \r\n                                                            onClick={onClickGrantProperty}\r\n                                                            className='bg-yellow-300 flex py-1 px-2 hover:bg-yellow-400 text-sm font-semibold rounded shadow'>\r\n                                                            <PlusCircleIcon className='w-5 h-5'/>GRANT PROPERTY</button>\r\n\r\n                                                        </div>\r\n                                                        \r\n                                                            {/* <Popup\r\n                                                                open={newChargePopupOpen}\r\n                                                                setOpen={setNewChargePopupOpen}\r\n                                                                header='New Charge'\r\n                                                                onClickSave={()=>{}}\r\n                                                                inputs={[]}\r\n                                                                saveText={'Add'}\r\n                                                                additionalComponent={()=>{return <NewChargePopupBody database={database} getTime={getTime} getDate={getDate} getYear={getYear} setNewChargePopupOpen={setNewChargePopupOpen} selectedCitizen={selectedCitizen} setSelectedCitizen={setSelectedCitizen}/>}}\r\n                                                            /> */}\r\n                                                    </div>\r\n                                                    <div className='flow-root p-2 border-2 border-gray-400'>\r\n                                                        <p className='float-left font-semibold text-gray-700'>Total</p>\r\n                                                        <p className='float-right'>{selectedCitizen.properties ? Object.values(selectedCitizen.properties).length : 0}</p>\r\n                                                    </div>\r\n                                                    <div className='p-2 border-b-2 border-r-2 border-l-2 border-gray-400'>\r\n                                                        {selectedCitizen.properties != undefined &&\r\n                                                        <div className='max-h-96 overflow-y-scroll bg-gray-100'>\r\n                                                            \r\n                                                            \r\n                                                            <div className='py-1'>\r\n                                                        {Object.values(selectedCitizen.properties).sort((property1, property2)=>{\r\n                                                            return(property2.ssre - property1.ssre);\r\n                                                        }).map(property => {\r\n                                                            return(\r\n                                                                <button className='w-full text-left group'\r\n                                                                    onClick={()=>{\r\n                                                                        setSelectedProperty(findPropertyByID(property.propertyID));\r\n                                                                        setSelectedSection('Properties');\r\n                                                                    }}\r\n                                                                >\r\n                                                                    <div className='px-1'>\r\n                                                                <Property property={property}/>\r\n                                                                </div>\r\n                                                                </button>\r\n                                                            )\r\n                                                        })}\r\n                                                        </div>\r\n                                                        </div>}\r\n                                                        \r\n                                                        {selectedCitizen.properties == undefined &&\r\n                                                        <div className=''>None yet</div>\r\n                                                        }\r\n                                                    </div>\r\n                                                </div>\r\n                                                \r\n                                            </div>\r\n                                            <div className='col-span-2 p-2'>\r\n                                                \r\n                                                <div className='bg-white'>\r\n                                                <div className='w-full flow-root p-2 bg-gray-200'>\r\n                                                    <p className='font-semibold float-left'>LICENSES</p>\r\n                                                    \r\n                                                    </div>\r\n                                                    <div className='flow-root p-2 border-2 border-gray-400'>\r\n                                                        <p className='float-left font-semibold text-gray-700'>Total</p>\r\n                                                        <p className='float-right'>{selectedCitizen.licenses ? Object.values(selectedCitizen.licenses).length : 0}</p>\r\n                                                    </div>\r\n                                                    <div className='p-2 border-b-2 border-r-2 border-l-2 border-gray-400'>\r\n                                                        {selectedCitizen.licenses != undefined &&\r\n                                                        <div className='max-h-96 overflow-y-scroll bg-gray-100'>\r\n                                                            \r\n                                                            \r\n                                                            \r\n                                                        {Object.values(selectedCitizen.licenses).sort((license1, license2)=>{\r\n                                                            return(license1.title.localeCompare(license2.title));\r\n                                                        }).map(license => {\r\n                                                            return(\r\n                                                                <div className='text-left group m-2'\r\n                                                                    onClick={()=>{\r\n                                                                        /* setSelectedProperty(findPropertyByID(property.propertyID));\r\n                                                                        setSelectedSection('Properties'); */\r\n                                                                    }}\r\n                                                                >\r\n                                                                <LicenseUser license={license}/>\r\n                                                                </div>\r\n                                                            )\r\n                                                        })}\r\n                                                        \r\n                                                        \r\n                                                        </div>}\r\n                                                        {selectedCitizen.licenses == undefined &&\r\n                                                        <div className=''>None yet</div>\r\n                                                        }\r\n                                                    </div>\r\n                                                </div>\r\n                                                \r\n                                            </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        \r\n\r\n                                    </div>\r\n                                }\r\n                            </div>\r\n                            <div className='col-span-1 p-2'>\r\n                                <div className='bg-white rounded'>\r\n                                    <div className='p-2'>\r\n                                        <button className='w-full bg-yellow-300 hover:bg-yellow-400 font-semibold text-sm py-2 justify-center text-center rounded shadow flex'\r\n                                            onClick={()=>{setAddCitizenPopupOpen(true)}}>\r\n                                            <PlusCircleIcon className='w-5 h-5'/>ADD CITIZEN</button>\r\n                                            <Popup\r\n                                                open={addCitizenPopupOpen}\r\n                                                setOpen={setAddCitizenPopupOpen}\r\n                                                header='New Citizen'\r\n                                                onClickSave={()=>{}}\r\n                                                inputs={[]}\r\n                                                saveText={'Add'}\r\n                                                additionalComponent={()=>{return <AddCitizenPopupBody database={database} getTime={getTime} getDate={getDate} getYear={getYear} citizens={citizens} setCitizens={setCitizens} setAddCitizenPopupOpen={setAddCitizenPopupOpen}/>}}\r\n                                            />\r\n                                    </div>\r\n                                    <div className='p-2'>\r\n                                    <input placeholder='Search' value={searchCitizensInput} className='w-full border-2 border-gray-500 p-2 bg-gray-100 focus:ring-1 focus:ring-gray-700 focus:border-gray-700 focus:outline-none'\r\n                                        onChange={event => {\r\n                                            setSearchCitizensInput(event.target.value);\r\n                                            setFilteredCitizens(citizens.filter(citizen => {\r\n                                              console.log(filteredCitizens)\r\n                                              return citizen.name.toUpperCase().includes(event.target.value.toUpperCase());\r\n                                            }))\r\n                                          }}\r\n                                    ></input>\r\n                                    </div>\r\n                                    <div className=''>\r\n                                {filteredCitizens.map(citizen => {\r\n                                    return(\r\n                                        <div className='p-2'>\r\n                                            <button \r\n                                                onClick={()=>{setSelectedCitizen(citizen);\r\n                                                    localStorage.setItem('selectedCitizen', JSON.stringify(citizen));\r\n                                                }}\r\n                                                className={classNames(selectedCitizen != undefined && selectedCitizen.citizenID == citizen.citizenID ? 'border-2 border-blue-400 shadow-lg bg-yellow-400' : ' bg-yellow-300', 'w-full shadow rounded hover:bg-yellow-400 p-2 text-sm font-semibold')}>\r\n                                                    <div>{citizen.name.toUpperCase()}</div>\r\n                                                    <div className='text-gray-700'>{citizen.citizenID.toUpperCase()}</div>\r\n                                                    </button>\r\n                                        </div>\r\n                                    )\r\n                                })}\r\n                                </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    {selectedSection == 'Bank' &&\r\n                        <div className='p-4'>\r\n                            <div className='p-3 grid grid-cols-2 bg-white rounded shadow'>\r\n                                <div>\r\n                                    <p className='text-2xl font-bold'>Bank Vault</p>\r\n                                    <p className='text-3xl'>{getTotalMeldasInBank()} [M]</p>\r\n                                </div>\r\n                                <div>\r\n                                    <div className='flex gap-2'>\r\n                                    <p className='text-2xl font-bold'>Government Funds</p>\r\n                                    <div className='float-right flex gap-1'>\r\n                                                        <input type='Number' value={governmentGrantedMeldas} onChange={event => {setGovernmentGrantedMeldas(event.target.value)}} className='px-2 border-2 border-gray-700 w-20 focus:outline-none'></input>\r\n                                                        <button \r\n                                                            onClick={onClickGrantGovernmentMeldas}\r\n                                                            className='bg-yellow-300 py-1 px-2 mr-2 flex hover:bg-yellow-400 font-semibold rounded shadow'>\r\n                                                            <PlusCircleIcon className='w-6 h-6'/>{governmentGrantedMeldas < 0 ? 'WITHDRAW' : 'DEPOSIT'}</button>\r\n                                                    </div>\r\n                                    </div>\r\n                                    <p className='text-3xl'>{governmentFunds} [M]</p>\r\n                                    \r\n                                </div>\r\n                                <div className='col-span-2 pt-4'>\r\n                                    <p className='text-2xl font-bold'>Transfers</p>\r\n                                    <div className='bg-gray-200 border-2 border-gray-500 p-2 max-h-56 min-h-12 overflow-y-scroll'>\r\n                                        {governmentTransfers.map(transfer => {\r\n                                            return(\r\n                                                <div className='p-1'>\r\n                                                    <Transfer transfer={transfer}/>\r\n                                                </div>\r\n                                            )\r\n                                        })}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className='p-3 my-4 bg-white shadow rounded'>\r\n                            <p className='text-2xl font-bold'>Sales Tax</p>\r\n                            <div className=''>\r\n                                <div className='flex justify-center'>\r\n                            <div className='gap-1'>\r\n                                <p className='text-xl font-semibold'>Rate</p>\r\n                                <div className='flex gap-1'>\r\n                            <input\r\n                                className='p-1 bg-white border-2 border-gray-500 focus:outline-none'\r\n                                type='Number'\r\n                                value={salesTaxRate}\r\n                                onChange={event => {setSalesTaxRate(Number(event.target.value))}}\r\n                            ></input>\r\n                            <p className='text-xl font-semibold'>%</p>\r\n                            </div>\r\n                            </div>\r\n                            </div>\r\n                            <button \r\n                                className='mt-4 p-2 col-span-3 rounded shadow flex w-full justify-center font-semibold bg-yellow-300 hover:bg-yellow-400 text-lg'\r\n                                onClick={() => {\r\n                                    database.ref('/government/salesTaxRate').set(0.01 * salesTaxRate);\r\n                                }}\r\n                                >\r\n                                    <CheckCircleIcon className='h-7 w-7'/>\r\n                                    UPDATE SALES TAX RATE</button>\r\n                            </div>\r\n                            </div>\r\n                            <div className='p-3 my-4 bg-white shadow rounded'>\r\n                            <p className='text-2xl font-bold'>Interest</p>\r\n                            <div className='grid grid-cols-3'>\r\n                            <div className='gap-1'>\r\n                                <p className='text-xl font-semibold'>Rate</p>\r\n                                <div className='flex gap-1'>\r\n                            <input\r\n                                className='p-1 bg-white border-2 border-gray-500 focus:outline-none'\r\n                                type='Number'\r\n                                value={interestRate}\r\n                                onChange={event => {setInterestRate(Number(event.target.value))}}\r\n                            ></input>\r\n                            <p className='text-xl font-semibold'>%</p>\r\n                            </div>\r\n                            </div>\r\n                            <div>\r\n                            <p className='text-xl font-semibold'>Resulting Payout</p>\r\n                            <p className={classNames(getResultingInterestPayout() > 0 ? 'text-red-700' : '', 'text-xl')}>{getResultingInterestPayout()} [M]</p>\r\n                            </div>\r\n                            <div>\r\n                            <p className='text-xl font-semibold'>Resulting Government Funds</p>\r\n                            <p className={classNames(getResultingInterestPayout() > 0 ? 'text-red-700' : '','text-xl')}>{governmentFunds - getResultingInterestPayout()} [M]</p>\r\n                            </div>\r\n                            <button \r\n                                className='mt-4 p-2 col-span-3 rounded shadow flex w-full justify-center font-semibold bg-yellow-300 hover:bg-yellow-400 text-lg'\r\n                                onClick={onClickGrantInterest}\r\n                                >\r\n                                    <ArrowCircleUpIcon className='h-7 w-7'/>\r\n                                    GRANT INTEREST</button>\r\n                            </div>\r\n                            </div>\r\n                            <div className='p-3 bg-white shadow rounded'>\r\n                            <p className='text-2xl font-bold'>Taxes</p>\r\n                            <div className='grid grid-cols-3'>\r\n                            <div className='gap-1'>\r\n                                <p className='text-xl font-semibold'>Rate</p>\r\n                                <div className='flex gap-1'>\r\n                            <input\r\n                                className='p-1 bg-white border-2 border-gray-500 focus:outline-none'\r\n                                type='Number'\r\n                                value={taxRate}\r\n                                onChange={event => {setTaxRate(Number(event.target.value))}}\r\n                            ></input>\r\n                            <p className='text-xl font-semibold'>%</p>\r\n                            </div>\r\n                            </div>\r\n                            <div>\r\n                            <p className='text-xl font-semibold'>Resulting Revenue</p>\r\n                            <p className={classNames(getResultingTaxRevenue() > 0 ? 'text-green-700' : '', 'text-xl')}>{getResultingTaxRevenue()} [M]</p>\r\n                            </div>\r\n                            <div>\r\n                            <p className='text-xl font-semibold'>Resulting Government Funds</p>\r\n                            <p className={classNames(getResultingTaxRevenue() > 0 ? 'text-green-700' : '', 'text-xl')}>{governmentFunds + getResultingTaxRevenue()} [M]</p>\r\n                            </div>\r\n                            <button \r\n                                className='mt-4 p-2 col-span-3 rounded shadow flex w-full justify-center font-semibold bg-yellow-300 hover:bg-yellow-400 text-lg'\r\n                                onClick={onClickPullTaxes}\r\n                                >\r\n                                    <ArrowCircleDownIcon className='h-7 w-7'/>\r\n                                    PULL TAXES</button>\r\n                            </div>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    {selectedSection == 'Licenses' &&\r\n                        <div className=''>\r\n                            <div className='m-4 bg-white rounded p-2 shadow'>\r\n                            <div className=''>\r\n                                <p className='font-semibold text-lg'>Title</p>\r\n                                <input\r\n                                    className='border-2 border-gray-500 w-full p-1 focus:outline-none'\r\n                                    onChange={event => {setLicenseTitle(event.target.value)}}\r\n                                ></input>\r\n                            </div>\r\n                            <div className='py-2'>\r\n                                <p className='font-semibold text-lg'>Permissions</p>\r\n                                <input\r\n                                    className='border-2 border-gray-500 w-full p-1 focus:outline-none'\r\n                                    onChange={event => {setLicensePermissions(event.target.value)}}\r\n                                ></input>\r\n                            </div>\r\n                            <div className=''>\r\n                                <p className='font-semibold text-lg'>Price</p>\r\n                                <div className='flex gap-1 w-full'>\r\n                                    <input\r\n                                        className='border-2 border-gray-500 w-full p-1 focus:outline-none'\r\n                                        onChange={event => {setLicensePrice(event.target.value)}}\r\n                                    ></input>\r\n                                    <p className='text-xl font-bold'>[M]</p>\r\n                                </div>\r\n                                \r\n                            </div>\r\n                            <div className='flex justify-center pt-2'>\r\n                            <button className='font-semibold rounded shadow bg-yellow-300 hover:bg-yellow-400 py-1 px-2 flex justify-center'\r\n                                onClick={onClickAddLicense}\r\n                            >ADD LICENSE</button>\r\n                            </div>\r\n                            </div>\r\n                            <div className='py-2 bg-gray-200 max-h-screen overflow-y-scroll'>\r\n                                {licenses.map(license => {\r\n                                    return(\r\n                                        <div className='px-4 py-2'>\r\n                                            <LicenseGovernment license={license}/>\r\n                                        </div>\r\n                                    )\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    {selectedSection == 'Holidays' &&\r\n                        <div>\r\n                            Holidays\r\n                        </div>\r\n                    }\r\n                    {selectedSection == 'Properties' &&\r\n                        <div className='grid grid-cols-3'>\r\n                        <div className='col-span-2 p-2'>\r\n                            {selectedProperty == undefined &&\r\n                                <p className='text-gray-500 p-5 font-semibold'>NO PROPERTY SELECTED</p>\r\n                            }\r\n                            {selectedProperty != undefined &&\r\n                                <div className='bg-white rounded'>\r\n                                    <div className='p-1'>\r\n                                    <Property property={selectedProperty}/>\r\n                                    </div>\r\n                                    <div className='p-2 max-h-screen overflow-y-scroll'>\r\n                                        <div className='grid grid-cols-2'>\r\n                                        <div className='col-span-2 p-2'>\r\n                                            \r\n                                            <div className='bg-white'>\r\n                                                \r\n                                                <div className='w-full flow-root p-2 bg-gray-200'>\r\n                                                <p className='font-semibold float-left'>OWNER</p>\r\n                                                <div className='float-right flex gap-2'>\r\n                                                    <CitizenGovernmentDropboxMenu\r\n                                                        citizens={citizens}\r\n                                                        selectedCitizen={selectedNewPropertyOwner}\r\n                                                        setSelectedCitizen={setSelectedNewPropertyOwner}\r\n                                                        filteredCitizens={filteredDropboxCitizens}\r\n                                                        setFilteredCitizens={setFilteredDropboxCitizens}\r\n                                                    />\r\n                                                        <button \r\n                                                        onClick={onClickAddChangeOwnerButton}\r\n                                                        className='bg-yellow-300 py-1 px-2 flex text-sm hover:bg-yellow-400 font-semibold rounded shadow'>\r\n                                                        <PlusCircleIcon className='w-5 h-5'/>{selectedProperty.owner != undefined ? 'CHANGE OWNER' : 'ADD OWNER'}</button>\r\n                                                </div>\r\n                                                </div>\r\n                                                <div className='flow-root p-2 border-2 border-gray-400'>\r\n                                                    <p className='float-left font-semibold text-gray-700'>Current</p>\r\n                                                    <p className='float-right'>{selectedProperty.owner ? `${selectedProperty.owner.name}, ${selectedProperty.owner.citizenID}` : 'None'}</p>\r\n                                                </div>\r\n                                                {selectedProperty.owner &&\r\n                                                <div className='flow-root p-2 border-l-2 border-r-2 border-b-2 border-gray-400'>\r\n                                                    <p className='float-left font-semibold text-gray-700'>Date Given</p>\r\n                                                    <p className='float-right'>{selectedProperty.owner.dateAdded}</p>\r\n                                                </div>\r\n                                                }\r\n                                                \r\n                                            </div>\r\n                                            \r\n                                        </div>\r\n                                        {selectedProperty.type == 'Business' &&\r\n                                        <div className='col-span-2 p-2'>\r\n                                            \r\n                                            <div className='bg-white'>\r\n                                                \r\n                                                <div className='w-full flow-root p-2 bg-gray-200'>\r\n                                                <p className='font-semibold float-left'>BUSINESS</p>\r\n                                                <div className='float-right flex gap-2'>\r\n                                                    \r\n                                                        <button \r\n                                                        onClick={()=>{setAddChangeBusinessPopupOpen(true)}}\r\n                                                        className='bg-yellow-300 py-1 px-2 flex text-sm hover:bg-yellow-400 font-semibold rounded shadow'>\r\n                                                        <PlusCircleIcon className='w-5 h-5'/>{selectedProperty.business != undefined ? 'CHANGE BUSINESS' : 'ADD BUSINESS'}\r\n                                                            <Popup\r\n                                                                open={addChangeBusinessPopupOpen}\r\n                                                                setOpen={setAddChangeBusinessPopupOpen}\r\n                                                                header={selectedProperty.business != undefined ? 'Change Business' : 'Add Business'}\r\n                                                                onClickSave={()=>{}}\r\n                                                                inputs={[]}\r\n                                                                saveText={selectedProperty.business != undefined ? 'Change' : 'Add'}\r\n                                                                additionalComponent={()=>{return <AddBusinessPopupBody database={database} setValues={setValues} selectedProperty={selectedProperty} setSelectedProperty={setSelectedProperty} setAddChangeBusinessPopupOpen={setAddChangeBusinessPopupOpen}/>}}\r\n                                                            />\r\n                                                        </button>\r\n                                                </div>\r\n                                                </div>\r\n                                                {selectedProperty.business != undefined ?\r\n                                                    <div>\r\n                                                    <div className='flow-root p-2 border-2 border-gray-400'>\r\n                                                    <p className='float-left font-semibold text-gray-700'>Name</p>\r\n                                                    <p className='float-right'>{selectedProperty.business.name}</p>\r\n                                                    </div>\r\n                                                    <div className='flow-root p-2 border-b-2 border-l-2 border-r-2 border-gray-400'>\r\n                                                    <p className='float-left font-semibold text-gray-700'>Description</p>\r\n                                                    <p className='float-right'>{selectedProperty.business.description}</p>\r\n                                                    </div>\r\n                                                    </div>\r\n                                                    :\r\n                                                    <div className='flow-root p-2 border-2 border-gray-400'>\r\n                                                    <p className='float-left font-semibold text-gray-700'>None yet</p>\r\n                                                    \r\n                                                    </div>\r\n                                                }\r\n                                                \r\n                                            </div>\r\n                                            \r\n                                        </div>\r\n                                        }\r\n                                        </div>\r\n                                    </div>\r\n                                    <p></p>\r\n                                \r\n                                </div>\r\n                            }\r\n                        </div>\r\n                        <div className='col-span-1 p-2'>\r\n                            <div className='bg-white rounded'>\r\n                                <div className='p-2'>\r\n                                    <button className='w-full bg-yellow-300 hover:bg-yellow-400 font-semibold text-sm py-2 justify-center text-center rounded shadow flex'\r\n                                        onClick={()=>{setAddPropertyPopupOpen(true)}}>\r\n                                        <PlusCircleIcon className='w-5 h-5'/>ADD PROPERTY</button>\r\n                                        <Popup\r\n                                            open={addPropertyPopupOpen}\r\n                                            setOpen={setAddPropertyPopupOpen}\r\n                                            header='Add Property'\r\n                                            onClickSave={()=>{}}\r\n                                            inputs={[]}\r\n                                            saveText={'Add'}\r\n                                            additionalComponent={()=>{return <AddPropertyPopupBody database={database} getTime={getTime} getDate={getDate} getYear={getYear} properties={properties} setProperties={setProperties} setAddPropertyPopupOpen={setAddPropertyPopupOpen}/>}}\r\n                                        />\r\n                                </div>\r\n                                <div className='p-2'>\r\n                                <input placeholder='Search' value={searchPropertiesInput} className='w-full border-2 border-gray-500 p-2 bg-gray-100 focus:ring-1 focus:ring-gray-700 focus:border-gray-700 focus:outline-none'\r\n                                    onChange={event => {\r\n                                        setSearchPropertiesInput(event.target.value);\r\n                                        setFilteredProperties(properties.filter(property => {\r\n                                          console.log(filteredProperties)\r\n                                          return property.address.toUpperCase().includes(event.target.value.toUpperCase());\r\n                                        }))\r\n                                      }}\r\n                                ></input>\r\n                                </div>\r\n                                <div className=''>\r\n                            {filteredProperties.map(property => {\r\n                                return(\r\n                                    <div className='p-2'>\r\n                                        <button \r\n                                            onClick={()=>{setSelectedProperty(property);\r\n                                                localStorage.setItem('selectedProperty', JSON.stringify(property));\r\n                                            }}\r\n                                            className={classNames(selectedProperty != undefined && selectedProperty.propertyID == property.propertyID ? 'border-2 border-blue-400 shadow-lg bg-yellow-400' : ' bg-yellow-300', 'w-full shadow rounded hover:bg-yellow-400 p-2 text-sm font-semibold')}>\r\n                                            <div>{property.address.toUpperCase()}</div>\r\n                                                <div className='text-gray-700'>{property.propertyID.toUpperCase()}</div>\r\n                                                </button>\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                            </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    }\r\n                    {selectedSection == 'Announcements' &&\r\n                                    <div>\r\n                                        <div className='w-full'>\r\n                                <div className='flow-root p-3 bg-white rounded shadow mx-2 my-2'>\r\n                                <textarea className='p-2 w-full mb-2 border-2 focus:border-black bg-gray-100 shadow-sm focus:outline-none border-gray-500 resize-none'\r\n                                    placeholder='Write announcement...'\r\n                                    value={announcementText}\r\n                                    onKeyDown={event => {\r\n                                        if(event.code === 'Enter'){\r\n                                            onClickPostAnnouncement();\r\n                                        }\r\n                                    }}\r\n                                    \r\n                                    onChange={event => {\r\n                                                if(!event.target.value.includes('\\n')){\r\n                                                    setAnnouncementText(event.target.value);\r\n                                                }\r\n                                    }}\r\n                                ></textarea>\r\n                                <div className='w-full flex pb-2 justify-center'>\r\n                                <button \r\n                                    onClick={onClickPostAnnouncement}\r\n                                    className={classNames(\r\n                                        announcementText != '' && announcementText != undefined ? 'bg-yellow-300 hover:bg-yellow-400' : 'bg-yellow-200 text-gray-400',\r\n                                        'w-64 flex text-md justify-center py-1 font-semibold rounded shadow')}>\r\n                                            <div className='flex justify-center'>\r\n                                    <PlusCircleIcon className='w-6 h-6'/>POST ANNOUNCEMENT\r\n                                    \r\n                                    </div>\r\n                                    </button>\r\n                                    </div>\r\n                                    </div>\r\n                                    </div>\r\n                                    <div className='mt-5 bg-gray-200 py-1 max-h-screen overflow-y-scroll'>\r\n                                        {announcements.map(announcement => {\r\n                                            return(\r\n                                                <div className='px-2 py-1'>\r\n                                                    <Announcement announcement={announcement}/>\r\n                                                </div>\r\n                                            )\r\n                                        })}\r\n                                    </div>\r\n                                    </div>\r\n                                }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n    function Transfer({transfer}){\r\n    \r\n        return(\r\n            <div className='rounded bg-white text-sm shadow'>\r\n                <div className='w-full'>\r\n                <p className='pl-2 pt-2 font-semibold text-gray-700'>{transfer.date} at {transfer.time}</p>\r\n                <p className='pl-2 pt-2 font-semibold text-gray-700'>{transfer.transferID} {transfer.ssre}</p>\r\n                </div>\r\n                <div className='grid grid-cols-4 p-2 gap-2'>\r\n                {transfer.type == \"Incoming\" ?\r\n                <div className='col-span-2 grid grid-cols-2'>\r\n                            <div className='col-span-1'>\r\n                                <p className='font-semibold'>Amount</p>\r\n                                <p className='text-green-700'>+{transfer.amount} [M]</p>\r\n                            </div>\r\n                            <div className='col-span-1'>\r\n                                <p className='font-semibold'>From</p>\r\n                                <p className=''>{transfer.senderName}</p>\r\n                            </div>\r\n                            </div>\r\n                :    \r\n                <div className='col-span-2 grid grid-cols-2'>\r\n                <div className='col-span-1'>\r\n                    <p className='font-semibold'>Amount</p>\r\n                    <p className='text-red-700'>-{transfer.amount} [M]</p>\r\n                </div>\r\n                <div className='col-span-1'>\r\n                    <p className='font-semibold'>To</p>\r\n                    <p className=''>{transfer.receiverName}</p>\r\n                </div>\r\n                </div>\r\n                        }\r\n                <div className='col-span-1'>\r\n                                <p className='font-semibold'>Reason</p>\r\n                                <p className=''>{transfer.reason}</p>\r\n                            </div>\r\n                <div className='col-span-1'>\r\n                                <p className='font-semibold'>Resulting Balance</p>\r\n                                <p className=''>{transfer.resultingBalance} [M]</p>\r\n                            </div>\r\n                        </div>\r\n                </div>\r\n        )\r\n    \r\n}\r\n\r\nfunction LicenseGovernment({license}){\r\n    return(\r\n        <div className='border-2 border-gray-500 bg-white shadow p-2'>\r\n            <div className='flow-root'>\r\n                <div className='float-left'>\r\n                    <p className='text-lg font-semibold'>{license.title}</p>\r\n                    <p className='font-semibold text-gray-700'>{license.licenseID}</p>\r\n                </div>\r\n                <p className='float-right font-bold text-xl'>{license.price} [M]</p>\r\n            </div>\r\n            \r\n            <p className='pt-2 font-semibold'>{license.permissions}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction LicenseUser({license}){\r\n    return(\r\n        <div className='border-2 border-gray-500 bg-white shadow p-2'>\r\n            <div className='flow-root'>\r\n                <div className='float-left'>\r\n                    <p className='text-lg font-semibold'>{license.title}</p>\r\n                    <p className='font-semibold text-gray-700'>{license.licenseID}</p>\r\n                </div>\r\n                <p className='float-right font-bold text-xl'>{license.price} [M]</p>\r\n            </div>\r\n            <div className='flow-root'>\r\n                <p className='pt-2 pr-2 font-semibold float-left'>{license.permissions}</p>\r\n                <div className='flex float-right'>\r\n                    <CheckCircleIcon className='w-7 h-7'/>\r\n                <p className='float-right font-bold px-1 text-lg'>Purchased {(selectedCitizen.licenses[license.licenseID]).datePurchased}</p>\r\n                </div>\r\n                \r\n                \r\n                \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction CriminalCharge({charge}){\r\n    \r\n    return(\r\n        <div className='rounded bg-white shadow text-sm break-words'>\r\n            <div className='w-full'>\r\n            <p className='pl-2 pt-2 font-semibold text-gray-700'>{charge.date} at {charge.time}</p>\r\n            <p className='pl-2 pt-2 font-semibold text-gray-700'>{charge.chargeID} {charge.ssre}</p>\r\n            </div>\r\n            \r\n                {charge.verdict == \"Guilty\" ?\r\n                <div className='grid grid-cols-3 p-2 gap-x-2 gap-y-2'>\r\n                <div className='col-span-1'>\r\n                <p className='font-semibold'>Prosecutor</p>\r\n                <p className=''>{charge.prosecutor.name}</p>\r\n                <p className=''>{charge.prosecutor.citizenID}</p>\r\n            </div>\r\n            <div className='col-span-1'>\r\n                <p className='font-semibold'>Defendant</p>\r\n                <p className=''>{charge.defendant.name}</p>\r\n                <p className=''>{charge.defendant.citizenID}</p>\r\n            </div>\r\n            <div className='col-span-1'>\r\n                        <p className='font-semibold'>Verdict</p>\r\n                        <p className='text-red-700'>Guilty</p>\r\n                        </div>\r\n            <div className='col-span-1'>\r\n                        <p className='font-semibold'>Crime</p>\r\n                        <p className=''>{charge.crime}</p>\r\n                        </div>\r\n\r\n                        \r\n                        <div className='col-span-1'>\r\n                            <p className='font-semibold'>Reason for Verdict</p>\r\n                            <p className=''>{charge.reasonForVerdict}</p>\r\n                        </div>\r\n                        <div className='col-span-1'>\r\n                        <p className='font-semibold'>Punishment</p>\r\n                        <p className=''>{charge.punishment}</p>\r\n                        </div>\r\n            </div> :\r\n            <div className='grid grid-cols-3 p-2 gap-x-2 gap-y-2'>\r\n            <div className='col-span-1'>\r\n            <p className='font-semibold'>Prosecutor</p>\r\n            <p className=''>{charge.prosecutor.name}</p>\r\n            <p className=''>{charge.prosecutor.citizenID}</p>\r\n        </div>\r\n        <div className='col-span-1'>\r\n            <p className='font-semibold'>Defendant</p>\r\n            <p className=''>{charge.defendant.name}</p>\r\n            <p className=''>{charge.defendant.citizenID}</p>\r\n        </div>\r\n        <div className='col-span-1'>\r\n        <div className='col-span-1'>\r\n                    <p className='font-semibold'>Verdict</p>\r\n                    <p className='text-green-700'>Not Guilty</p>\r\n                    </div>\r\n                    <p className='font-semibold'>Alleged Crime</p>\r\n                    <p className=''>{charge.allegedCrime}</p>\r\n                    </div>\r\n                    \r\n                   \r\n                   \r\n                    <div className='col-span-2'>\r\n                        <p className='font-semibold'>Reason for Verdict</p>\r\n                        <p className=''>{charge.reasonForVerdict}</p>\r\n                    </div>\r\n                   \r\n                    </div>\r\n        \r\n                }\r\n    </div>\r\n    )\r\n\r\n}\r\n\r\n    function Property({property}){\r\n        return(\r\n            <div className={classNames(selectedSection == 'Citizens' ? 'text-sm' : '', 'p-1')}>\r\n                                            <div className='w-full bg-white group-hover:bg-gray-200 border-2 border-gray-500 grid grid-cols-4'>\r\n                                                <div className='col-span-4 p-2 flow-root'>\r\n                                                    <div className='float-left'>\r\n                                                    <p className={classNames(selectedSection == 'Citizens' ? 'text-lg' : 'text-xl', 'font-bold')}>{property.address}</p>\r\n                                                    <p className={classNames(selectedSection == 'Citizens' ? 'text-xs' : 'text-sm', 'uppercase font-semibold')}>{property.type}</p>\r\n                                                    </div>\r\n                                                    {/* <div className='float-right'>\r\n                                                        <button className='rounded flex p-2 text-sm uppercase shadow font-semibold bg-yellow-300 hover:bg-yellow-400'>\r\n                                                            <PencilIcon className='h-5 w-5'/>\r\n                                                            Edit Property\r\n                                                        </button>\r\n                                                    </div> */}\r\n                                                </div>\r\n                                                \r\n{/*                                                 <div className='col-span-3 px-2 uppercase font-bold'>Information</div>\r\n */}                                                \r\n                                                <div className='col-span-1 p-2'>\r\n                                                    <p className='font-semibold'>Property ID</p>\r\n                                                    <p>{property.propertyID}</p>\r\n                                                </div>\r\n                                                <div className='col-span-1 p-2'>\r\n                                                    <p className='font-semibold'>Price</p>\r\n                                                    <p>{property.price} [M]</p>\r\n                                                </div>\r\n                                                \r\n                                                <div className='col-span-1 p-2'>\r\n                                                    <p className='font-semibold'>Dimensions</p>\r\n                                                    <p>{property.length} by {property.width}</p>\r\n                                                </div>\r\n                                                {/* <div className='col-span-1 p-2'>\r\n                                                    <p className='font-semibold'>Size</p>\r\n                                                    <p>{property.size} Blocks</p>\r\n                                                </div> */}\r\n                                                <div className='col-span-1 p-2'>\r\n                                                    <p className='font-semibold'>Date Added</p>\r\n                                                    <p>{property.dateAdded}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            </div>\r\n        )\r\n    }\r\n\r\n    function Announcement({announcement}){\r\n        return(\r\n            <div className='bg-white rounded shadow p-2'>\r\n                <p className='text-gray-700 font-semibold'>{announcement.datePosted} at {announcement.timePosted}</p>\r\n                <div className='p-2'>\r\n                        <p className='text-lg font-semibold py-2 px-2 border-2 border-gray-400 shadow-sm'>\r\n                            {announcement.text}\r\n                        </p>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Government;","import React, {useEffect, useState} from 'react'\r\nimport { PlusCircleIcon, ThumbUpIcon, ThumbDownIcon, XCircleIcon, ChatIcon, DotsHorizontalIcon, NewspaperIcon, SpeakerphoneIcon, ScaleIcon, BellIcon } from '@heroicons/react/outline';\r\nimport { Menu, Transition } from '@headlessui/react';\r\nimport { Fragment } from 'react';\r\n\r\nconst Home = ({database, user, getDate, getYear, getTime, selectedSection, setSelectedSection, selectedPost, setSelectedPost}) => {\r\n    const [criminalCharges, setCriminalCharges] = useState([]);\r\n    const [posts, setPosts] = useState();\r\n    const [filteredPosts, setFilteredPosts] = useState();\r\n    const [announcements, setAnnouncements] = useState([]);\r\n    const [notifications, setNotifications] = useState();\r\n    const [postPopupBodyOpen, setPostPopupBodyOpen] = useState(false);\r\n    const [postText, setPostText] = useState('');\r\n    const [numberOfPostsShown, setNumberOfPostsShown] = useState(12);\r\n    const [selectedFilter, setSelectedFilter] = useState('Most Recent');\r\n    const [postsLoaded, setPostsLoaded] = useState(false);\r\n    const [notificationsLoaded, setNotificationsLoaded] = useState(false);\r\n    const [unseenNotifications, setUnseenNotifications] = useState(false);\r\n    const [announcementsLoaded, setAnnouncementsLoaded] = useState(false);\r\n    const [criminalChargesLoaded, setCriminalChargesLoaded] = useState(false);\r\n    const rushingtonEpoch = 1522648800;\r\n\r\n    const navigationSections = [\r\n        {sectionName: 'Public Posts', sectionSelected: selectedSection == 'Public Posts', icon: NewspaperIcon},\r\n        {sectionName: 'Government Announcements', sectionSelected: selectedSection == 'Government Announcements', icon: SpeakerphoneIcon},\r\n        {sectionName: 'Criminal Charges', sectionSelected: selectedSection == 'Criminal Charges', icon: ScaleIcon},\r\n        {sectionName: 'Notifications', sectionSelected: selectedSection == 'Notifications', icon: BellIcon},\r\n    ]\r\n\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n    }\r\n\r\n    useEffect(updateValues, []);\r\n    useEffect(()=>{updateFilteredPosts(posts, numberOfPostsShown)}, [selectedFilter]);\r\n\r\n    function updateValues(){\r\n        console.log('Called updateValues()')\r\n        database.ref(`/citizens/${user.citizenID}/notifications`).get().then(notificationsSnapshot => {\r\n            if(notificationsSnapshot.val() != undefined){\r\n                setNotifications(Object.values(notificationsSnapshot.val()).sort((notification1, notification2) => {\r\n                    return notification2.ssre - notification1.ssre\r\n                }));\r\n            }\r\n            if(selectedSection == 'Notifications'){\r\n                database.ref(`/citizens/${user.citizenID}/notifications`).get().then(notificationsSnapshot => {\r\n                    if(notificationsSnapshot.val() != undefined){\r\n                        const notifications = Object.values(notificationsSnapshot.val());\r\n                        notifications.forEach(notification => {\r\n                            notification.seen = true;\r\n                        });\r\n                        setUnseenNotifications(false);\r\n                        database.ref(`/citizens/${user.citizenID}/notifications`).set(notifications);\r\n                        setNotifications(notifications.sort((notification1, notification2) => {\r\n                            return notification2.ssre - notification1.ssre\r\n                        }));\r\n                    }\r\n                })\r\n            } else {\r\n                if(notificationsSnapshot.val() != undefined){updateUnseenNotifications(Object.values(notificationsSnapshot.val()))};\r\n            }\r\n            setNotificationsLoaded(true);\r\n        database.ref('/posts').get().then(postsSnapshot => {\r\n            if(postsSnapshot.val() != undefined){\r\n                console.log('Retrieved', Object.values(postsSnapshot.val()).length, 'posts, showing', numberOfPostsShown);\r\n\r\n                setPosts(Object.values(postsSnapshot.val()).sort((post1, post2)=>{\r\n                    return post2.ssre - post1.ssre\r\n                }).slice(0, 100));\r\n                updateFilteredPosts(Object.values(postsSnapshot.val()).sort((post1, post2)=>{\r\n                    return post2.ssre - post1.ssre\r\n                }), numberOfPostsShown);\r\n            }\r\n            setPostsLoaded(true);\r\n            database.ref('/announcements').get().then(announcementsSnapshot => {\r\n                if(announcementsSnapshot.val() != undefined){\r\n                    setAnnouncements(Object.values(announcementsSnapshot.val()).sort((announcement1, announcement2) => {\r\n                        return(\r\n                            announcement2.ssre - announcement1.ssre\r\n                        );\r\n                    }).slice(0, 100));\r\n                }\r\n                setAnnouncementsLoaded(true);\r\n                database.ref('/criminalCharges').get().then(criminalChargesSnapshot => {\r\n                    if(criminalChargesSnapshot.val() != undefined){\r\n                        setCriminalCharges(Object.values(criminalChargesSnapshot.val()).sort((charge1, charge2) => {\r\n                            return charge2.ssre - charge1.ssre\r\n                        }));\r\n                    }\r\n                    setCriminalChargesLoaded(true);\r\n                    \r\n                });\r\n            })\r\n        });\r\n    })\r\n    }\r\n\r\n    function updateFilteredPosts(postsInput, numberOfPostsShown){\r\n        if(postsInput){\r\n            const sortedPosts = [...postsInput.sort((post1, post2)=>{\r\n                return post2.ssre - post1.ssre;})]                \r\n            if(selectedFilter == 'Most Liked'){\r\n                sortedPosts.sort((post1, post2) => {\r\n                    const post1Likes = post1.liked != undefined ? Object.values(post1.liked).length : 0;\r\n                    const post2Likes = post2.liked != undefined ? Object.values(post2.liked).length : 0;\r\n                    return post2Likes - post1Likes;\r\n                });} else if (selectedFilter == 'Most Disliked'){\r\n                    sortedPosts.sort((post1, post2) => {\r\n                        const post1Dislikes = post1.disliked != undefined ? Object.values(post1.disliked).length : 0;\r\n                        const post2Dislikes = post2.disliked != undefined ? Object.values(post2.disliked).length : 0;\r\n                        return post2Dislikes - post1Dislikes;\r\n                    });\r\n                }\r\n            setFilteredPosts(sortedPosts.slice(0, numberOfPostsShown));\r\n            }\r\n        \r\n    }\r\n\r\n    function censor(citizenID){\r\n        return(user.citizenID != citizenID ? `CI-***${citizenID.substring(6, 8)}` : citizenID);\r\n    }\r\n\r\n    function makeReadableTimeAgo(post){\r\n        const secondsSincePost = Math.round(((new Date()).getTime()/1000)-rushingtonEpoch) - post.ssre;\r\n        if(secondsSincePost > 2591999){\r\n            return(`${post.datePosted}`);\r\n        } else if(secondsSincePost > 307199){\r\n            const yearsAgo = toFixed(secondsSincePost/307200, 0);\r\n            return(`${yearsAgo} Rushington ${yearsAgo != 1 ? 'years' : 'year'} ago`);\r\n        } else if(secondsSincePost > 38399){\r\n            const monthsAgo = toFixed(secondsSincePost/38400, 0);\r\n            return(`${monthsAgo} Rushington ${monthsAgo != 1 ? 'months' : 'month'} ago`);\r\n        } else if(secondsSincePost > 1199){\r\n            const daysAgo = toFixed(Math.round(((new Date()).getTime()/1000)-rushingtonEpoch)/1200, 0) - \r\n                toFixed(post.ssre/1200, 0);\r\n            return(`${daysAgo} Rushington ${daysAgo != 1 ? 'days' : 'day'} ago`);\r\n        } else if(secondsSincePost > 59){\r\n            const minutesSincePost = toFixed(secondsSincePost/60, 0);\r\n            return(`${minutesSincePost} ${minutesSincePost != 1 ? 'minutes' : 'minute'} ago`);\r\n        } else {\r\n            return(`${secondsSincePost} ${secondsSincePost != 1 ? 'seconds' : 'second'} ago`);\r\n        }\r\n    }\r\n\r\n    function toFixed(num, fixed) {\r\n        var re = new RegExp('^-?\\\\d+(?:\\.\\\\d{0,' + (fixed || -1) + '})?');\r\n        return num.toString().match(re)[0];\r\n    }\r\n\r\n    function onClickPost(){\r\n        if(postText != '' && postText != undefined){\r\n            const postID = generatePostID();\r\n            const newPost = {\r\n                postID: postID,\r\n                ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                poster: {\r\n                    citizenID: user.citizenID,\r\n                    name: user.name\r\n                },\r\n                text: postText,\r\n                datePosted: `${getDate()}, ${getYear()}`,\r\n                timePosted: getTime(),\r\n                \r\n            }\r\n            database.ref(`/posts/${postID}`).set(newPost);\r\n            updateValues();\r\n            setPostText('');\r\n        }\r\n    }\r\n\r\n    function generatePostID(){\r\n        var postID = 'PO-'\r\n        for(var i = 0; i < 5; i++){\r\n            postID = postID + String(Math.floor(Math.random()*10));\r\n        }\r\n        return(postID);\r\n    }\r\n    \r\n    function updateUnseenNotifications(notifications){\r\n        console.log('Called updateUnseenNotifications()')\r\n        var unseenNotificationsValue = false;\r\n        var count = 0;\r\n        if(notifications != undefined){\r\n        notifications.forEach(notification => {\r\n            if(!notification.seen){\r\n                count++;\r\n                unseenNotificationsValue = true;\r\n            }\r\n        });}\r\n        console.log('Found', count, 'unseen notifications');\r\n        setUnseenNotifications(unseenNotificationsValue);\r\n    }\r\n\r\n    function UpOrDownArrow(props){\r\n        if(props.open){\r\n            return <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 15l7-7 7 7\" />\r\n              </svg>} else {\r\n            return <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n              </svg>\r\n          }\r\n    }\r\n    \r\n    return(\r\n        <div>\r\n            <div className='grid grid-cols-4 gap-5'>\r\n                <div className='col-span-4 lg:col-span-1 lg:h-40 lg:sticky lg:top-6'>\r\n                    \r\n                    {navigationSections.map(navigationSection => {\r\n                        const Icon = navigationSection.icon;\r\n                        return(\r\n                        \r\n                        <div className='flex-auto lg:flex-none'>\r\n                        <button\r\n                            onClick={()=>{setSelectedSection(navigationSection.sectionName);\r\n                                localStorage.setItem('selectedSection', navigationSection.sectionName);\r\n                                if(navigationSection.sectionName == 'Notifications'){\r\n                                    database.ref(`/citizens/${user.citizenID}/notifications`).get().then(notificationsSnapshot => {\r\n                                        if(notificationsSnapshot.val() != undefined){\r\n                                            const notifications = Object.values(notificationsSnapshot.val());\r\n                                            notifications.forEach(notification => {\r\n                                                notification.seen = true;\r\n                                            });\r\n                                            database.ref(`/citizens/${user.citizenID}/notifications`).set(notifications);\r\n                                            updateValues();\r\n                                        }\r\n                                    })\r\n                                }\r\n                            }}\r\n                            className={classNames(navigationSection.sectionSelected ? 'bg-gray-200' : 'bg-white hover:bg-gray-100',\r\n                                'rounded p-2 w-full text-center lg:text-left'\r\n                            )}\r\n                        >\r\n                            <div className='flex gap-2 justify-center lg:justify-start'>\r\n                                <Icon className='h-6 w-6'\r\n                                    fill={classNames(navigationSection.sectionName == 'Notifications' && unseenNotifications ? '#facc15' : 'white')}\r\n                                />\r\n                            <p className='text-gray-800 font-semibold'>{navigationSection.sectionName}</p>\r\n                            </div>\r\n                            </button>\r\n                        </div>\r\n                        )\r\n                    })}\r\n                    \r\n                </div>\r\n                <div className='col-span-4 lg:col-span-3 bg-gray-100 rounded'>\r\n                    <div className=''>\r\n                        <p className='font-bold py-1 px-2 bg-gray-100 border-b border-gray-400 text-xl'>{selectedSection}</p>\r\n                        {\r\n                            selectedSection == 'Criminal Charges' &&\r\n                            <div className={classNames(criminalChargesLoaded ? '' : 'animate-pulse', 'p-1 lg:p-2')}>\r\n                                {!criminalChargesLoaded &&\r\n                                    <div className='flex justify-center'>\r\n                                    <DotsHorizontalIcon className='h-10 w-10'/>\r\n                                    </div>\r\n                                }\r\n                                {criminalCharges.map(\r\n                                    criminalCharge => {\r\n                                        return(\r\n                                            <div className='p-1 lg:p-2'>\r\n                                                <CriminalCharge charge={criminalCharge}/>\r\n                                            </div>\r\n                                        )\r\n                                    }\r\n                                )}\r\n                            </div>\r\n                        }\r\n                        {\r\n                            selectedSection == 'Public Posts' &&\r\n                            <div className={classNames(postsLoaded ? '' : 'animate-pulse', 'w-full')}>\r\n                                <div className='flow-root p-1 mx-2 my-2'>\r\n                                <textarea className='p-2 rounded w-full focus:ring-1 focus:ring-gray-700 mb-2 border-2 focus:border-gray-700 bg-white shadow-sm focus:outline-none border-gray-500 resize-none'\r\n                                    placeholder='Write post...'\r\n                                    value={postText}\r\n                                    onKeyDown={event => {\r\n                                        if(event.code === 'Enter'){\r\n                                            onClickPost();\r\n                                        }\r\n                                    }}\r\n                                    \r\n                                    onChange={event => {\r\n                                                if(!event.target.value.includes('\\n')){\r\n                                                    setPostText(event.target.value);\r\n                                                }\r\n                                    }}\r\n                                ></textarea>\r\n                                <div className='w-full flex pb-2 justify-center'>\r\n                                <button \r\n                                    onClick={onClickPost}\r\n                                    className={classNames(\r\n                                        postText != '' && postText != undefined ? 'bg-yellow-300 hover:bg-yellow-400' : 'bg-yellow-200 text-gray-400',\r\n                                        'w-64 flex text-md justify-center py-1 font-semibold rounded shadow')}>\r\n                                            <div className='flex justify-center'>\r\n                                    <PlusCircleIcon className='w-6 h-6'/>POST TO EVERYONE\r\n                                    \r\n                                    </div>\r\n                                    </button>\r\n                                    </div>\r\n                                    </div>\r\n                                    {!postsLoaded &&\r\n                                    <div className='flex justify-center'>\r\n                                    <DotsHorizontalIcon className='h-10 w-10'/>\r\n                                    </div>\r\n                                    }\r\n                                    {filteredPosts &&\r\n                                    <div className='w-full'>\r\n                                        <div className='flow-root w-full px-3 py-1'>\r\n                                        <Menu as=\"div\" className={classNames(\"flex-shrink-0 float-right\")}>\r\n                  {({ open }) => (\r\n                    <>\r\n                      <div className='flex justify-center'>\r\n                        <Menu.Button className=\"bg-white justify-center flex rounded-lg flex px-2 py-2 font-semibold text-sm ring-2 ring-gray ring-opacity-20 focus:outline-none\">\r\n                            <p className='text-center'>\r\n                              {selectedFilter}\r\n                            </p>\r\n                            <UpOrDownArrow open={open}/>\r\n                        </Menu.Button>\r\n                      </div>\r\n                      <Transition\r\n                        show={open}\r\n                        as={Fragment}\r\n                        enter=\"transition ease-out duration-75\"\r\n                        enterFrom=\"transform opacity-0 scale-95\"\r\n                        enterTo=\"transform opacity-100 scale-100\"\r\n                        leave=\"transition ease-in duration-75\"\r\n                        leaveFrom=\"transform opacity-100 scale-100\"\r\n                        leaveTo=\"transform opacity-0 scale-95\"\r\n                      >\r\n                        <div className='flex justify-center'>\r\n                          \r\n                        <Menu.Items\r\n                          static\r\n                          className=\"z-50 absolute justify-center h-auto w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-green ring-opacity-5 focus:outline-none\"\r\n                        >\r\n                          <div className='max-h-40'>\r\n                          \r\n                              <Menu.Item>\r\n                            {({ active }) => (\r\n                               <button\r\n                               onClick={()=>{setSelectedFilter('Most Recent')}}\r\n                               className={classNames(\r\n                                 active ? \"bg-gray-100\" : \"\",\r\n                                 \"block w-full text-left px-4 py-2 text-sm text-green\"\r\n                               )}\r\n                             >\r\n                              Most Recent\r\n                             </button>\r\n                            )}\r\n                          </Menu.Item>\r\n                          <Menu.Item>\r\n                            {({ active }) => (\r\n                               <button\r\n                               onClick={()=>{setSelectedFilter('Most Liked')}}\r\n                               className={classNames(\r\n                                 active ? \"bg-gray-100\" : \"\",\r\n                                 \"block w-full text-left px-4 py-2 text-sm text-green\"\r\n                               )}\r\n                             >\r\n                              Most Liked\r\n                             </button>\r\n                            )}\r\n                          </Menu.Item>\r\n                          <Menu.Item>\r\n                            {({ active }) => (\r\n                               <button\r\n                               onClick={()=>{setSelectedFilter('Most Disliked')}}\r\n                               className={classNames(\r\n                                 active ? \"bg-gray-100\" : \"\",\r\n                                 \"block w-full text-left px-4 py-2 text-sm text-green\"\r\n                               )}\r\n                             >\r\n                              Most Disliked\r\n                             </button>\r\n                            )}\r\n                          </Menu.Item>\r\n                          </div>\r\n                        </Menu.Items>\r\n                        </div>\r\n                      </Transition>\r\n                    </>\r\n                  )}\r\n                </Menu>\r\n                </div>\r\n                {filteredPosts.length != 0 ?\r\n                <div className='w-full p-1 lg:p-2 bg-gray-200'>\r\n                                            \r\n                {filteredPosts.map(\r\n                    post => {\r\n                        return(\r\n                            <div className='p-1 lg:p-2'>\r\n                                <Post post={post}/>\r\n                            </div>\r\n                        )\r\n                    }\r\n                )}\r\n                {numberOfPostsShown < posts.length &&\r\n                <div className='flex justify-center py-2'>\r\n                <button className='px-2 py-1 rounded shadow bg-yellow-300 hover:bg-yellow-400 font-semibold flex'\r\n                    onClick={() => {\r\n                        const newNumberOfPostsShown = numberOfPostsShown + 10;\r\n                        setNumberOfPostsShown(newNumberOfPostsShown);\r\n                        updateFilteredPosts(posts, newNumberOfPostsShown);\r\n                    }}\r\n                >\r\n                    <PlusCircleIcon className='h-6 w-6'/>\r\n                    LOAD MORE POSTS</button>\r\n                </div>\r\n                }\r\n                </div>\r\n                    :\r\n                    <p className='text-gray-700 text-center font-bold py-2 w-full'>NONE YET</p>\r\n\r\n                                        }\r\n                                    </div>\r\n                                    }\r\n                                    \r\n                            </div>\r\n                        }\r\n                        {selectedSection == 'Government Announcements' &&\r\n                            <div className={classNames(announcementsLoaded ? '' : 'animate-pulse', 'py-1 lg:py-2')}>\r\n                                {!announcementsLoaded &&\r\n                                    <div className='flex justify-center'>\r\n                                    <DotsHorizontalIcon className='h-10 w-10'/>\r\n                                    </div>\r\n                                }\r\n                                {announcements.map(announcement => {\r\n                                    return(\r\n                                        <div className='px-2 py-1 lg:px-4 lg:py-2'>\r\n                                            <Announcement announcement={announcement}/>\r\n                                        </div>\r\n                                    )\r\n                                })}\r\n                            </div>\r\n                        }\r\n                        {selectedSection == 'Notifications' &&\r\n                            <div className={classNames(notificationsLoaded ? '' : 'animate-pulse')}>\r\n                                {!notificationsLoaded ? \r\n                                <div className='flex justify-center pt-10'>\r\n                                    <DotsHorizontalIcon className='h-10 w-10'/>\r\n                                </div>  :\r\n                        <div className='px-2 lg:px-4'>\r\n                            \r\n                                {notifications != undefined ? \r\n                                <div className='py-1 lg:py-2'>\r\n                                    {notifications.map(notification => {\r\n                                        return(\r\n                                            <div className='py-1 lg:py-2'>\r\n                                            <button className='bg-white rounded shadow p-2 w-full'\r\n                                            onClick={()=>{\r\n                                                        \r\n                                                database.ref(`/posts/${notification.post.postID}`).get().then(postSnapshot => {\r\n                                                    if(postSnapshot.val() != undefined){\r\n                                                        setSelectedPost(postSnapshot.val());\r\n                                                        localStorage.setItem('selectedPost', JSON.stringify(postSnapshot.val()));\r\n                                                        window.location.href='/post'\r\n                                                    }\r\n                                                })\r\n                                            }}>\r\n                                                {notification.action == 'commented' ? \r\n                                                <div className='flex flex-wrap gap-1'>\r\n                                                    <p className='font-bold flex-none flex-wrap'>{notification.actor.name}</p>\r\n                                                    \r\n                                                    <p className='flex-wrap'>commented:</p>\r\n                                                    <p className='text-left flex-wrap font-semibold'>{notification.commentText}</p>\r\n                                                    \r\n                                                    \r\n                                                    </div> :\r\n                                                <div className='flex flex-wrap gap-1'>\r\n                                                    <p className='font-bold flex-none flex-wrap'>{notification.actor.name}</p>\r\n                                                    <p className='flex-none'>{notification.action} your {notification.object}:</p>\r\n                                                    <p className='font-semibold flex justify-start text-left'>{notification.object == 'post' ? notification.post.text : notification.comment.text}</p>\r\n                                                </div>\r\n                                            }\r\n                                                \r\n                                                \r\n                                                <p className='font-semibold text-gray-700 pt-1 text-sm text-left'>{notification.dateAdded} at {notification.timeAdded}</p>\r\n                                                </button>\r\n                                            </div>\r\n                                        )\r\n                                    })}\r\n                                </div>\r\n                                :\r\n                                <div className='text-center font-semibold text-lg py-6 text-gray-700'>NO NOTIFICATIONS YET</div>\r\n                            }\r\n                            </div>\r\n                        }\r\n                    </div>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    function Post({post}){\r\n        return(\r\n            <div className='rounded bg-white shadow'>\r\n                <a\r\n                    onClick={()=>{\r\n                        setSelectedPost(post);\r\n                        localStorage.setItem('selectedPost', JSON.stringify(post));\r\n                    }}\r\n                    href='/post'>\r\n                <div className='flow-root'>\r\n                     <button\r\n                        onClick={(event) => {\r\n                            event.preventDefault();\r\n                            database.ref(`/citizens/${post.poster.citizenID}`).get().then(citizenSnapshot => {\r\n                                localStorage.setItem('selectedCitizen', JSON.stringify(citizenSnapshot.val()));\r\n                                window.location.href = '/profile';\r\n                            })\r\n                        }}\r\n                     className='px-1 m-1 text-gray-700 text-left font-semibold float-left hover:bg-gray-100 rounded'>\r\n                     <p className=''>{post.poster.citizenID == user.citizenID ? 'Me' : post.poster.name}</p>\r\n                     <p className='text-sm'>{censor(post.poster.citizenID)}</p>\r\n                     </button>\r\n                    <div className='float-right p-2'>\r\n                    <p className='text-right text-gray-700 font-semibold uppercase text-sm'>{makeReadableTimeAgo(post)}</p>\r\n                    </div>\r\n                </div>\r\n                    <div className='px-3 py-1'>\r\n                        <p className='text-lg font-semibold py-2 px-2 border-2 border-gray-400 shadow-sm bg-white'>\r\n                            {post.text}\r\n                        </p>\r\n                    </div>\r\n                    <div className={classNames(post.comments != undefined ? 'border-b border-gray-500' : '', 'w-full flow-root pb-2 pt-5 px-2')}>\r\n                        <button className='flex gap-1 float-left hover:bg-gray-200 rounded p-1'\r\n                            \r\n                            onClick={event=>{\r\n                                event.preventDefault();\r\n                                database.ref(`/posts/${post.postID}`).get().then(postSnapshot => {\r\n                                    const post = postSnapshot.val();\r\n                                var liked = post.liked != undefined ? [...Object.values(post.liked)] : [];\r\n                                var disliked = post.disliked != undefined ? [...Object.values(post.disliked)] : [];\r\n                                if(!liked.includes(user.citizenID)){\r\n                                    liked.push(user.citizenID);\r\n                                    if(disliked.includes(user.citizenID)){\r\n                                        disliked.splice(disliked.indexOf(user.citizenID), 1);\r\n                                    }\r\n                                database.ref(`/posts/${post.postID}/liked`).set(\r\n                                    liked\r\n                                );\r\n                                database.ref(`/posts/${post.postID}/disliked`).set(\r\n                                    disliked\r\n                                );\r\n                                updateValues();\r\n                                if(post.poster.citizenID != user.citizenID){\r\n                                database.ref(`/citizens/${post.poster.citizenID}/notifications`).get().then(notificationsSnapshot => {\r\n                                    const notifications = notificationsSnapshot.val() != undefined ? Object.values(notificationsSnapshot.val()) : [];\r\n                                    notifications.push({\r\n                                        dateAdded: `${getDate()}, ${getYear()}`,\r\n                                        timeAdded: getTime(),\r\n                                        action: 'liked',\r\n                                        object: 'post',\r\n                                        actor: {\r\n                                            name: user.name,\r\n                                            citizenID: user.citizenID\r\n                                        },\r\n                                        post: {postID: post.postID,\r\n                                            text: post.text},\r\n                                        seen: false,\r\n                                        ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                                    });\r\n                                    database.ref(`/citizens/${post.poster.citizenID}/notifications`).set(notifications);\r\n                                })}\r\n                                } else {\r\n                                    liked.splice(liked.indexOf(user.citizenID), 1);\r\n                                    console.log('liked', liked)\r\n                                    database.ref(`/posts/${post.postID}/liked`).set(liked);\r\n                                    updateValues();\r\n                                }\r\n                                })\r\n                            }}\r\n                        >\r\n                            <ThumbUpIcon className='h-6 w-6' \r\n                                \r\n                                fill={\r\n                                \r\n                                classNames(post.liked != undefined ?\r\n                                Object.values(post.liked).includes(user.citizenID) ? '#facc15' : 'white'\r\n                                : 'white')\r\n                            }/>\r\n                            <p className='font-semibold'>{post.liked != undefined ? Object.values(post.liked).length : 0}</p>\r\n                        </button>\r\n                        <button className='flex gap-1 float-left hover:bg-gray-200 rounded p-1 mx-1'\r\n                            onClick={event=>{\r\n                                event.preventDefault();\r\n                                database.ref(`posts/${post.postID}`).get().then(postSnapshot => {\r\n                                    const post = postSnapshot.val();\r\n                                    var disliked = post.disliked != undefined ? [...Object.values(post.disliked)] : [];\r\n                                var liked = post.liked != undefined ? [...Object.values(post.liked)] : [];\r\n                                if(!disliked.includes(user.citizenID)){\r\n                                    disliked.push(user.citizenID);\r\n                                    if(liked.includes(user.citizenID)){\r\n                                        liked.splice(liked.indexOf(user.citizenID), 1);\r\n                                    }\r\n                                database.ref(`/posts/${post.postID}/disliked`).set(\r\n                                    disliked\r\n                                );\r\n                                database.ref(`/posts/${post.postID}/liked`).set(liked);\r\n                                updateValues();\r\n                                if(post.poster.citizenID != user.citizenID){\r\n                                    database.ref(`/citizens/${post.poster.citizenID}/notifications`).get().then(notificationsSnapshot => {\r\n                                        const notifications = notificationsSnapshot.val() != undefined ? Object.values(notificationsSnapshot.val()) : [];\r\n                                        notifications.push({\r\n                                            dateAdded: `${getDate()}, ${getYear()}`,\r\n                                            timeAdded: getTime(),\r\n                                            action: 'disliked',\r\n                                            object: 'post',\r\n                                            actor: {\r\n                                                name: user.name,\r\n                                                citizenID: user.citizenID\r\n                                            },\r\n                                            post: {postID: post.postID,\r\n                                                text: post.text},\r\n                                            seen: false,\r\n                                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                                        });\r\n                                        database.ref(`/citizens/${post.poster.citizenID}/notifications`).set(notifications);\r\n                                    })}\r\n                                } else {\r\n                                    disliked.splice(disliked.indexOf(user.citizenID), 1);\r\n                                    //console.log('liked', disliked)\r\n                                    database.ref(`/posts/${post.postID}/disliked`).set(disliked);\r\n                                    updateValues();\r\n                                }\r\n                                })\r\n                                \r\n                                \r\n                            }}\r\n                        >\r\n                            <ThumbDownIcon className='h-6 w-6' \r\n                                \r\n                                fill={\r\n                                \r\n                                classNames(post.disliked != undefined ?\r\n                                Object.values(post.disliked).includes(user.citizenID) ? '#facc15' : 'white'\r\n                                : 'white')\r\n                            }/>\r\n                            <p className='font-semibold'>{post.disliked != undefined ? Object.values(post.disliked).length : 0}</p>\r\n                        </button>\r\n                        <a href={`/post`} className='p-1 gap-1 float-left rounded flex hover:bg-gray-200' onClick={()=>{\r\n                            setSelectedPost(post);\r\n                            localStorage.setItem('selectedPost', JSON.stringify(post));\r\n                        }}>\r\n                            <ChatIcon className='h-6 w-6' fill='white'/>\r\n                            <p className='font-semibold'>{post.comments != undefined ? Object.values(post.comments).length : 0}</p>\r\n                        </a>\r\n                        {\r\n                            post.poster.citizenID == user.citizenID &&\r\n                            <button className='font-semibold bg-yellow-300 hover:bg-yellow-400 rounded shadow flex float-right'\r\n                                onClick={event=>{\r\n                                    event.preventDefault();\r\n                                    database.ref(`/posts/${post.postID}`).set(null);\r\n                                    updateValues();\r\n                                }}\r\n                                >\r\n                                <div className='px-2 py-1 flex'>\r\n                                <XCircleIcon className='h-6 w-6'/>\r\n                                DELETE\r\n                                </div>\r\n                            </button>\r\n                        }\r\n                    </div>\r\n                    {post.comments != undefined &&\r\n                    <div className='p-2'>\r\n                        {\r\n                            Object.values(post.comments).sort((comment1, comment2) => {\r\n                                return comment2.ssre - comment1.ssre;\r\n                            }).sort((comment1, comment2) => {\r\n                                const comment1Likes = comment1.liked != undefined ? Object.values(comment1.liked).length : 0;\r\n                                const comment2Likes = comment2.liked != undefined ? Object.values(comment2.liked).length : 0;\r\n                                return comment2Likes - comment1Likes;\r\n                            }).slice(0, 2).map(comment => {\r\n                                return (<div className='flex gap-3'>\r\n                                    <div className='font-bold flex-none'>{comment.poster.name}</div>\r\n                                    <p className='truncate'>{comment.text}</p>\r\n                                </div>\r\n                                )\r\n                            })\r\n                        }\r\n                        {\r\n                            Object.values(post.comments).length > 2 &&\r\n                            <div className='text-base font-semibold pt-1'>{Object.values(post.comments).length - 2} more...</div>\r\n                        }\r\n                    </div>}\r\n                    </a>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    function CriminalCharge({charge}){\r\n    \r\n        return(\r\n            <div className='rounded bg-white shadow text-sm break-words'>\r\n            <div className='w-full'>\r\n            <p className='pl-2 pt-2 font-semibold text-gray-700'>{charge.date} at {charge.time}</p>\r\n            <p className='pl-2 pt-2 font-semibold text-gray-700'>{charge.chargeID} {charge.ssre}</p>\r\n            </div>\r\n            \r\n                {charge.verdict == \"Guilty\" ?\r\n                <div className='grid grid-cols-2 lg:grid-cols-3 p-2 gap-x-4 gap-y-2'>\r\n                <div className='col-span-1'>\r\n                <p className='font-semibold'>Prosecutor</p>\r\n                <p className=''>{charge.prosecutor.name}</p>\r\n                <p className=''>{censor(charge.prosecutor.citizenID)}</p>\r\n            </div>\r\n            <div className='col-span-1'>\r\n                <p className='font-semibold'>Defendant</p>\r\n                <p className=''>{charge.defendant.name}</p>\r\n                <p className=''>{censor(charge.defendant.citizenID)}</p>\r\n            </div>\r\n            <div className='col-span-2 lg:col-span-1'>\r\n                        <p className='font-semibold'>Crime</p>\r\n                        <p className=''>{charge.crime}</p>\r\n                        </div>\r\n            <div className='col-span-2 lg:col-span-1'>\r\n                        <p className='font-semibold'>Verdict</p>\r\n                        <p className='text-red-700'>Guilty</p>\r\n                        </div>\r\n            \r\n\r\n                        \r\n                        <div className='col-span-2 lg:col-span-1'>\r\n                            <p className='font-semibold'>Reason for Verdict</p>\r\n                            <p className=''>{charge.reasonForVerdict}</p>\r\n                        </div>\r\n                        <div className='col-span-2 lg:col-span-1'>\r\n                        <p className='font-semibold'>Sentence</p>\r\n                        <p className=''>{charge.punishment}</p>\r\n                        </div>\r\n            </div> :\r\n            <div className='grid grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-2 p-2'>\r\n            <div className='col-span-1'>\r\n            <p className='font-semibold'>Prosecutor</p>\r\n            <p className=''>{charge.prosecutor.name}</p>\r\n            <p className=''>{censor(charge.prosecutor.citizenID)}</p>\r\n        </div>\r\n        <div className='col-span-1'>\r\n            <p className='font-semibold'>Defendant</p>\r\n            <p className=''>{charge.defendant.name}</p>\r\n            <p className=''>{censor(charge.defendant.citizenID)}</p>\r\n        </div>\r\n        <div className='col-span-2 lg:col-span-1'>\r\n                    <p className='font-semibold'>Alleged Crime</p>\r\n                    <p className=''>{charge.allegedCrime}</p>\r\n                    </div>\r\n        <div className='col-span-2 lg:col-span-1'>\r\n                    <p className='font-semibold'>Verdict</p>\r\n                    <p className='text-green-700'>Not Guilty</p>\r\n                    </div>\r\n                    <div className='col-span-2'>\r\n                        <p className='font-semibold'>Reason for Verdict</p>\r\n                        <p className=''>{charge.reasonForVerdict}</p>\r\n                    </div>\r\n                   \r\n                    </div>\r\n        \r\n                }\r\n    </div>\r\n        )\r\n    \r\n    }\r\n\r\n    function Announcement({announcement}){\r\n        return(\r\n            <div className='bg-white rounded shadow p-2'>\r\n                <p className='text-gray-700 font-semibold'>{announcement.datePosted} at {announcement.timePosted}</p>\r\n                <div className='p-2'>\r\n                        <p className='text-lg font-semibold py-2 px-2 border-2 border-gray-400 shadow-sm'>\r\n                            {announcement.text}\r\n                        </p>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default React.memo(Home);","import { LibraryIcon, CheckCircleIcon, CreditCardIcon, PencilAltIcon, PlusCircleIcon, ThumbUpIcon, ThumbDownIcon, ChatIcon, XCircleIcon, DotsHorizontalIcon } from \"@heroicons/react/outline\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst Profile = ({user, database, getDate, getYear, getTime}) => {\r\n    const rushingtonEpoch = 1522648800;\r\n\r\n    const [selectedCitizen, setSelectedCitizen] = useState(localStorage.getItem('selectedCitizen') != undefined ? JSON.parse(localStorage.getItem('selectedCitizen')) : {});\r\n\r\n    const [selectedSection, setSelectedSection] = useState('Posts');\r\n    const [editingBiography, setEditingBiography] = useState(false);\r\n    const [posts, setPosts] = useState();\r\n    const [postsLoaded, setPostsLoaded] = useState(false);\r\n    const [newBiography, setNewBiography] = useState(selectedCitizen.biography != undefined ? selectedCitizen.biography : undefined);\r\n    \r\n    useEffect(updateValues, []);\r\n    \r\n    function censor(citizenID){\r\n        return(user.citizenID != citizenID ? `CI-***${citizenID.substring(6, 8)}` : citizenID);\r\n    }\r\n\r\n    function updateValues(){\r\n        database.ref(`/citizens/${selectedCitizen.citizenID}`).get().then(citizenSnapshot => {\r\n            setSelectedCitizen(citizenSnapshot.val());\r\n            localStorage.setItem('selectedCitizen', JSON.stringify(citizenSnapshot.val()));\r\n            setNewBiography(citizenSnapshot.val().biography);\r\n            database.ref('/posts').get().then(postsSnapshot => {\r\n                setPosts(Object.values(postsSnapshot.val()).filter(post => {\r\n                    return post.poster.citizenID == selectedCitizen.citizenID;\r\n                }).sort((post1, post2) => {\r\n                    return post2.ssre - post1.ssre;\r\n                }));\r\n                setPostsLoaded(true);\r\n            })\r\n        })\r\n    }\r\n\r\n    function makeReadableTimeAgo(post){\r\n        const secondsSincePost = Math.round(((new Date()).getTime()/1000)-rushingtonEpoch) - post.ssre;\r\n        if(secondsSincePost > 3455999){\r\n            return(`${post.datePosted}`);\r\n        } else if(secondsSincePost > 345599){\r\n            const yearsAgo = toFixed(secondsSincePost/345600, 0);\r\n            return(`${yearsAgo} Rushington ${yearsAgo != 1 ? 'years' : 'year'} ago`);\r\n        } else if(secondsSincePost > 28799){\r\n            const monthsAgo = toFixed(secondsSincePost/28800, 0);\r\n            return(`${monthsAgo} Rushington ${monthsAgo != 1 ? 'months' : 'month'} ago`);\r\n        } else if(secondsSincePost > 1199){\r\n            const daysAgo = toFixed(Math.round(((new Date()).getTime()/1000)-rushingtonEpoch)/1200, 0) - \r\n                toFixed(post.ssre/1200, 0);\r\n            return(`${daysAgo} Rushington ${daysAgo != 1 ? 'days' : 'day'} ago`);\r\n        } else if(secondsSincePost > 59){\r\n            const minutesSincePost = toFixed(secondsSincePost/60, 0);\r\n            return(`${minutesSincePost} ${minutesSincePost != 1 ? 'minutes' : 'minute'} ago`);\r\n        } else {\r\n            return(`${secondsSincePost} ${secondsSincePost != 1 ? 'seconds' : 'second'} ago`);\r\n        }\r\n    }\r\n\r\n    function toFixed(num, fixed) {\r\n        var re = new RegExp('^-?\\\\d+(?:\\.\\\\d{0,' + (fixed || -1) + '})?');\r\n        return num.toString().match(re)[0];\r\n    }\r\n\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n    }\r\n    \r\n    return(\r\n        <div className='bg-white rounded lg:px-20'>\r\n            <div className='py-2'>\r\n            <div className='flex justify-center text-3xl font-bold'>\r\n                {selectedCitizen.name}\r\n            </div>\r\n            <div className='flex justify-center text-lg'>\r\n                {censor(selectedCitizen.citizenID)}\r\n            </div>\r\n            </div>\r\n            {editingBiography ?\r\n            <div className='w-full'>\r\n            <textarea className='rounded resize-none border-2 text-center border-gray-500 h-20 w-full p-2 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700'\r\n                onChange={\r\n                    event => {\r\n                        setNewBiography(event.target.value);\r\n                    }\r\n                }\r\n                placeholder={classNames(selectedCitizen.biography != undefined ? 'Edit biography...' : 'Add biography...')}\r\n                value={newBiography}\r\n            >\r\n\r\n            </textarea>\r\n            \r\n            </div>\r\n             :\r\n             null\r\n            }\r\n            <div className='border-b border-gray-500 lg:mx-2 pb-2'>\r\n            {selectedCitizen.biography != undefined && !editingBiography &&\r\n            <div className='flex justify-center'>\r\n            <p className='p-2 border-gray-500 border-2 font-semibold text-center shadow'>{selectedCitizen.biography}</p>\r\n            </div>\r\n            }\r\n            \r\n            {selectedCitizen.citizenID == user.citizenID ?\r\n                editingBiography ?\r\n                <div className='flex gap-2 justify-center'>\r\n                    <button className='bg-yellow-300 hover:bg-yellow-400 font-semibold p-2 flex justify-center rounded my-1 text-sm shadow'\r\n                onClick={() => {\r\n                    setEditingBiography(false);\r\n                }}\r\n            >\r\n                <XCircleIcon className='h-5 w-5'/>\r\n                CANCEL</button>\r\n            <button className={classNames(newBiography != undefined && newBiography != '' ? 'bg-yellow-300 hover:bg-yellow-400' :\r\n                'bg-yellow-200 text-gray-400', 'font-semibold p-2 flex justify-center rounded my-1 text-sm shadow')}\r\n                onClick={() => {\r\n                    if(newBiography != undefined && newBiography != ''){\r\n                        database.ref(`/citizens/${user.citizenID}/biography`).set(newBiography);\r\n                        setEditingBiography(false);\r\n                        updateValues();\r\n                    }\r\n                }}\r\n            >\r\n                <CheckCircleIcon className='h-5 w-5'/>\r\n                SAVE</button>\r\n                </div> :\r\n            selectedCitizen.biography == undefined ?\r\n            <div className='flex justify-center'>\r\n            <button className='bg-yellow-300 hover:bg-yellow-400 shadow text-sm font-semibold p-2 flex justify-center rounded my-1'\r\n                onClick={() => {\r\n                    setEditingBiography(true);\r\n                }}\r\n            >\r\n                <PlusCircleIcon className='h-5 w-5'/>\r\n                ADD BIO</button></div> : \r\n                <div className='flex justify-center my-2'>\r\n                    <button className='bg-yellow-300 hover:bg-yellow-400 text-sm font-semibold flex rounded p-2 shadow justify-center'\r\n                        onClick={() => {\r\n                            setEditingBiography(true);\r\n                        }}\r\n                    >\r\n                        <PencilAltIcon className='h-5 w-5'/>\r\n                        EDIT BIO\r\n                    </button></div> : null\r\n        }\r\n            \r\n        </div>\r\n        \r\n            \r\n            \r\n            <div className='pt-8 lg:mx-2 border-b border-gray-500'>\r\n                <button className={classNames(\r\n                    selectedSection == 'Posts' ? 'border-b-4 border-yellow-300 font-bold hover:bg-gray-100 rounded-t' : 'text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded',\r\n                    'w-1/2 py-1')}\r\n                    onClick={() => {\r\n                        setSelectedSection('Posts');\r\n                    }}\r\n                    >POSTS</button>\r\n                <button className={classNames(\r\n                    selectedSection == 'File' ? 'border-b-4 border-yellow-300 font-bold hover:bg-gray-100 rounded-t' : 'text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded',\r\n                    'w-1/2 py-1')}\r\n                    onClick={() => {\r\n                        setSelectedSection('File');\r\n                    }}\r\n                    >FILE</button>\r\n\r\n            </div>\r\n            <div>\r\n                {selectedSection == 'File' &&\r\n                    <div className='pt-2'>\r\n                                        <div className='text-lg'>\r\n                                            \r\n                                            <div className='grid grid-cols-3 lg:m-2 border-2 border-gray-400'>\r\n                                            <div className='col-span-1 p-2'>\r\n                                                <p className='font-semibold'>Name</p>\r\n                                                <p>{selectedCitizen.name}</p>\r\n                                            </div>\r\n                                            <div className='col-span-1 p-2'>\r\n                                                <p className='font-semibold'>Citizen ID</p>\r\n                                                <p>{censor(selectedCitizen.citizenID)}</p>\r\n                                            </div>\r\n                                            <div className='col-span-1 p-2'>\r\n                                                <p className='font-semibold'>Date Added</p>\r\n                                                <p>{selectedCitizen.dateAdded}</p>\r\n                                            </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className='py-2'>\r\n                                            <div className='grid grid-cols-2'>\r\n                                            <div className='col-span-2 py-2 lg:px-2'>\r\n                                                \r\n                                                <div className='bg-white'>\r\n                                                    \r\n                                                    <div className='w-full flow-root p-2 bg-gray-200'>\r\n                                                    <p className='font-semibold float-left'>BANK</p>\r\n                                                    <div className='float-right flex gap-1'>\r\n                                                        <a \r\n                                                            href='/bank'\r\n                                                            className='bg-yellow-300 py-1 px-2 flex text-sm hover:bg-yellow-400 font-semibold rounded shadow'>\r\n                                                            <LibraryIcon className='w-5 h-5'/>\r\n                                                            GO TO BANK</a>\r\n                                                    </div>\r\n                                                    </div>\r\n                                                    <div className='flow-root p-2 border-2 border-gray-400'>\r\n                                                        <p className='float-left font-semibold text-gray-700'>Balance</p>\r\n                                                        <p className='float-right'>{selectedCitizen.meldas} [M]</p>\r\n                                                    </div>\r\n                                                    <div className='p-2 border-b-2 border-r-2 border-l-2 border-gray-400'>\r\n                                                        <p className='font-semibold text-gray-700'>Transaction History</p>\r\n                                                        {selectedCitizen.transfers != undefined &&\r\n                                                        <div className='max-h-96 overflow-y-scroll bg-gray-100 md:scrollbar-show sm:scrollbar-hide'>\r\n                                                            \r\n                                                            \r\n                                                            \r\n                                                        {Object.values(selectedCitizen.transfers).sort((transfer1, transfer2)=>{\r\n                                                            return(transfer2.ssre - transfer1.ssre);\r\n                                                        }).map(transfer => {\r\n                                                            return(\r\n                                                                <div className='p-1'>\r\n                                                                <Transfer transfer={transfer}/>\r\n                                                                </div>\r\n                                                            )\r\n                                                        })}\r\n                                                        \r\n                                                        \r\n                                                        </div>}\r\n                                                        {selectedCitizen.transfers == undefined &&\r\n                                                        <div className=''>None yet</div>\r\n                                                        }\r\n                                                    </div>\r\n                                                </div>\r\n                                                \r\n                                            </div>\r\n                                            <div className='col-span-2 py-2 lg:px-2'>\r\n                                                \r\n                                                <div className='bg-white'>\r\n                                                <div className='p-2 flow-root w-full bg-gray-200'>\r\n                                                <p className='font-semibold float-left'>CRIMINAL CHARGES</p>\r\n                                                        \r\n                                                    </div>\r\n                                                    <div className='flow-root p-2 border-2 border-gray-400'>\r\n                                                        <p className='float-left font-semibold text-gray-700'>Total</p>\r\n                                                        <p className='float-right'>{selectedCitizen.charges ? Object.values(selectedCitizen.charges).length : 0}</p>\r\n                                                    </div>\r\n                                                    <div className='p-2 border-b-2 border-r-2 border-l-2 border-gray-400'>\r\n                                                        {selectedCitizen.charges != undefined &&\r\n                                                        <div className='max-h-96 overflow-y-scroll bg-gray-100'>\r\n                                                            \r\n                                                            \r\n                                                            \r\n                                                        {Object.values(selectedCitizen.charges).sort((charge1, charge2)=>{\r\n                                                            return(charge2.ssre - charge1.ssre);\r\n                                                        }).map(charge => {\r\n                                                            return(\r\n                                                                <div className='p-1'>\r\n                                                                <CriminalCharge charge={charge}/>\r\n                                                                </div>\r\n                                                            )\r\n                                                        })}\r\n                                                        \r\n                                                        \r\n                                                        </div>}\r\n                                                        {selectedCitizen.charges == undefined &&\r\n                                                        <div className=''>None yet</div>\r\n                                                        }\r\n                                                    </div>\r\n                                                </div>\r\n                                                \r\n                                            \r\n                                            </div>\r\n                                            {\r\n                                                // Property section of profile. Hidden for now because I have to give everyone\r\n                                                // accurate properties which takes time\r\n                                            }\r\n                                            {/* <div className='col-span-2 py-2 lg:px-2'>\r\n                                                \r\n                                                <div className='bg-white'>\r\n                                                <div className='p-2 flow-root w-full bg-gray-200'>\r\n                                                <p className='font-semibold float-left'>PROPERTIES</p>\r\n                                                        \r\n                                                    </div>\r\n                                                    <div className='flow-root p-2 border-2 border-gray-400'>\r\n                                                        <p className='float-left font-semibold text-gray-700'>Total</p>\r\n                                                        <p className='float-right'>{selectedCitizen.properties ? Object.values(selectedCitizen.properties).length : 0}</p>\r\n                                                    </div>\r\n                                                    <div className='p-2 border-b-2 border-r-2 border-l-2 border-gray-400'>\r\n                                                        {selectedCitizen.properties != undefined &&\r\n                                                        <div className='max-h-96 overflow-y-scroll bg-gray-100'>\r\n                                                            \r\n                                                            \r\n                                                            \r\n                                                        {Object.values(selectedCitizen.properties).sort((property1, property2)=>{\r\n                                                            return(property2.ssre - property1.ssre);\r\n                                                        }).map(property => {\r\n                                                            return(\r\n                                                                <div className='w-full text-left group'\r\n                                                                    onClick={()=>{\r\n                                                                        /* setSelectedProperty(findPropertyByID(property.propertyID));\r\n                                                                        setSelectedSection('Properties');\r\n                                                                    }}\r\n                                                                >\r\n                                                                <Property property={property}/>\r\n                                                                </div>\r\n                                                            )\r\n                                                        })}\r\n                                                        \r\n                                                        \r\n                                                        </div>}\r\n                                                        {selectedCitizen.properties == undefined &&\r\n                                                        <div className=''>None yet</div>\r\n                                                        }\r\n                                                    </div>\r\n                                                </div>\r\n                                                \r\n                                            </div> */}\r\n                                            <div className='col-span-2 py-2 lg:px-2'>\r\n                                                \r\n                                                <div className='bg-white'>\r\n                                                <div className='w-full flow-root p-2 bg-gray-200'>\r\n                                                    <p className='font-semibold float-left'>LICENSES</p>\r\n                                                    <div className='float-right flex gap-1'>\r\n                                                        <a \r\n                                                            href='/licenses'\r\n                                                            className='bg-yellow-300 py-1 px-2 flex text-sm hover:bg-yellow-400 font-semibold rounded shadow'>\r\n                                                            <CreditCardIcon className='w-5 h-5'/>\r\n                                                            GO TO LICENSES</a>\r\n                                                    </div>\r\n                                                    </div>\r\n                                                    <div className='flow-root p-2 border-2 border-gray-400'>\r\n                                                        <p className='float-left font-semibold text-gray-700'>Total</p>\r\n                                                        <p className='float-right'>{selectedCitizen.licenses ? Object.values(selectedCitizen.licenses).length : 0}</p>\r\n                                                    </div>\r\n                                                    <div className='p-2 border-b-2 border-r-2 border-l-2 border-gray-400'>\r\n                                                        {selectedCitizen.licenses != undefined &&\r\n                                                        <div className='max-h-96 overflow-y-scroll bg-gray-100'>\r\n                                                            \r\n                                                            \r\n                                                            \r\n                                                        {Object.values(selectedCitizen.licenses).sort((license1, license2)=>{\r\n                                                            return(license1.title.localeCompare(license2.title));\r\n                                                        }).map(license => {\r\n                                                            return(\r\n                                                                <div className='w-full text-left group'\r\n                                                                    onClick={()=>{\r\n                                                                        /* setSelectedProperty(findPropertyByID(property.propertyID));\r\n                                                                        setSelectedSection('Properties'); */\r\n                                                                    }}\r\n                                                                >\r\n                                                                <License license={license}/>\r\n                                                                </div>\r\n                                                            )\r\n                                                        })}\r\n                                                        \r\n                                                        \r\n                                                        </div>}\r\n                                                        {selectedCitizen.licenses == undefined &&\r\n                                                        <div className=''>None yet</div>\r\n                                                        }\r\n                                                    </div>\r\n                                                </div>\r\n                                                \r\n                                            </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        </div>}\r\n                                        {selectedSection == 'Posts' &&\r\n                                        <div className='lg:px-2'>\r\n                                            {posts != undefined && posts.length != 0 &&\r\n                                                <div className='bg-gray-200 p-1 lg:p-2 rounded-b'>\r\n                                                    {posts.map(post => {\r\n                                                        return(\r\n                                                            <div className='p-1 lg:p-2'>\r\n                                                            <Post post={post}/>\r\n                                                            </div>\r\n                                                        )\r\n                                                    })}\r\n                                                </div>\r\n                                            }\r\n                                            {posts != undefined && posts.length == 0 &&\r\n                                                <div className='bg-gray-200 p-1 lg:p-2 rounded-b'>\r\n                                                    <div className='p-1 lg:p-2'>\r\n                                                        <p className='text-gray-700 font-semibold text-center'>NONE YET</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            }\r\n                                            {!postsLoaded &&\r\n                                                <div className='bg-gray-200 p-1 lg:p-2 rounded-b animate-pulse flex justify-center'>\r\n                                                    <DotsHorizontalIcon className='h-10 w-10'/>\r\n                                                </div>\r\n                                            }\r\n                                        </div>\r\n                                        }\r\n                                        </div>\r\n                                    </div>\r\n    )\r\n\r\n    function Post({post}){\r\n        return(\r\n            <div className='rounded bg-white shadow'>\r\n                <a\r\n                    onClick={()=>{\r\n                        localStorage.setItem('selectedPost', JSON.stringify(post));\r\n                    }}\r\n                    href='/post'>\r\n                <div className='flow-root'>\r\n                     <button\r\n                        onClick={(event) => {\r\n                            event.preventDefault();\r\n                            database.ref(`/citizens/${post.poster.citizenID}`).get().then(citizenSnapshot => {\r\n                                localStorage.setItem('selectedCitizen', JSON.stringify(citizenSnapshot.val()));\r\n                                window.location.href = '/profile';\r\n                            })\r\n                        }}\r\n                     className='p-1 m-1 text-gray-700 text-left font-semibold float-left hover:bg-gray-100 rounded'>\r\n                     <p className=''>{post.poster.citizenID == user.citizenID ? 'Me' : post.poster.name}</p>\r\n                     <p className='text-sm'>{censor(post.poster.citizenID)}</p>\r\n                     </button>\r\n                     <div className='float-right p-2'>\r\n                    <p className='text-right text-gray-700 font-semibold uppercase text-sm'>{makeReadableTimeAgo(post)}</p>\r\n                    </div>\r\n\r\n                </div>\r\n                    <div className='px-3 py-1'>\r\n                        <p className='text-lg font-semibold py-2 px-2 border-2 border-gray-400 shadow-sm bg-white'>\r\n                            {post.text}\r\n                        </p>\r\n                    </div>\r\n                    <div className={classNames(post.comments != undefined ? 'border-b border-gray-500' : '', 'w-full flow-root pb-2 pt-5 px-2')}>\r\n                        <button className='flex gap-1 float-left hover:bg-gray-200 rounded p-1'\r\n                            \r\n                            onClick={event=>{\r\n                                event.preventDefault();\r\n                                database.ref(`/posts/${post.postID}`).get().then(postSnapshot => {\r\n                                    const post = postSnapshot.val();\r\n                                var liked = post.liked != undefined ? [...Object.values(post.liked)] : [];\r\n                                var disliked = post.disliked != undefined ? [...Object.values(post.disliked)] : [];\r\n                                if(!liked.includes(user.citizenID)){\r\n                                    liked.push(user.citizenID);\r\n                                    if(disliked.includes(user.citizenID)){\r\n                                        disliked.splice(disliked.indexOf(user.citizenID), 1);\r\n                                    }\r\n                                database.ref(`/posts/${post.postID}/liked`).set(\r\n                                    liked\r\n                                );\r\n                                database.ref(`/posts/${post.postID}/disliked`).set(\r\n                                    disliked\r\n                                );\r\n                                updateValues();\r\n                                if(post.poster.citizenID != user.citizenID){\r\n                                database.ref(`/citizens/${post.poster.citizenID}/notifications`).get().then(notificationsSnapshot => {\r\n                                    const notifications = notificationsSnapshot.val() != undefined ? Object.values(notificationsSnapshot.val()) : [];\r\n                                    notifications.push({\r\n                                        dateAdded: `${getDate()}, ${getYear()}`,\r\n                                        timeAdded: getTime(),\r\n                                        action: 'liked',\r\n                                        actor: {\r\n                                            name: user.name,\r\n                                            citizenID: user.citizenID\r\n                                        },\r\n                                        post: {postID: post.postID,\r\n                                            text: post.text},\r\n                                        seen: false,\r\n                                        ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                                    });\r\n                                    database.ref(`/citizens/${post.poster.citizenID}/notifications`).set(notifications);\r\n                                })}\r\n                                } else {\r\n                                    liked.splice(liked.indexOf(user.citizenID), 1);\r\n                                    console.log('liked', liked)\r\n                                    database.ref(`/posts/${post.postID}/liked`).set(liked);\r\n                                    updateValues();\r\n                                }\r\n                                })\r\n                            }}\r\n                        >\r\n                            <ThumbUpIcon className='h-6 w-6' \r\n                                \r\n                                fill={\r\n                                \r\n                                classNames(post.liked != undefined ?\r\n                                Object.values(post.liked).includes(user.citizenID) ? '#facc15' : 'white'\r\n                                : 'white')\r\n                            }/>\r\n                            <p className='font-semibold'>{post.liked != undefined ? Object.values(post.liked).length : 0}</p>\r\n                        </button>\r\n                        <button className='flex gap-1 float-left hover:bg-gray-200 rounded p-1 mx-1'\r\n                            onClick={event=>{\r\n                                event.preventDefault();\r\n                                database.ref(`posts/${post.postID}`).get().then(postSnapshot => {\r\n                                    const post = postSnapshot.val();\r\n                                    var disliked = post.disliked != undefined ? [...Object.values(post.disliked)] : [];\r\n                                var liked = post.liked != undefined ? [...Object.values(post.liked)] : [];\r\n                                if(!disliked.includes(user.citizenID)){\r\n                                    disliked.push(user.citizenID);\r\n                                    if(liked.includes(user.citizenID)){\r\n                                        liked.splice(liked.indexOf(user.citizenID), 1);\r\n                                    }\r\n                                database.ref(`/posts/${post.postID}/disliked`).set(\r\n                                    disliked\r\n                                );\r\n                                database.ref(`/posts/${post.postID}/liked`).set(liked);\r\n                                updateValues();\r\n                                if(post.poster.citizenID != user.citizenID){\r\n                                    database.ref(`/citizens/${post.poster.citizenID}/notifications`).get().then(notificationsSnapshot => {\r\n                                        const notifications = notificationsSnapshot.val() != undefined ? Object.values(notificationsSnapshot.val()) : [];\r\n                                        notifications.push({\r\n                                            dateAdded: `${getDate()}, ${getYear()}`,\r\n                                            timeAdded: getTime(),\r\n                                            action: 'disliked',\r\n                                            actor: {\r\n                                                name: user.name,\r\n                                                citizenID: user.citizenID\r\n                                            },\r\n                                            post: {postID: post.postID,\r\n                                                text: post.text},\r\n                                            seen: false,\r\n                                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                                        });\r\n                                        database.ref(`/citizens/${post.poster.citizenID}/notifications`).set(notifications);\r\n                                    })}\r\n                                } else {\r\n                                    disliked.splice(disliked.indexOf(user.citizenID), 1);\r\n                                    //console.log('liked', disliked)\r\n                                    database.ref(`/posts/${post.postID}/disliked`).set(disliked);\r\n                                    updateValues();\r\n                                }\r\n                                })\r\n                                \r\n                                \r\n                            }}\r\n                        >\r\n                            <ThumbDownIcon className='h-6 w-6' \r\n                                \r\n                                fill={\r\n                                \r\n                                classNames(post.disliked != undefined ?\r\n                                Object.values(post.disliked).includes(user.citizenID) ? '#facc15' : 'white'\r\n                                : 'white')\r\n                            }/>\r\n                            <p className='font-semibold'>{post.disliked != undefined ? Object.values(post.disliked).length : 0}</p>\r\n                        </button>\r\n                        <a href={`/post`} className='p-1 gap-1 float-left rounded flex hover:bg-gray-200' onClick={()=>{\r\n                            localStorage.setItem('selectedPost', JSON.stringify(post));\r\n                        }}>\r\n                            <ChatIcon className='h-6 w-6' fill='white'/>\r\n                            <p className='font-semibold'>{post.comments != undefined ? Object.values(post.comments).length : 0}</p>\r\n                        </a>\r\n                        {\r\n                            post.poster.citizenID == user.citizenID &&\r\n                            <button className='font-semibold bg-yellow-300 hover:bg-yellow-400 rounded shadow flex float-right'\r\n                                onClick={event=>{\r\n                                    event.preventDefault();\r\n                                    database.ref(`/posts/${post.postID}`).set(null);\r\n                                    updateValues();\r\n                                }}\r\n                                >\r\n                                <div className='px-2 py-1 flex'>\r\n                                <XCircleIcon className='h-6 w-6'/>\r\n                                DELETE\r\n                                </div>\r\n                            </button>\r\n                        }\r\n                    </div>\r\n                    {post.comments != undefined &&\r\n                    <div className='p-2'>\r\n                        {\r\n                            Object.values(post.comments).sort((comment1, comment2) => {\r\n                                return comment2.ssre - comment1.ssre;\r\n                            }).slice(0, 2).map(comment => {\r\n                                return (<div className='flex gap-3'>\r\n                                    <div className='font-bold flex-none'>{comment.poster.name}</div>\r\n                                    <p className='truncate'>{comment.text}</p>\r\n                                </div>\r\n                                )\r\n                            })\r\n                        }\r\n                        {\r\n                            Object.values(post.comments).length > 2 &&\r\n                            <div className='text-base font-semibold pt-1'>{Object.values(post.comments).length - 2} more...</div>\r\n                        }\r\n                    </div>}\r\n                    </a>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    function Transfer({transfer}){\r\n    \r\n        return(\r\n            <div className='rounded bg-white text-sm shadow'>\r\n                <div className='w-full'>\r\n                <p className='pl-2 pt-2 font-semibold text-gray-700'>{transfer.date} at {transfer.time}</p>\r\n                <p className='pl-2 pt-2 font-semibold text-gray-700'>{transfer.transferID} {transfer.ssre}</p>\r\n                </div>\r\n                <div className='grid grid-cols-4 gap-y-2 lg:gap-3 p-2'>\r\n                {transfer.type == \"Incoming\" ?\r\n                <div className='col-span-4 lg:col-span-2 grid grid-cols-2'>\r\n                            <div className='col-span-1'>\r\n                                <p className='font-semibold'>Amount</p>\r\n                                <p className='text-green-700'>+{transfer.amount} [M]</p>\r\n                            </div>\r\n                            <div className='col-span-1'>\r\n                                <p className='font-semibold'>Sender</p>\r\n                                <p className=''>{transfer.senderName}</p>\r\n                            </div>\r\n                            </div>\r\n                :    \r\n                <div className='col-span-4 lg:col-span-2 grid grid-cols-2'>\r\n                <div className='col-span-1'>\r\n                    <p className='font-semibold'>Amount</p>\r\n                    <p className='text-red-700'>-{transfer.amount} [M]</p>\r\n                </div>\r\n                <div className='col-span-1'>\r\n                    <p className='font-semibold'>Receiver</p>\r\n                    <p className=''>{transfer.receiverName}</p>\r\n                </div>\r\n                </div>\r\n                        }\r\n                <div className='col-span-2 lg:col-span-1'>\r\n                                <p className='font-semibold'>Reason</p>\r\n                                <p className=''>{transfer.reason}</p>\r\n                            </div>\r\n                <div className='col-span-2 lg:col-span-1'>\r\n                                <p className='font-semibold'>Resulting Balance</p>\r\n                                <p className=''>{transfer.resultingBalance} [M]</p>\r\n                            </div>\r\n                        </div>\r\n                </div>\r\n        )\r\n    \r\n}\r\nfunction CriminalCharge({charge}){\r\n    \r\n    return(\r\n        <div className='rounded bg-white shadow text-sm break-words'>\r\n        <div className='w-full'>\r\n        <p className='pl-2 pt-2 font-semibold text-gray-700'>{charge.date} at {charge.time}</p>\r\n        <p className='pl-2 pt-2 font-semibold text-gray-700'>{charge.chargeID} {charge.ssre}</p>\r\n        </div>\r\n        \r\n            {charge.verdict == \"Guilty\" ?\r\n            <div className='grid grid-cols-2 lg:grid-cols-3 p-2 gap-x-4 gap-y-2'>\r\n            <div className='col-span-1'>\r\n            <p className='font-semibold'>Prosecutor</p>\r\n            <p className=''>{charge.prosecutor.name}</p>\r\n            <p className=''>{censor(charge.prosecutor.citizenID)}</p>\r\n        </div>\r\n        <div className='col-span-1'>\r\n            <p className='font-semibold'>Defendant</p>\r\n            <p className=''>{charge.defendant.name}</p>\r\n            <p className=''>{censor(charge.defendant.citizenID)}</p>\r\n        </div>\r\n        <div className='col-span-2 lg:col-span-1'>\r\n                    <p className='font-semibold'>Crime</p>\r\n                    <p className=''>{charge.crime}</p>\r\n                    </div>\r\n        <div className='col-span-2 lg:col-span-1'>\r\n                    <p className='font-semibold'>Verdict</p>\r\n                    <p className='text-red-700'>Guilty</p>\r\n                    </div>\r\n        \r\n\r\n                    \r\n                    <div className='col-span-2 lg:col-span-1'>\r\n                        <p className='font-semibold'>Reason for Verdict</p>\r\n                        <p className=''>{charge.reasonForVerdict}</p>\r\n                    </div>\r\n                    <div className='col-span-2 lg:col-span-1'>\r\n                    <p className='font-semibold'>Sentence</p>\r\n                    <p className=''>{charge.punishment}</p>\r\n                    </div>\r\n        </div> :\r\n        <div className='grid grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-2 p-2'>\r\n        <div className='col-span-1'>\r\n        <p className='font-semibold'>Prosecutor</p>\r\n        <p className=''>{charge.prosecutor.name}</p>\r\n        <p className=''>{censor(charge.prosecutor.citizenID)}</p>\r\n    </div>\r\n    <div className='col-span-1'>\r\n        <p className='font-semibold'>Defendant</p>\r\n        <p className=''>{charge.defendant.name}</p>\r\n        <p className=''>{censor(charge.defendant.citizenID)}</p>\r\n    </div>\r\n    <div className='col-span-2 lg:col-span-1'>\r\n                <p className='font-semibold'>Alleged Crime</p>\r\n                <p className=''>{charge.allegedCrime}</p>\r\n                </div>\r\n    <div className='col-span-2 lg:col-span-1'>\r\n                <p className='font-semibold'>Verdict</p>\r\n                <p className='text-green-700'>Not Guilty</p>\r\n                </div>\r\n                <div className='col-span-2'>\r\n                    <p className='font-semibold'>Reason for Verdict</p>\r\n                    <p className=''>{charge.reasonForVerdict}</p>\r\n                </div>\r\n               \r\n                </div>\r\n    \r\n            }\r\n</div>\r\n    )\r\n\r\n}\r\n\r\n    function Property({property}){\r\n        return(\r\n            <div className={classNames('m-2')}>\r\n                                            <div className='w-full bg-white border-2 shadow border-gray-500 grid grid-cols-3'>\r\n                                                <div className='col-span-3 p-2 flow-root'>\r\n                                                    <div className='float-left'>\r\n                                                    <p className={classNames('text-xl', 'font-bold')}>{property.address}</p>\r\n                                                    <p className={classNames('text-sm', 'uppercase font-semibold')}>{property.type}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                                                                      \r\n                                                <div className='col-span-1 p-2'>\r\n                                                    <p className='font-semibold'>Property ID</p>\r\n                                                    <p>{property.propertyID}</p>\r\n                                                </div>\r\n                                                <div className='col-span-1 p-2'>\r\n                                                    <p className='font-semibold'>Date Property Added</p>\r\n                                                    <p>{property.dateAdded}</p>\r\n                                                </div>\r\n                                                <div className='col-span-1 p-2'>\r\n                                                    <p className='font-semibold'>Date Property Given</p>\r\n                                                    <p>{property.owner.dateAdded}</p>\r\n                                                </div>\r\n                                                {property.type == 'Business' &&\r\n                                                <div className='col-span-3 p-2'>\r\n                                                    <div>\r\n                                                        <p className='font-semibold'>Business Name</p>\r\n                                                        <p>{property.business != undefined ? property.business.name : 'None yet'}</p>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <p className='font-semibold pt-3'>Business Description</p>\r\n                                                        <p>{property.business != undefined ? property.business.description : 'None yet'}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                                }\r\n                                            </div>\r\n                                            </div>\r\n        )\r\n    }\r\n\r\n    function License({license}){\r\n        return(\r\n            <div className='border-2 border-gray-500 bg-white shadow p-2 m-2'>\r\n                <div className='flow-root'>\r\n                    <div className='float-left'>\r\n                        <p className='text-lg font-semibold'>{license.title}</p>\r\n                        <p className='font-semibold text-gray-700'>{license.licenseID}</p>\r\n                    </div>\r\n                    <p className='float-right font-bold text-xl'>{license.price} [M]</p>\r\n                </div>\r\n                <div className='flow-root'>\r\n                    <p className='pt-2 pr-2 font-semibold float-left'>{license.permissions}</p>\r\n                    \r\n                    <div className='flex float-right'>\r\n                        <CheckCircleIcon className='w-7 h-7'/>\r\n                    <p className='float-right font-bold px-1 text-lg'>Purchased {(selectedCitizen.licenses[license.licenseID]).datePurchased}</p>\r\n                    </div>\r\n                    \r\n                    \r\n                    \r\n                    \r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    \r\n}\r\n\r\nexport default Profile;","import { useState, useEffect } from \"react\";\r\nimport { CheckCircleIcon } from \"@heroicons/react/outline\";\r\n\r\nconst Licenses = ({user, setUser, database, getDate, getYear, getTime}) => {\r\n\r\n    const rushingtonEpoch = 1522648800;\r\n\r\n    const [licenses, setLicenses] = useState([]);\r\n\r\n    useEffect(setValues, []);\r\n\r\n    function setValues(){\r\n        database.ref('/licenses').get().then(licensesSnapshot => {\r\n            if(licensesSnapshot.val() != undefined){\r\n                setLicenses(Object.values(licensesSnapshot.val()));\r\n            }\r\n        });\r\n        database.ref(`/citizens/${user.citizenID}`).get().then(userSnapshot => {\r\n            console.log('user retrieved', userSnapshot.val());\r\n            if(userSnapshot.val() != undefined){\r\n                setUser(userSnapshot.val());\r\n            }\r\n        })\r\n    }\r\n\r\n    function onClickBuyLicense(license){\r\n        const addedLicense = JSON.parse(JSON.stringify(license));\r\n        addedLicense.datePurchased = `${getDate()}, ${getYear()}`\r\n        if(Number(user.meldas) >= Number(license.price)){\r\n            database.ref(`/citizens/${user.citizenID}/licenses/${license.licenseID}`).set(addedLicense);\r\n            database.ref(`/licenses/${license.licenseID}/owners/${user.citizenID}`).set({\r\n                citizenID: user.citizenID,\r\n                datePurchased: `${getDate()}, ${getYear()}`,\r\n            })\r\n            const userResultingBalance = Number(user.meldas) - Number(license.price);\r\n            const transferID = generateID('MT');\r\n            database.ref(`/government/meldas`).get().then(meldasSnapshot => {\r\n                const governmentMeldas = Number(meldasSnapshot.val());\r\n                const governmentResultingBalance = Number(governmentMeldas) + Number(license.price);\r\n                database.ref('/government/meldas').set(governmentResultingBalance);\r\n                database.ref(`/citizens/${user.citizenID}/meldas`).set(Number(userResultingBalance));\r\n            database.ref(`/citizens/${user.citizenID}/transfers/${transferID}`).set(\r\n                {\r\n                    transferID: transferID,\r\n                    date: `${getDate()}, ${getYear()}`,\r\n                    time: getTime(),\r\n                    ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                    amount: Number(license.price),\r\n                    receiverName: 'Rushington Government',\r\n                    type: \"Outgoing\",\r\n                    reason: `Purchased ${license.title} ${license.licenseID}`,\r\n                    resultingBalance: userResultingBalance\r\n                }\r\n            );\r\n            database.ref(`/government/transfers/${transferID}`).set(\r\n                {\r\n                    transferID: transferID,\r\n                    date: `${getDate()}, ${getYear()}`,\r\n                    time: getTime(),\r\n                    ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                    amount: Number(license.price),\r\n                    senderName: user.name,\r\n                    senderCitizenID: user.citizenID,\r\n                    type: \"Incoming\",\r\n                    reason: `Purchased ${license.title} ${license.licenseID}`,\r\n                    resultingBalance: governmentResultingBalance\r\n                }\r\n            );\r\n            setValues();\r\n            }\r\n            )\r\n        }\r\n    }\r\n\r\n    function generateID(prefix){\r\n        var id = `${prefix}-`;\r\n        for(var i = 0; i < 5; i++){\r\n            id = id + String(Math.floor(Math.random()*10));\r\n        }\r\n        return(id);\r\n    }\r\n\r\n    function userOwnsLicense(license){\r\n        userOwnsLicense = false;\r\n        if(user.licenses != undefined){\r\n            Object.values(user.licenses).forEach(userLicense => {\r\n                if(userLicense.licenseID == license.licenseID){\r\n                    userOwnsLicense = true;\r\n                }\r\n            });\r\n            return userOwnsLicense;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n    }\r\n\r\n    return(\r\n        <div className='mx-1 lg:mx-10 my-1 lg:my-5'>\r\n            <div className='py-2 w-full flow-root'>\r\n                <p className='float-left text-4xl font-bold'>Licenses</p>\r\n                <div className='float-right'>\r\n                <p className='font-semibold text-right text-xl'>Current Balance</p>\r\n                <p className='text-right text-xl font-bold'>{user.meldas} [M]</p>\r\n                </div>\r\n            </div>\r\n            <div className='px-2 py-1 lg:px-6 lg:py-3 rounded bg-gray-100'>\r\n                {licenses.map(license => {\r\n                    return(\r\n                        <div className='lg:py-3 py-1'>\r\n                            <License license={license}/>\r\n                        </div>\r\n                    )\r\n                })}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    function License({license}){\r\n        return(\r\n            <div className='border-2 border-gray-500 bg-white shadow p-2'>\r\n                <div className='flow-root'>\r\n                    <div className='float-left'>\r\n                        <p className='text-lg font-semibold'>{license.title}</p>\r\n                        <p className='font-semibold text-gray-700'>{license.licenseID}</p>\r\n                    </div>\r\n                    <p className='float-right font-bold text-xl'>{license.price} [M]</p>\r\n                </div>\r\n                <div className='lg:flow-root'>\r\n                    <p className='pt-2 pr-2 font-semibold lg:float-left'>{license.permissions}</p>\r\n                    {user.licenses != undefined && Object.keys(user.licenses).includes(license.licenseID) ?\r\n                    <div className='flex lg:float-right'>\r\n                        <CheckCircleIcon className='w-7 h-7'/>\r\n                    <p className='lg:float-right font-bold px-1 text-lg'>Purchased {(user.licenses[license.licenseID]).datePurchased}</p>\r\n                    </div>\r\n                    :\r\n                    <button className={classNames(\r\n                        Number(user.meldas) < Number(license.price) ? 'bg-yellow-200 text-gray-400' : 'bg-yellow-300 hover:bg-yellow-400',\r\n                        'font-semibold shadow rounded p-2 lg:float-right w-full mt-2 lg:mt-0 lg:w-52 text-lg')}\r\n                        onClick={()=>{onClickBuyLicense(license)}}\r\n                    >\r\n                        {user.meldas < license.price ? \"CAN'T AFFORD THIS\" : 'BUY'}\r\n                    </button>\r\n                    }\r\n                    \r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Licenses;","import { useState, useEffect } from \"react\";\r\nimport { ThumbDownIcon, ThumbUpIcon, ChatIcon, XCircleIcon, PlusCircleIcon, XIcon, NewspaperIcon, SpeakerphoneIcon, ScaleIcon, BellIcon, ReplyIcon } from \"@heroicons/react/outline\";\r\n\r\nconst PostPage = ({selectedSection, setSelectedSection, selectedPost, setSelectedPost, notifications, setValues, user, database, getTime, getDate, getYear}) => {\r\n\r\n    const navigationSections = [\r\n        {sectionName: 'Public Posts', sectionSelected: selectedSection == 'Public Posts', icon: NewspaperIcon},\r\n        {sectionName: 'Government Announcements', sectionSelected: selectedSection == 'Government Announcements', icon: SpeakerphoneIcon},\r\n        {sectionName: 'Criminal Charges', sectionSelected: selectedSection == 'Criminal Charges', icon: ScaleIcon},\r\n        {sectionName: 'Notifications', sectionSelected: selectedSection == 'Notifications', icon: BellIcon},\r\n    ]\r\n\r\n    useEffect(updatePost, []);\r\n    const rushingtonEpoch = 1522648800;\r\n\r\n    function onClickPostComment(commentText){\r\n        if(commentText != undefined && commentText != ''){\r\n        database.ref(`/posts/${selectedPost.postID}/comments`).get().then(commentsSnapshot => {\r\n            const commentID = generateCommentID();\r\n            const newComment = {\r\n                commentID: commentID,\r\n                text: commentText,\r\n                poster: {\r\n                    name: user.name,\r\n                    citizenID: user.citizenID\r\n                },\r\n                datePosted: `${getDate()}, ${getYear()}`,\r\n                timePosted: getTime(),\r\n                ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n            }\r\n            database.ref(`/posts/${selectedPost.postID}/comments/${commentID}`).set(newComment);\r\n            updatePost();\r\n            if(selectedPost.poster.citizenID != user.citizenID){\r\n                database.ref(`/citizens/${selectedPost.poster.citizenID}/notifications`).get().then(notificationsSnapshot => {\r\n                    const notifications = notificationsSnapshot.val() != undefined ? Object.values(notificationsSnapshot.val()) : [];\r\n                    notifications.push({\r\n                        dateAdded: `${getDate()}, ${getYear()}`,\r\n                        timeAdded: getTime(),\r\n                        action: 'commented',\r\n                        object: 'post',\r\n                        commentText: commentText,\r\n                        actor: {\r\n                            name: user.name,\r\n                            citizenID: user.citizenID\r\n                        },\r\n                        post: {postID: selectedPost.postID,\r\n                            text: selectedPost.text},\r\n                        seen: false,\r\n                        ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                    });\r\n                    database.ref(`/citizens/${selectedPost.poster.citizenID}/notifications`).set(notifications);\r\n                })}\r\n        })\r\n        }\r\n    }\r\n\r\n    function generateCommentID(){\r\n        var postID = 'CO-'\r\n        for(var i = 0; i < 5; i++){\r\n            postID = postID + String(Math.floor(Math.random()*10));\r\n        }\r\n        return(postID);\r\n    }\r\n\r\n    function updatePost(){\r\n        database.ref(`/posts/${selectedPost.postID}`).get().then(postSnapshot => {\r\n            setSelectedPost(postSnapshot.val());\r\n            localStorage.setItem('selectedPost', JSON.stringify(postSnapshot.val()));\r\n        })\r\n    }\r\n\r\n    function unseenNotifications(){\r\n        var unseenNotificationsValue = false;\r\n        if(user.notifications != undefined){\r\n        Object.values(user.notifications).forEach(notification => {\r\n            if(!notification.seen){\r\n                unseenNotificationsValue = true;\r\n            }\r\n        });}\r\n        return unseenNotificationsValue;\r\n    }\r\n\r\n    function makeReadableTimeAgo(post){\r\n        const secondsSincePost = Math.round(((new Date()).getTime()/1000)-rushingtonEpoch) - post.ssre;\r\n        if(secondsSincePost > 2591999){\r\n            return(`${post.datePosted}`);\r\n        } else if(secondsSincePost > 307199){\r\n            const yearsAgo = toFixed(secondsSincePost/307200, 0);\r\n            return(`${yearsAgo} Rushington ${yearsAgo != 1 ? 'years' : 'year'} ago`);\r\n        } else if(secondsSincePost > 38399){\r\n            const monthsAgo = toFixed(secondsSincePost/38400, 0);\r\n            return(`${monthsAgo} Rushington ${monthsAgo != 1 ? 'months' : 'month'} ago`);\r\n        } else if(secondsSincePost > 1199){\r\n            const daysAgo = toFixed(Math.round(((new Date()).getTime()/1000)-rushingtonEpoch)/1200, 0) - \r\n                toFixed(post.ssre/1200, 0);\r\n            return(`${daysAgo} Rushington ${daysAgo != 1 ? 'days' : 'day'} ago`);\r\n        } else if(secondsSincePost > 59){\r\n            const minutesSincePost = toFixed(secondsSincePost/60, 0);\r\n            return(`${minutesSincePost} ${minutesSincePost != 1 ? 'minutes' : 'minute'} ago`);\r\n        } else {\r\n            return(`${secondsSincePost} ${secondsSincePost != 1 ? 'seconds' : 'second'} ago`);\r\n        }\r\n    }\r\n\r\n    function toFixed(num, fixed) {\r\n        var re = new RegExp('^-?\\\\d+(?:\\.\\\\d{0,' + (fixed || -1) + '})?');\r\n        return num.toString().match(re)[0];\r\n    }\r\n\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n    }\r\n\r\n    function censor(citizenID){\r\n        return(user.citizenID != citizenID ? `CI-***${citizenID.substring(6, 8)}` : citizenID);\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            <div className='grid grid-cols-4 gap-5'>\r\n                <div className='col-span-4 lg:col-span-1 lg:h-40 lg:sticky lg:top-6'>\r\n                    \r\n                    {navigationSections.map(navigationSection => {\r\n                        const Icon = navigationSection.icon;\r\n                        return(\r\n                        \r\n                        <div className='flex-auto lg:flex-none'>\r\n                            <button\r\n                                onClick={()=>{setSelectedSection(navigationSection.sectionName);\r\n                                    localStorage.setItem('selectedSection', navigationSection.sectionName);\r\n                                    if(navigationSection.sectionName == 'Notifications'){\r\n                                        database.ref(`/citizens/${user.citizenID}/notifications`).get().then(notificationsSnapshot => {\r\n                                            if(notificationsSnapshot.val() != undefined){\r\n                                                const notifications = Object.values(notificationsSnapshot.val());\r\n                                                notifications.forEach(notification => {\r\n                                                    notification.seen = true;\r\n                                                });\r\n                                                database.ref(`/citizens/${user.citizenID}/notifications`).set(notifications);\r\n                                                user.notifications = notifications;\r\n                                                localStorage.setItem('user', JSON.stringify(user));\r\n                                            }\r\n                                        })\r\n                                    }\r\n                                    window.location.href = '/';\r\n                                }}\r\n                                className='w-full'\r\n                            >\r\n                        <div\r\n                            className={classNames(navigationSection.sectionSelected ? 'bg-gray-200' : 'bg-white hover:bg-gray-100',\r\n                                'rounded p-2 w-full text-center lg:text-left'\r\n                            )}\r\n                        >\r\n                            <div className='flex gap-2 justify-center lg:justify-start'>\r\n                                <Icon className='h-6 w-6'\r\n                                    fill={classNames(navigationSection.sectionName == 'Notifications' && unseenNotifications() ? '#facc15' : 'white')}\r\n                                />\r\n                            <p className='text-gray-800 font-semibold'>{navigationSection.sectionName}</p>\r\n                            </div></div>\r\n                            </button>\r\n                        </div>\r\n                        )\r\n                    })}\r\n                    \r\n                </div>\r\n                <div className='col-span-4 lg:col-span-3 bg-gray-100 rounded'>\r\n                    <div className=''>\r\n                        <p className='font-bold py-1 px-2 bg-gray-100 border-b border-gray-400 text-xl'>{selectedPost.poster.name}'s Post</p>\r\n                        <Post/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\nfunction Post({}){\r\n    const [commentText, setCommentText] = useState();\r\n    console.log(selectedPost.postID)\r\n    return(\r\n        <div className='border-b border-l border-r border-gray-400 bg-white shadow'>\r\n            <div className='flow-root'>\r\n            <button\r\n                        onClick={(event) => {\r\n                            event.preventDefault();\r\n                            database.ref(`/citizens/${selectedPost.poster.citizenID}`).get().then(citizenSnapshot => {\r\n                                localStorage.setItem('selectedCitizen', JSON.stringify(citizenSnapshot.val()));\r\n                                window.location.href = '/profile';\r\n                            })\r\n                        }}\r\n                     className='px-1 m-1 text-gray-700 text-left font-semibold float-left hover:bg-gray-100 rounded'>\r\n                     <p className=''>{selectedPost.poster.citizenID == user.citizenID ? 'Me' : selectedPost.poster.name}</p>\r\n                     <p className='text-sm'>{censor(selectedPost.poster.citizenID)}</p>\r\n                     </button>\r\n                     <div className='float-right p-2'>\r\n                    <p className='text-right text-gray-700 font-semibold uppercase text-sm'>{makeReadableTimeAgo(selectedPost)}</p>\r\n                    </div>\r\n            </div>\r\n                <div className='px-3 py-1'>\r\n                    <p className='text-lg font-semibold py-2 px-2 border-2 border-gray-400 shadow-sm'>\r\n                        {selectedPost.text}\r\n                    </p>\r\n                </div>\r\n                <div className='w-full flow-root pb-2 pt-5 px-2 border-b border-gray-500'>\r\n                    <button className='flex gap-1 float-left hover:bg-gray-200 rounded p-1'\r\n                        onClick={()=>{\r\n                            database.ref(`/posts/${selectedPost.postID}`).get().then(postSnapshot => {\r\n                                const post = postSnapshot.val();\r\n                                var liked = post.liked != undefined ? [...Object.values(post.liked)] : [];\r\n                                var disliked = post.disliked != undefined ? [...Object.values(post.disliked)] : [];\r\n                                if(!liked.includes(user.citizenID)){\r\n                                    liked.push(user.citizenID);\r\n                                    if(disliked.includes(user.citizenID)){\r\n                                        disliked.splice(disliked.indexOf(user.citizenID), 1);\r\n                                    }\r\n                                database.ref(`/posts/${post.postID}/liked`).set(\r\n                                    liked\r\n                                );\r\n                                database.ref(`/posts/${post.postID}/disliked`).set(\r\n                                    disliked\r\n                                );\r\n                                updatePost();\r\n                                if(post.poster.citizenID != user.citizenID){\r\n                                database.ref(`/citizens/${post.poster.citizenID}/notifications`).get().then(notificationsSnapshot => {\r\n                                    const notifications = notificationsSnapshot.val() != undefined ? Object.values(notificationsSnapshot.val()) : [];\r\n                                    notifications.push({\r\n                                        dateAdded: `${getDate()}, ${getYear()}`,\r\n                                        timeAdded: getTime(),\r\n                                        action: 'liked',\r\n                                        object: 'post',\r\n                                        actor: {\r\n                                            name: user.name,\r\n                                            citizenID: user.citizenID\r\n                                        },\r\n                                        post: {postID: post.postID,\r\n                                            text: post.text},\r\n                                        seen: false,\r\n                                        ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                                    });\r\n                                    database.ref(`/citizens/${post.poster.citizenID}/notifications`).set(notifications);\r\n                                })}\r\n                                } else {\r\n                                    liked.splice(liked.indexOf(user.citizenID), 1);\r\n                                    console.log('liked', liked)\r\n                                    database.ref(`/posts/${post.postID}/liked`).set(liked);\r\n                                    updatePost();\r\n                                }\r\n                                })\r\n                        }}\r\n                    >\r\n                        <ThumbUpIcon className='h-6 w-6' \r\n                            \r\n                            fill={\r\n                            \r\n                            classNames(selectedPost.liked != undefined ?\r\n                            Object.values(selectedPost.liked).includes(user.citizenID) ? '#facc15' : 'white'\r\n                            : 'white')\r\n                        }/>\r\n                        <p className='font-semibold'>{selectedPost.liked != undefined ? Object.values(selectedPost.liked).length : 0}</p>\r\n                    </button>\r\n                    <button className='flex gap-1 float-left hover:bg-gray-200 rounded p-1 mx-1'\r\n                        onClick={()=>{\r\n                            database.ref(`/posts/${selectedPost.postID}`).get().then(postSnapshot => {\r\n                                const post = postSnapshot.val();\r\n                                var disliked = post.disliked != undefined ? [...Object.values(post.disliked)] : [];\r\n                                var liked = post.liked != undefined ? [...Object.values(post.liked)] : [];\r\n                                if(!disliked.includes(user.citizenID)){\r\n                                    disliked.push(user.citizenID);\r\n                                    if(liked.includes(user.citizenID)){\r\n                                        liked.splice(liked.indexOf(user.citizenID), 1);\r\n                                    }\r\n                                database.ref(`/posts/${post.postID}/disliked`).set(\r\n                                    disliked\r\n                                );\r\n                                database.ref(`/posts/${post.postID}/liked`).set(liked);\r\n                                updatePost();\r\n                                if(post.poster.citizenID != user.citizenID){\r\n                                    database.ref(`/citizens/${post.poster.citizenID}/notifications`).get().then(notificationsSnapshot => {\r\n                                        const notifications = notificationsSnapshot.val() != undefined ? Object.values(notificationsSnapshot.val()) : [];\r\n                                        notifications.push({\r\n                                            dateAdded: `${getDate()}, ${getYear()}`,\r\n                                            timeAdded: getTime(),\r\n                                            action: 'disliked',\r\n                                            object: 'post',\r\n                                            actor: {\r\n                                                name: user.name,\r\n                                                citizenID: user.citizenID\r\n                                            },\r\n                                            post: {postID: post.postID,\r\n                                                text: post.text},\r\n                                            seen: false,\r\n                                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                                        });\r\n                                        database.ref(`/citizens/${post.poster.citizenID}/notifications`).set(notifications);\r\n                                    })}\r\n                                } else {\r\n                                    disliked.splice(disliked.indexOf(user.citizenID), 1);\r\n                                    //console.log('liked', disliked)\r\n                                    database.ref(`/posts/${post.postID}/disliked`).set(disliked);\r\n                                    updatePost();\r\n                                }\r\n                                })\r\n                            \r\n                            \r\n                        }}\r\n                    >\r\n                        <ThumbDownIcon className='h-6 w-6' \r\n                            \r\n                            fill={\r\n                            \r\n                            classNames(selectedPost.disliked != undefined ?\r\n                            Object.values(selectedPost.disliked).includes(user.citizenID) ? '#facc15' : 'white'\r\n                            : 'white')\r\n                        }/>\r\n                        <p className='font-semibold'>{selectedPost.disliked != undefined ? Object.values(selectedPost.disliked).length : 0}</p>\r\n                    </button>\r\n                    <div className='p-1 gap-1 float-left rounded flex'>\r\n                            <ChatIcon className='h-6 w-6'/>\r\n                            <p className='font-semibold'>{selectedPost.comments != undefined ? Object.values(selectedPost.comments).length : 0}</p>\r\n                        </div>\r\n                    {\r\n                        selectedPost.poster.citizenID == user.citizenID &&\r\n                        <button className='font-semibold bg-yellow-300 hover:bg-yellow-400 rounded shadow flex float-right'\r\n                            onClick={()=>{\r\n                                database.ref(`/posts/${selectedPost.postID}`).set(null);\r\n                                updatePost();\r\n                            }}\r\n                            >\r\n                            <div className='px-2 py-1 flex'>\r\n                            <XCircleIcon className='h-6 w-6'/>\r\n                            DELETE\r\n                            </div>\r\n                        </button>\r\n                    }\r\n                </div>\r\n                <div className='p-2 bg-gray-100'>\r\n                    <p className='font-semibold text-lg pb-2 text-gray-700'>Comments</p>\r\n                        <textarea className='rounded resize-none bg-white focus:outline-none h-16 w-full p-2 bg-gray-100 border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700'\r\n                            placeholder='Write comment...'\r\n                            value={commentText}\r\n                            onKeyDown={event => {\r\n                                if(event.code === 'Enter'){\r\n                                    onClickPostComment(commentText);\r\n                                }\r\n                            }}\r\n                            \r\n                            onChange={event => {\r\n                                        if(!event.target.value.includes('\\n')){\r\n                                            setCommentText(event.target.value);\r\n                                        }\r\n                            }}\r\n                        ></textarea>\r\n                        <div className='flex justify-center w-full p-1'>\r\n                        <button \r\n                                    onClick={()=>{onClickPostComment(commentText)}}\r\n                                    className={classNames(\r\n                                        commentText != '' && commentText != undefined ? 'bg-yellow-300 hover:bg-yellow-400' : 'bg-yellow-200 text-gray-400',\r\n                                        'w-64 flex text-md justify-center py-1 font-semibold rounded shadow')}>\r\n                                            <div className='flex justify-center'>\r\n                                    <PlusCircleIcon className='w-6 h-6'/>POST COMMENT\r\n                                    \r\n                                    </div>\r\n                                    </button>\r\n                            </div>\r\n\r\n                        {selectedPost.comments != undefined ?\r\n                        <div className='pt-8'>\r\n                            {Object.values(selectedPost.comments).sort((comment1, comment2) => {\r\n                                return comment2.ssre - comment1.ssre;\r\n                            }).map(comment => {\r\n                                return(\r\n                                <div className='p-1 mt-2 bg-white rounded shadow'>\r\n                                    <div className='flow-root w-full pb-1'>\r\n                                    <button\r\n                        onClick={(event) => {\r\n                            event.preventDefault();\r\n                            database.ref(`/citizens/${comment.poster.citizenID}`).get().then(citizenSnapshot => {\r\n                                localStorage.setItem('selectedCitizen', JSON.stringify(citizenSnapshot.val()));\r\n                                window.location.href = '/profile';\r\n                            })\r\n                        }}\r\n                     className='text-gray-700 p-1 text-left font-semibold float-left hover:bg-gray-100 rounded'>\r\n                     <p className=''>{comment.poster.citizenID == user.citizenID ? 'Me' : comment.poster.name}</p>\r\n                     <p className='text-sm'>{censor(comment.poster.citizenID)}</p>\r\n                     </button>\r\n                                    <div className='float-right'>\r\n                                    <div className='float-right px-1'>\r\n                                        <p className='text-right text-gray-700 font-semibold uppercase text-sm'>{makeReadableTimeAgo(comment)}</p>\r\n                                    </div>\r\n                                    </div>\r\n                                    </div>\r\n                                    <p className='p-2 mx-2 my-1 bg-white border-2 border-gray-400 shadow-sm font-semibold'>{comment.text}</p>\r\n                                    <div className='flow-root m-0.5 pt-2'>\r\n                                    <button className='flex gap-1 float-left hover:bg-gray-200 rounded p-1'\r\n                        onClick={()=>{\r\n                            database.ref(`/posts/${selectedPost.postID}/comments/${comment.commentID}`).get().then(commentSnapshot => {\r\n                                const comment = commentSnapshot.val();\r\n                                var liked = comment.liked != undefined ? [...Object.values(comment.liked)] : [];\r\n                                var disliked = comment.disliked != undefined ? [...Object.values(comment.disliked)] : [];\r\n                                if(!liked.includes(user.citizenID)){\r\n                                    liked.push(user.citizenID);\r\n                                    if(disliked.includes(user.citizenID)){\r\n                                        disliked.splice(disliked.indexOf(user.citizenID), 1);\r\n                                    }\r\n                                database.ref(`/posts/${selectedPost.postID}/comments/${comment.commentID}/liked`).set(\r\n                                    liked\r\n                                );\r\n                                database.ref(`/posts/${selectedPost.postID}/comments/${comment.commentID}/disliked`).set(\r\n                                    disliked\r\n                                );\r\n                                updatePost();\r\n                                if(comment.poster.citizenID != user.citizenID){\r\n                                database.ref(`/citizens/${comment.poster.citizenID}/notifications`).get().then(notificationsSnapshot => {\r\n                                    const notifications = notificationsSnapshot.val() != undefined ? Object.values(notificationsSnapshot.val()) : [];\r\n                                    notifications.push({\r\n                                        dateAdded: `${getDate()}, ${getYear()}`,\r\n                                        timeAdded: getTime(),\r\n                                        action: 'liked',\r\n                                        object: 'comment',\r\n                                        actor: {\r\n                                            name: user.name,\r\n                                            citizenID: user.citizenID\r\n                                        },\r\n                                        post: {postID: selectedPost.postID,\r\n                                            text: selectedPost.text\r\n                                        },\r\n                                        comment: {commentID: comment.commentID,\r\n                                            text: comment.text},\r\n                                        seen: false,\r\n                                        ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                                    });\r\n                                    database.ref(`/citizens/${comment.poster.citizenID}/notifications`).set(notifications);\r\n                                })}\r\n                                } else {\r\n                                    liked.splice(liked.indexOf(user.citizenID), 1);\r\n                                    console.log('liked', liked)\r\n                                    database.ref(`/posts/${selectedPost.postID}/comments/${comment.commentID}/liked`).set(liked);\r\n                                    updatePost();\r\n                                }\r\n                                })\r\n                        }}\r\n                    >\r\n                        <ThumbUpIcon className='h-5 w-5' \r\n                            \r\n                            fill={\r\n                            \r\n                            classNames(comment.liked != undefined ?\r\n                            Object.values(comment.liked).includes(user.citizenID) ? '#facc15' : 'white'\r\n                            : 'white')\r\n                        }/>\r\n                        <p className='font-semibold text-sm'>{comment.liked != undefined ? Object.values(comment.liked).length : 0}</p>\r\n                    </button>\r\n                    <button className='flex gap-1 float-left hover:bg-gray-200 rounded p-1 ml-0.5'\r\n                        onClick={()=>{\r\n                            database.ref(`/posts/${selectedPost.postID}/comments/${comment.commentID}`).get().then(commentSnapshot => {\r\n                                const comment = commentSnapshot.val();\r\n                                var disliked = comment.disliked != undefined ? [...Object.values(comment.disliked)] : [];\r\n                                var liked = comment.liked != undefined ? [...Object.values(comment.liked)] : [];\r\n                                if(!disliked.includes(user.citizenID)){\r\n                                    disliked.push(user.citizenID);\r\n                                    if(liked.includes(user.citizenID)){\r\n                                        liked.splice(liked.indexOf(user.citizenID), 1);\r\n                                    }\r\n                                database.ref(`/posts/${selectedPost.postID}/comments/${comment.commentID}/disliked`).set(\r\n                                    disliked\r\n                                );\r\n                                database.ref(`/posts/${selectedPost.postID}/comments/${comment.commentID}/liked`).set(liked);\r\n                                updatePost();\r\n                                if(comment.poster.citizenID != user.citizenID){\r\n                                    database.ref(`/citizens/${comment.poster.citizenID}/notifications`).get().then(notificationsSnapshot => {\r\n                                        const notifications = notificationsSnapshot.val() != undefined ? Object.values(notificationsSnapshot.val()) : [];\r\n                                        notifications.push({\r\n                                            dateAdded: `${getDate()}, ${getYear()}`,\r\n                                            timeAdded: getTime(),\r\n                                            action: 'disliked',\r\n                                            actor: {\r\n                                                name: user.name,\r\n                                                citizenID: user.citizenID\r\n                                            },\r\n                                            object: 'comment',\r\n                                            post: {postID: selectedPost.postID,\r\n                                                text: selectedPost.text\r\n                                            },\r\n                                            comment: {commentID: comment.commentID,\r\n                                                text: comment.text},\r\n                                            seen: false,\r\n                                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                                        });\r\n                                        database.ref(`/citizens/${comment.poster.citizenID}/notifications`).set(notifications);\r\n                                    })}\r\n                                } else {\r\n                                    disliked.splice(disliked.indexOf(user.citizenID), 1);\r\n                                    //console.log('liked', disliked)\r\n                                    database.ref(`/posts/${selectedPost.postID}/comments/${comment.commentID}/disliked`).set(disliked);\r\n                                    updatePost();\r\n                                }\r\n                                })\r\n                            \r\n                            \r\n                        }}\r\n                    >\r\n                        <ThumbDownIcon className='h-5 w-5' \r\n                            \r\n                            fill={\r\n                            \r\n                            classNames(comment.disliked != undefined ?\r\n                            Object.values(comment.disliked).includes(user.citizenID) ? '#facc15' : 'white'\r\n                            : 'white')\r\n                        }/>\r\n                        <p className='font-semibold text-sm'>{comment.disliked != undefined ? Object.values(comment.disliked).length : 0}</p>\r\n                    </button>\r\n                        {comment.poster.citizenID == user.citizenID &&\r\n                                    <button className='float-right text-sm rounded shadow bg-yellow-300 hover:bg-yellow-400 font-semibold flex px-2 py-1'\r\n                                        onClick={() => {\r\n                                            database.ref(`/posts/${selectedPost.postID}/comments/${comment.commentID}`).set(null);\r\n                                            updatePost();\r\n                                        }}\r\n                                    >\r\n                                        <XCircleIcon className='h-5 w-5'/>\r\n                                        DELETE\r\n                                    </button>}\r\n                                    </div>\r\n                                    \r\n                                </div>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                        :\r\n                        <p className='w-full text-center font-semibold text-gray-700 py-8'>NO COMMENTS</p>  \r\n                    }\r\n                    </div>\r\n        </div>\r\n    )\r\n}\r\n}\r\n\r\n\r\nexport default PostPage;","export default __webpack_public_path__ + \"static/media/RushingtonMap.fcfe45e2.png\";","import RushingtonMap from '../../../RushingtonMap.png'\r\n\r\nconst Map = ({}) => {\r\n    return(\r\n        <div className='p-5'>\r\n            <p className='font-bold text-3xl text-center pb-7'>Map of Rushington</p>\r\n                <img src={RushingtonMap}\r\n                    className='rounded'\r\n                ></img>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Map;","import { useEffect, useState } from \"react\";\r\n\r\nconst Properties = ({database}) => {\r\n\r\n    const [properties, setProperties] = useState([]);\r\n    const [filteredProperties, setFilteredProperties] = useState([]);\r\n\r\n    useEffect(updateProperties, []);\r\n\r\n    function updateProperties(){\r\n        database.ref('/properties').get().then(propertiesSnapshot => {\r\n            setProperties(Object.values(propertiesSnapshot.val()).sort((property1, property2) => {\r\n                return property1.address.localeCompare(property2.address);\r\n            }));\r\n            setFilteredProperties(Object.values(propertiesSnapshot.val()).sort((property1, property2) => {\r\n                return property1.address.localeCompare(property2.address);\r\n            }));\r\n        })\r\n    }\r\n\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n    }\r\n\r\n    return(\r\n        <div className='mx-1 lg:mx-10 my-1 lg:my-5'>\r\n            <div className='py-2 w-full'>\r\n                <p className='text-4xl font-bold'>Properties</p>\r\n            </div>\r\n            <div className='px-2 py-1 lg:px-6 lg:py-3 rounded bg-gray-100'>\r\n                <input className='w-full border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2 mt-3 mb-6'\r\n                    placeholder='Search'\r\n                    onChange={event => {\r\n                        setFilteredProperties(properties.filter(property => {\r\n                            return property.address.toUpperCase().includes(event.target.value.toUpperCase());\r\n                          }))\r\n                    }}\r\n                    ></input>\r\n            {filteredProperties.map(property => {\r\n                return(\r\n                    <div className='lg:py-3 py-1'>\r\n                        <Property property={property}/>\r\n                    </div>\r\n                )\r\n            })}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    function Property({property}){\r\n        return(\r\n            <div className={classNames('')}>\r\n                                            <div className='w-full bg-white border-2 shadow border-gray-500 grid grid-cols-3'>\r\n                                                <div className='col-span-3 p-2 flow-root'>\r\n                                                    <div className='float-left'>\r\n                                                    <p className={classNames('text-xl', 'font-bold')}>{property.address}</p>\r\n                                                    <p className={classNames('text-sm', 'uppercase font-semibold')}>{property.type}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className='col-span-1 p-2'>\r\n                                                    <p className='font-semibold'>Property ID</p>\r\n                                                    <p>{property.propertyID}</p>\r\n                                                </div>\r\n                                                <div className='col-span-1 p-2'>\r\n                                                    <p className='font-semibold'>Date Property Added</p>\r\n                                                    <p>{property.dateAdded}</p>\r\n                                                </div>\r\n                                                <div className='col-span-1 p-2'>\r\n                                                    <p className='font-semibold'>Owner</p>\r\n                                                    <p>{property.owner != undefined ? property.owner.name : 'Available'}</p>\r\n                                                </div>\r\n                                                {property.type == 'Business' &&\r\n                                                <div className='col-span-3 p-2'>\r\n                                                    <div>\r\n                                                        <p className='font-semibold'>Business Name</p>\r\n                                                        <p>{property.business != undefined ? property.business.name : 'None yet'}</p>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <p className='font-semibold pt-3'>Business Description</p>\r\n                                                        <p>{property.business != undefined ? property.business.description : 'None yet'}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                                }\r\n                                            </div>\r\n                                            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Properties;","import { useEffect, useState } from \"react\";\r\n\r\nconst Citizens = ({database, user}) => {\r\n\r\n    const [citizens, setCitizens] = useState([]);\r\n    const [filteredCitizens, setFilteredCitizens] = useState([]);\r\n\r\n    useEffect(updateCitizens, []);\r\n\r\n    function updateCitizens(){\r\n        database.ref('/citizens').get().then(citizensSnapshot => {\r\n            if(citizensSnapshot.val() != undefined){\r\n                setCitizens(Object.values(citizensSnapshot.val()));\r\n                setFilteredCitizens(Object.values(citizensSnapshot.val()).sort((citizen1, citizen2) => {\r\n                    return citizen1.name.localeCompare(citizen2.name);\r\n                }));\r\n            }\r\n        })\r\n    }\r\n\r\n    function censor(citizenID){\r\n        return(user.citizenID != citizenID ? `CI-***${citizenID.substring(6, 8)}` : citizenID);\r\n    }\r\n\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n    }\r\n\r\n    return(\r\n        <div className='mx-1 lg:mx-10 my-1 lg:my-5'>\r\n            <div className='py-2 w-full'>\r\n                <p className='text-4xl font-bold'>Citizens</p>\r\n            </div>\r\n            <div className='px-2 py-1 lg:px-6 lg:py-3 rounded bg-gray-100'>\r\n                <input className='rounded w-full border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2 mt-3 mb-6'\r\n                    placeholder='Search'\r\n                    onChange={event => {\r\n                        setFilteredCitizens(citizens.filter(citizen => {\r\n                            return citizen.name.toUpperCase().includes(event.target.value.toUpperCase());\r\n                          }).sort((citizen1, citizen2) => {\r\n                            return citizen1.name.localeCompare(citizen2.name);\r\n                          }))\r\n                    }}\r\n                    ></input>\r\n            {filteredCitizens.map(citizen => {\r\n                return(\r\n                    <div className='lg:py-3 py-1'>\r\n                        <Citizen citizen={citizen}/>\r\n                    </div>\r\n                )\r\n            })}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    function Citizen({citizen}){\r\n        return(\r\n            <button className={classNames('w-full')}\r\n                onClick={(event) => {\r\n                    event.preventDefault();\r\n                    database.ref(`/citizens/${citizen.citizenID}`).get().then(citizenSnapshot => {\r\n                        localStorage.setItem('selectedCitizen', JSON.stringify(citizenSnapshot.val()));\r\n                        window.location.href = '/profile';\r\n                    })\r\n                }}\r\n            >\r\n                <div className='w-full bg-white border-2 shadow border-gray-500'>\r\n                    <div className='p-2 flow-root w-full'>\r\n                        <p className='float-left text-xl font-bold'>{citizen.name}</p>\r\n                        <p className='float-right text-xl'>{censor(citizen.citizenID)}</p>\r\n                    </div>\r\n                </div>\r\n            </button>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Citizens;","import { useState, useEffect } from 'react';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport { CheckCircleIcon, EyeIcon, EyeOffIcon, PencilAltIcon, XCircleIcon } from '@heroicons/react/outline';\r\n\r\n// Not used yet. Might use it sometime\r\nconst Settings = ({user, database, setUser}) => {\r\n    \r\n    useEffect(updateUser, []);\r\n\r\n    const [newPassword, setNewPassword] = useState('');\r\n    const [requirePasswordChecked, setRequirePasswordChecked] = useState(user.settings.requirePassword);\r\n    const [isEditingPassword, setIsEditingPassword] = useState(false);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n\r\n    function updateUser(){\r\n        database.ref(`/citizens/${user.citizenID}`).get().then(citizenSnapshot => {\r\n            setUser(citizenSnapshot.val());\r\n            setRequirePasswordChecked(citizenSnapshot.val().settings.requirePassword);\r\n            localStorage.setItem('user', JSON.stringify(citizenSnapshot.val()));\r\n        })\r\n    }\r\n\r\n    function isNewPasswordValid(){\r\n        return newPassword != undefined && newPassword != '';\r\n    }\r\n\r\n    function stringToArrayBuffer(str) {\r\n        var buf = new ArrayBuffer(str.length*2); // 2 bytes for each char\r\n        var bufView = new Uint16Array(buf);\r\n        for (var i=0, strLen=str.length; i < strLen; i++) {\r\n          bufView[i] = str.charCodeAt(i);\r\n        }\r\n        return buf;\r\n      }\r\n      \r\n    return(\r\n        <div className='mx-1 lg:mx-10 my-1 lg:my-5'>\r\n            <div className='py-2'>\r\n                <p className='text-4xl text-black font-bold'>Settings</p>\r\n            </div>\r\n            <div className='my-4 p-2 border-2 border-gray-500 shadow'>\r\n                <div className='flow-root bg-gray-100 border border-gray-500 rounded shadow p-2'>\r\n                <div className='float-left w-2/3'>\r\n                    <p className='text-xl font-bold pt-1'>Censor my Citizen ID</p>\r\n                </div>\r\n                <div className='float-right'>\r\n                <Switch\r\n                    checked={user.settings.censorCitizenID}\r\n                    onChange={() => {\r\n                        database.ref(`/citizens/${user.citizenID}/settings/censorCitizenID`).set(!user.settings.censorCitizenID);\r\n                        updateUser();\r\n                    }}\r\n                    color='primary'\r\n                />\r\n                </div>\r\n                </div>\r\n                <div className='pt-2'>\r\n                    <p className='p-1 font-semibold text-lg'>To be able to screenshot, show my screen to others, etc. without them seeing my full Citizen ID</p>\r\n                </div>\r\n            </div>\r\n            <div className='my-4 p-2 border-2 border-gray-500 shadow'>\r\n                <div className='bg-gray-100 border border-gray-500 rounded shadow p-2'>\r\n                    <div className='flow-root'>\r\n                <div className='float-left w-2/3'>\r\n                    <p className='text-xl font-bold pt-1'>Require password to sign in</p>\r\n                </div>\r\n                <div className='float-right'>\r\n                <Switch\r\n                    checked={requirePasswordChecked}\r\n                    onChange={() => {\r\n                        /* database.ref(`/citizens/${user.citizenID}/settings/requirePassword`).set(!user.settings.requirePassword);\r\n                        updateUser(); */\r\n                        if(requirePasswordChecked == true){\r\n                            database.ref(`/citizens/${user.citizenID}/settings/requirePassword`).set(false);\r\n                            setIsEditingPassword(false);\r\n                            setNewPassword('');\r\n                            setShowPassword(false);\r\n                        }\r\n                        if(!requirePasswordChecked){\r\n                            if(user.password != undefined){\r\n                                database.ref(`/citizens/${user.citizenID}/settings/requirePassword`).set(true);\r\n                            } else {\r\n                                setIsEditingPassword(true);\r\n                            }\r\n                        }\r\n                        setRequirePasswordChecked(!requirePasswordChecked);\r\n                    }}\r\n                    color='primary'\r\n                />\r\n                </div>\r\n                </div>\r\n                {requirePasswordChecked && isEditingPassword &&\r\n                <div className='flex justify-center my-2'>\r\n                    \r\n                    <div className=''>\r\n                <input className='border-2 border-gray-500 focus:outline-none focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1'\r\n                    value={newPassword}\r\n                    type={showPassword? '' : 'password'}\r\n                    placeholder='Set password...'\r\n                    onChange={event => {\r\n                        setNewPassword(event.target.value);\r\n                        setIsEditingPassword(true);\r\n                    }}\r\n                ></input>\r\n                {isNewPasswordValid() &&\r\n                <div className='flow-root w-full'>\r\n                <button className='float-left py-1 px-2 mt-2 font-semibold bg-yellow-300 hover:bg-yellow-400 shadow rounded flex'\r\n                    onClick={() => {\r\n                        setShowPassword(!showPassword);\r\n                    }}\r\n                >\r\n                    {showPassword ?\r\n                        <EyeOffIcon className='h-6 w-6'/> :\r\n                        <EyeIcon className='h-6 w-6'/>\r\n                    }\r\n                    {showPassword ? 'HIDE' : 'SHOW'}\r\n                </button>\r\n                <button className='float-right py-1 px-2 mt-2 font-semibold bg-yellow-300 hover:bg-yellow-400 shadow rounded flex'\r\n                    onClick={() => {\r\n                        database.ref(`/citizens/${user.citizenID}/settings/requirePassword`).set(true);\r\n                        /* sha256(newPassword).then(hashedPassword => {\r\n                            console.log(hashedPassword);\r\n                        }) */\r\n                        window.crypto.subtle.digest(\"SHA-256\", stringToArrayBuffer(newPassword)).then(result => {\r\n                            //database.ref(`/citizens/${user.citizenID}/password`).set();\r\n                            console.log(result);\r\n                            const hashArray = Array.from(new Uint8Array(result));                     // convert buffer to byte array\r\n                            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\r\n                            console.log(hashHex);\r\n                            database.ref(`/citizens/${user.citizenID}/password`).set(hashHex);\r\n                            setIsEditingPassword(false);\r\n                            setNewPassword('');\r\n                            setShowPassword(false);\r\n                            updateUser();\r\n                        })\r\n                        \r\n                    }}\r\n                >\r\n                    \r\n                    <CheckCircleIcon className='h-6 w-6'/>\r\n                    SAVE\r\n                </button>\r\n                </div>}\r\n                <button className='mt-2 w-full rounded bg-yellow-300 hover:bg-yellow-400 shadow px-2 py-1 font-semibold flex justify-center'\r\n                    onClick={() => {\r\n                        setIsEditingPassword(false);\r\n                        setNewPassword('');\r\n                        if(user.password == undefined){\r\n                            setRequirePasswordChecked(false);\r\n                        }\r\n                        setShowPassword(false);\r\n                    }}>\r\n                        <XCircleIcon className='h-6 w-6'/>\r\n                        CANCEL</button>\r\n                </div>\r\n                </div>}\r\n                {requirePasswordChecked && !isEditingPassword &&\r\n                <div className='flex justify-center my-2'>\r\n                    <button className='rounded bg-yellow-300 hover:bg-yellow-400 shadow px-2 py-1 font-semibold text-lg flex justify-center'\r\n                        onClick={() => {\r\n                            setIsEditingPassword(true);\r\n                        }}\r\n                    >\r\n                        <PencilAltIcon className='h-7 w-7'/>\r\n                        CHANGE PASSWORD\r\n                    </button>\r\n                </div>\r\n                }\r\n                \r\n                </div>\r\n                <div className='pt-2'>\r\n                    <p className='p-1 font-semibold text-lg'>If my Citizen ID is leaked, someone will still need a password to sign in</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Settings;","import { useState } from \"react\";\r\nimport { DatabaseIcon, PlusCircleIcon } from \"@heroicons/react/outline\";\r\n\r\nconst AddNewBusinessPopupBody = ({setAddNewBusinessPopupOpen, user, database, updateBusinesses, getTime, getDate, getYear}) => {\r\n    const [name, setName] = useState('');\r\n    const [description, setDescription] = useState('');\r\n\r\n    function generateBusinessID(){\r\n        var postID = 'BU-'\r\n        for(var i = 0; i < 5; i++){\r\n            postID = postID + String(Math.floor(Math.random()*10));\r\n        }\r\n        return(postID);\r\n    }\r\n\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n    }\r\n\r\n    return(\r\n        <div className='w-full justify-center '>\r\n            <div className='pb-4'>\r\n            <div className='p-5 bg-blue-200 rounded shadow'>\r\n                \r\n                <div className=''>\r\n                <p className='text-sm font-bold'>NAME</p>\r\n                <input className='rounded p-1 w-full border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 focus:outline-none'\r\n                    onChange={event => {setName(event.target.value)}}\r\n                ></input>\r\n                </div>\r\n                <div className='pt-2'>\r\n                <p className='text-sm font-bold'>DESCRIPTION</p>\r\n                \r\n                <textarea className='rounded p-1 w-full border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 resize-none focus:outline-none'\r\n                    onChange={event => {setDescription(event.target.value)}}\r\n                ></textarea>\r\n                </div>\r\n\r\n                \r\n            </div>\r\n            </div>\r\n            <div className='flex justify-center'>\r\n            <button className={classNames(\r\n                name && description ? 'text-black bg-yellow-300 hover:bg-yellow-400' : 'text-gray-400 bg-yellow-100',\r\n                'rounded py-1 px-2 font-semibold flex shadow')}\r\n                onClick={onClickAddBusinessButton}\r\n            >\r\n                <PlusCircleIcon className='w-6 h-6'/>\r\n                ADD</button>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    function onClickAddBusinessButton(){\r\n        if(name && description){\r\n            const newBusinessID = generateBusinessID();\r\n            database.ref(`/businesses/${newBusinessID}`).set(\r\n                {\r\n                    businessID: newBusinessID,\r\n                    name: name,\r\n                    description: description,\r\n                    founder: {\r\n                        citizenID: user.citizenID,\r\n                        name: user.name\r\n                    },\r\n                    owners: {0: {\r\n                        citizenID: user.citizenID,\r\n                        name: user.name    \r\n                    }},\r\n                    timeAdded: getTime(),\r\n                    dateAdded: getDate(),\r\n                    yearAdded: getYear(),\r\n                    meldas: 0\r\n                }\r\n            );\r\n            updateBusinesses();\r\n            setAddNewBusinessPopupOpen(false);\r\n        }\r\n    }\r\n}\r\n\r\nexport default AddNewBusinessPopupBody;","import { useEffect, useState } from \"react\";\r\nimport { PlusCircleIcon, CreditCardIcon } from \"@heroicons/react/outline\";\r\nimport AddNewBusinessPopupBody from '../Low Level/AddNewBusinessPopupBody';\r\nimport Popup from '../Low Level/Popup'\r\n\r\nconst Businesses = ({database, user, setUser, getTime, getDate, getYear}) => {\r\n    const [businesses, setBusinesses] = useState([]);\r\n    const [userBusinesses, setUserBusinesses] = useState([]);\r\n    const [filteredBusinesses, setFilteredBusinesses] = useState([]);\r\n    const [selectedSection, setSelectedSection] = useState('All');\r\n    const [addNewBusinessPopupOpen, setAddNewBusinessPopupOpen] = useState(false);\r\n\r\n    const userHasBAOLicense = user.licenses != undefined ? () => {\r\n        var found = false;\r\n        Object.values(user.licenses).forEach(license => {\r\n            if(license.licenseID == 'LI-67981'){\r\n                found = true;\r\n            }\r\n        })\r\n        return found;\r\n    } : false;\r\n\r\n    useEffect(updateBusinesses, []);\r\n\r\n    function updateBusinesses(){\r\n        database.ref('/businesses').get().then(businessesSnapshot => {\r\n            if(businessesSnapshot.val()){\r\n                setBusinesses(Object.values(businessesSnapshot.val()));\r\n                setFilteredBusinesses(Object.values(businessesSnapshot.val()).sort((business1, business2) => {\r\n                    return business1.name.localeCompare(business2.name);\r\n                  }));\r\n                setUserBusinesses(Object.values(businessesSnapshot.val()).filter(business => {\r\n                    return checkUserIsOwner(business);\r\n                }))\r\n            }\r\n        })\r\n    }\r\n\r\n    function checkUserIsOwner(business){\r\n        var userIsOwner = false;\r\n        Object.values(business.owners).forEach(owner => {\r\n            if(owner.citizenID == user.citizenID) userIsOwner = true;\r\n        });\r\n        return userIsOwner;\r\n    }\r\n\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n    }\r\n\r\n    return(\r\n        <div className='mx-1 lg:mx-10 my-1 lg:my-5'>\r\n            <div className='py-2 w-full'>\r\n                <p className='text-4xl font-bold border-b border-gray-500 pb-4'>Businesses</p>\r\n            </div>\r\n            <div className='pt-4 border-b border-gray-500'>\r\n                <button className={classNames(\r\n                    selectedSection == 'All' ? 'border-b-4 border-yellow-300 font-bold hover:bg-gray-100 rounded-t' : 'text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded',\r\n                    'w-1/3 py-1 px-1')}\r\n                    onClick={() => {\r\n                        setSelectedSection('All');\r\n                    }}\r\n                    >ALL BUSINESSES</button>\r\n                <button className={classNames(\r\n                    selectedSection == 'Purchases' ? 'border-b-4 border-yellow-300 font-bold hover:bg-gray-100 rounded-t' : 'text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded',\r\n                    'w-1/3 py-1 px-1')}\r\n                    onClick={() => {\r\n                        setSelectedSection('Purchases');\r\n                    }}\r\n                    >MY PURCHASES</button>\r\n                <button className={classNames(\r\n                    selectedSection == 'My' ? 'border-b-4 border-yellow-300 font-bold hover:bg-gray-100 rounded-t' : 'text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded',\r\n                    'w-1/3 py-1 px-1')}\r\n                    onClick={() => {\r\n                        setSelectedSection('My');\r\n                    }}\r\n                    >MY BUSINESSES</button>\r\n            </div>\r\n            <div className='px-2 py-1 lg:px-6 lg:py-3 rounded-b bg-gray-200'>\r\n                {selectedSection == 'All' &&\r\n                    <div>\r\n                <input className='rounded w-full border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2 mt-3 mb-6'\r\n                    placeholder='Search businesses...'\r\n                    onChange={event => {\r\n                        setFilteredBusinesses(businesses.filter(business => {\r\n                            return business.name.toUpperCase().includes(event.target.value.toUpperCase());\r\n                          }).sort((business1, business2) => {\r\n                            return business1.name.localeCompare(business2.name);\r\n                          }))\r\n                    }}\r\n                    ></input>\r\n            {filteredBusinesses.map(filteredBusiness => {\r\n                return(\r\n                    <div className='lg:py-3 py-1'>\r\n                        <Business business={filteredBusiness}/>\r\n                    </div>\r\n                )\r\n            })}\r\n            </div>\r\n            }\r\n            {selectedSection == 'Purchases' &&\r\n            <div>\r\n                {user.businessPurchases != undefined &&\r\n                    <div>\r\n                        {Object.values(user.businessPurchases).sort((purchase1, purchase2) => {\r\n                            return(purchase2.ssre - purchase1.ssre);\r\n                        }).map(purchase => {\r\n                            return(\r\n                            <div className='py-2'>\r\n                                <Purchase purchase={purchase}/>\r\n                            </div>)\r\n                        })}\r\n                    </div>\r\n                }\r\n                {user.businessPurchases == undefined &&\r\n                    <p className='text-gray-700 font-semibold text-center py-2'>NO PURCHASES YET</p>\r\n                }\r\n            </div>\r\n            }\r\n            {selectedSection == 'My' && userHasBAOLicense &&\r\n            <div>\r\n                <div className='flex justify-center py-3 lg:py-0'>\r\n                <button className='bg-yellow-300 hover:bg-yellow-400 font-semibold py-1 px-2 flex rounded shadow justify-center'\r\n                    onClick={() => {\r\n                        setAddNewBusinessPopupOpen(true);\r\n                    }}\r\n                >\r\n                    \r\n                    <PlusCircleIcon className='w-6 h-6'/>\r\n                    ADD NEW BUSINESS\r\n                    <Popup\r\n                        open={addNewBusinessPopupOpen}\r\n                        setOpen={setAddNewBusinessPopupOpen}\r\n                        header='New Business'\r\n                        additionalComponent={() => {return(<AddNewBusinessPopupBody\r\n                            setAddNewBusinessPopupOpen={setAddNewBusinessPopupOpen}\r\n                            updateBusinesses={updateBusinesses}\r\n                            getTime={getTime} getDate={getDate} getYear={getYear}\r\n                            user={user} database={database}\r\n                        />)}}\r\n                    />\r\n                </button>\r\n                </div>\r\n                {userBusinesses.length == 0 ?\r\n                    <p className='text-center text-gray-700 font-semibold pt-4'>NONE YET</p>\r\n                    :\r\n                    <div className=''>\r\n                        {userBusinesses.map(business => {\r\n                            return(\r\n                                <div className='lg:py-3 py-1'>\r\n                                    <Business business={business}/>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                }\r\n            </div>\r\n            }\r\n            {selectedSection == 'My' && !userHasBAOLicense &&\r\n            <div>\r\n                <p className='text-center text-gray-700 font-semibold pt-4'>YOU DON'T HAVE A BUSINESS AND ORGANIZATION LICENSE</p>\r\n                <div className='flex justify-center py-2'>\r\n                <a \r\n                    href='/licenses'\r\n                    className='bg-yellow-300 py-1 px-2 flex hover:bg-yellow-400 font-semibold rounded shadow'>\r\n                    <CreditCardIcon className='w-6 h-6'/>\r\n                    GO TO LICENSES</a>\r\n                </div>\r\n            </div>\r\n            }\r\n            </div>\r\n        </div>\r\n    )\r\n\r\nfunction Purchase({purchase}){\r\n    return(\r\n        <div className='rounded bg-white border border-gray-400 shadow'>\r\n            <div className='bg-gray-100 border-b border-gray-400 rounded-t p-2 lg:grid-cols-none lg:flow-root grid grid-cols-2 gap-2'>\r\n                    <div className='lg:float-left'>\r\n                    \r\n                    <p className='text-gray-700 text-sm'>{purchase.type == 'Buy' ? 'BOUGHT' : 'ORDERED'}</p>\r\n                    <p className='text-lg text-gray-700 font-semibold'>\r\n                        {purchase.datePurchased}, {purchase.yearPurchased}</p>\r\n                    </div>\r\n                    <div className='lg:float-left lg:pl-4'>\r\n                    <p className='text-gray-700 text-sm'>TOTAL</p>\r\n                    <p className='text-lg text-gray-700 font-semibold'>{purchase.total} [M]</p>\r\n                    </div>\r\n                    <div className='lg:float-left lg:pl-4'>\r\n                    <p className='text-gray-700 text-sm'>BUSINESS</p>\r\n                    <p className='text-lg text-gray-700 font-semibold'>\r\n                        {purchase.business.name}</p>\r\n                    \r\n                    </div>\r\n                    <div className='lg:float-right'>\r\n                        <p className='text-gray-700 text-sm'>PURCHASE ID</p>\r\n                        <p className='text-lg text-gray-700 font-semibold lg:text-right'>{purchase.purchaseID}</p>\r\n                    </div>\r\n                </div>\r\n            <div className='p-2'>\r\n                <p className='text-2xl font-semibold'>{purchase.product.name} ({purchase.quantity})</p>\r\n                <p className='text-blue-900 text-lg uppercase font-semibold'>{purchase.type == 'Buy' ? purchase.product.buyingPrice : purchase.product.orderingPrice} [M] each</p>\r\n            </div>\r\n            {purchase.type == 'Order' &&\r\n            <div className='p-2 border-t border-gray-400'>\r\n                {purchase.delivered ?\r\n                    <p className='text-green-700 font-semibold text-lg'>Delivered {purchase.dateDelivered}, {purchase.yearDelivered} at {purchase.timeDelivered}</p>\r\n                     :\r\n                    <p className='font-semibold text-red-700 text-lg'>Not delivered</p>\r\n                }\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\nfunction Business({business}){\r\n    return(\r\n        <button className={classNames('w-full')}\r\n            onClick={(event) => {\r\n                event.preventDefault();\r\n                database.ref(`/businesses/${business.businessID}`).get().then(businessSnapshot => {\r\n                    localStorage.setItem('selectedBusiness', JSON.stringify(businessSnapshot.val()));\r\n                    window.location.href = '/business';\r\n                })\r\n            }}\r\n        >\r\n            <div className='w-full bg-white border-2 shadow border-gray-500'>\r\n                <div className='p-2 flow-root w-full'>\r\n                    <p className='float-left text-xl font-bold'>{business.name}</p>\r\n                    <p className='float-right text-xl'>{business.founder.name}</p>\r\n                </div>\r\n            </div>\r\n        </button>\r\n    )\r\n}\r\n}\r\n\r\nexport default Businesses;","import CitizenUserDropboxMenu from './CitizenUserDropboxMenu'\r\nimport React, {useEffect, useState} from 'react'\r\nimport { ArrowCircleUpIcon } from '@heroicons/react/outline';\r\n\r\nconst NewBusinessTransferPopupBody = ({database, user, setUser, business, updateBusiness, setMeldas, meldas, getTime, getDate, getYear, setTransfers, setNewBusinessTransferPopupOpen}) => {\r\n    const [citizens, setCitizens] = useState([]);\r\n    const [filteredCitizens, setFilteredCitizens] = useState([]);\r\n    const [selectedCitizen, setSelectedCitizen] = useState();\r\n    const [transferAmount, setTransferAmount] = useState(0);\r\n    const [transferReason, setTransferReason] = useState('');\r\n    const [salesTaxRate, setSalesTaxRate] = useState(0);\r\n    const rushingtonEpoch = 1522648800;\r\n\r\n    useEffect(addCitizens, []);\r\n\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n    }\r\n\r\n    function addCitizens(){\r\n    database.ref('/citizens').get().then(citizensObjects => {\r\n        setCitizens(Object.values(citizensObjects.val()));\r\n        setFilteredCitizens(Object.values(citizensObjects.val()));\r\n        console.log(citizensObjects.val()[user.citizenID]);\r\n        database.ref('/government/salesTaxRate').get().then(salesTaxRateSnapshot => {\r\n            setSalesTaxRate(salesTaxRateSnapshot.val());\r\n        })\r\n        if(JSON.stringify(user) != JSON.stringify(citizensObjects.val()[user.citizenID])) setUser(citizensObjects.val()[user.citizenID]);\r\n        //setSelectedCitizen(Object.values(citizensObjects.val())[0]);\r\n        //console.log(Object.values(citizensObjects.val())[0])\r\n    })}\r\n\r\n    function onClickSendTransfer(){\r\n        var receiverResultingBalance = 0;\r\n        var senderResultingBalance = 0;\r\n        if(isTransferAmountValid()){\r\n        database.ref(`/citizens/${selectedCitizen.citizenID}/meldas`).get().then(\r\n            meldasSnapshot => {\r\n                const amountTaxed = Math.round(Number(transferAmount) * salesTaxRate);\r\n                receiverResultingBalance = (Number(meldasSnapshot.val()) + Number(transferAmount)) - amountTaxed;\r\n                database.ref(`/citizens/${selectedCitizen.citizenID}/meldas`).set(receiverResultingBalance);\r\n                database.ref(`/businesses/${business.businessID}/meldas`).get().then(\r\n                    meldasSnapshot => {\r\n                        senderResultingBalance = Number(meldasSnapshot.val()) - Number(transferAmount);\r\n                        database.ref(`/businesses/${business.businessID}/meldas`).set(senderResultingBalance);\r\n                        business.meldas = senderResultingBalance;\r\n                        const transferID = generateTransferID();\r\n                        database.ref(`/businesses/${business.businessID}/transfers/${transferID}`).set(\r\n                        {\r\n                            transferID: transferID,\r\n                            date: `${getDate()}, ${getYear()}`,\r\n                            time: getTime(),\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                            amount: transferAmount,\r\n                            receiverID: selectedCitizen.citizenID,\r\n                            receiverName: selectedCitizen.name,\r\n                            type: \"Outgoing\",\r\n                            reason: transferReason.length != 0 ? transferReason : 'None given',\r\n                            resultingBalance: senderResultingBalance\r\n                        }\r\n                        \r\n                    );\r\n                    database.ref(`/citizens/${selectedCitizen.citizenID}/transfers/${transferID}`).set(\r\n                        {\r\n                            transferID: transferID,\r\n                            date: `${getDate()}, ${getYear()}`,\r\n                            time: getTime(),\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                            amount: transferAmount - amountTaxed,\r\n                            senderID: business.businessID,\r\n                            senderName: business.name,\r\n                            type: \"Incoming\",\r\n                            reason: transferReason.length != 0 ? transferReason : 'None given',\r\n                            resultingBalance: receiverResultingBalance\r\n                        }\r\n                        \r\n                    );\r\n                    if(amountTaxed > 0){\r\n                        const taxTransferID = generateTransferID();\r\n                        database.ref('/government').get().then(governmentSnapshot => {\r\n                            var governmentFunds = governmentSnapshot.val().meldas;\r\n                            const newGovernmentFunds = governmentFunds + amountTaxed;\r\n                            database.ref('/government/meldas').set(newGovernmentFunds);\r\n                            database.ref(`/government/transfers/${taxTransferID}`).set(\r\n                                {\r\n                                    transferID: taxTransferID,\r\n                                    date: `${getDate()}, ${getYear()}`,\r\n                                    time: getTime(),\r\n                                    ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                                    amount: amountTaxed,\r\n                                    senderID: business.businessID,\r\n                                    senderName: business.name,\r\n                                    type: \"Incoming\",\r\n                                    reason: `${salesTaxRate * 100}% tax of ${transferID}`,\r\n                                    resultingBalance: newGovernmentFunds\r\n                                }\r\n                            )\r\n                        })\r\n                    }\r\n                    database.ref(`/businesses/${business.businessID}/transfers`).get().then(\r\n                        transfersSnapshot => {\r\n                            console.log(\"Transfers\", transfersSnapshot.val())\r\n                            business.transfers = Object.values(transfersSnapshot.val()).sort((transfer1, transfer2) => {\r\n                                return transfer2.ssre - transfer1.ssre\r\n                            });\r\n                            updateBusiness();\r\n                            localStorage.setItem('selectedBusiness', JSON.stringify(business));\r\n                            setNewBusinessTransferPopupOpen(false);\r\n                        }\r\n                    )\r\n                    /* database.ref(`/citizens/${user[\"Citizen ID\"]}/ArrayTest`).set(\r\n                        ['igrn', 'griolw', 'gej', 'aqe']\r\n                    ); */\r\n                    }\r\n                    \r\n                )\r\n            }\r\n        );\r\n        }\r\n    }\r\n\r\n    function generateTransferID(){\r\n        var transferID = 'MT-'\r\n        for(var i = 0; i < 5; i++){\r\n            transferID = transferID + String(Math.floor(Math.random()*10));\r\n        }\r\n        return(transferID);\r\n    }\r\n\r\n    function isTransferAmountValid(){\r\n        return selectedCitizen != undefined && String(transferAmount).length != 0 && !String(transferAmount).startsWith('-') \r\n                && (Number(business.meldas) - Number(transferAmount) >= 0) && transferAmount != 0;\r\n    }\r\n\r\n    return(\r\n        <div className='w-full justify-center '>\r\n            <div className='pb-4'>\r\n            <div className='p-5 bg-blue-200 rounded shadow'>\r\n                <div className=''>\r\n                <div className='w-full pb-2'>\r\n                <p className='text-sm font-bold'>TO</p>\r\n                <CitizenUserDropboxMenu\r\n                    filteredCitizens={filteredCitizens}\r\n                    setFilteredCitizens={setFilteredCitizens}\r\n                    citizens={citizens}\r\n                    selectedCitizen={selectedCitizen}\r\n                    setSelectedCitizen={setSelectedCitizen}\r\n                    className='pb-2'\r\n                    user={user}\r\n                    type='All'\r\n                />\r\n                </div>\r\n                <div className='w-full pb-2'>\r\n                <p className='text-sm font-bold'>AMOUNT</p>\r\n                <div className='flex w-full justify-center'>\r\n                <input type='Number' placeholder='' min={0} max={business.meldas} defaultValue={transferAmount} onChange={event => {setTransferAmount(Number(event.target.value))}} className='rounded appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1'></input>\r\n                <p className='font-semibold pl-1 text-xl'>[M]</p>\r\n                </div>\r\n                </div>\r\n                </div>\r\n                <div className='pb-2'>\r\n                <p className='text-sm font-bold'>REASON</p>\r\n                <div className='flex justify-center'>\r\n                <textarea placeholder='' onChange={event => {setTransferReason(event.target.value)}} className='rounded w-full bg-white h-20 flex justify-center resize-none focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-2'></textarea>\r\n                </div>\r\n                </div>\r\n                {isTransferAmountValid() &&\r\n                <div>\r\n                <div className='pb-2'>\r\n                    \r\n                    <p className='text-sm font-bold'>RESULTING BALANCE</p>\r\n                    \r\n                    <p className='p-1 font-semibold shadow bg-white '>{Number(business.meldas) - Number(transferAmount)} {'[M]'}</p>\r\n                </div>\r\n                <div className='pb-2'>\r\n                    \r\n                <p className='text-sm font-bold'>AMOUNT TAXED</p>\r\n                \r\n                <p className='p-1 font-semibold shadow bg-white '>{Math.round(Number(transferAmount) * Number(salesTaxRate))} [M]</p>\r\n            </div>\r\n                </div>}\r\n            </div>\r\n            </div>\r\n            <button className={classNames(\r\n                isTransferAmountValid()\r\n                ? 'text-black bg-yellow-300 hover:bg-yellow-400' : 'text-gray-400 bg-yellow-100',\r\n                'w-1/3 rounded py-1 px-2 font-semibold shadow')}\r\n                onClick={onClickSendTransfer}\r\n            >\r\n                <div className='flex justify-center'>\r\n                <ArrowCircleUpIcon className='h-6 w-6'/>\r\n                SEND\r\n                </div>\r\n                </button>\r\n                \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default React.memo(NewBusinessTransferPopupBody)","import { useState, useEffect } from \"react\"\r\nimport { CollectionIcon, LibraryIcon, BriefcaseIcon, PlusCircleIcon, ArrowCircleLeftIcon, TruckIcon, PencilAltIcon, XCircleIcon, CheckCircleIcon, ArrowCircleUpIcon, ArrowCircleDownIcon } from \"@heroicons/react/outline\";\r\nimport Popup from \"../Low Level/Popup\";\r\nimport Switch from '@material-ui/core/Switch';\r\nimport CitizenUserDropboxMenu from \"../Low Level/CitizenUserDropboxMenu\";\r\nimport NewTransferPopupBody from \"../Low Level/NewTransferPopupBody\";\r\nimport NewBusinessTransferPopupBody from \"../Low Level/NewBusinessTransferPopupBody\";\r\n\r\n\r\nconst Business = ({database, user, setUser, getTime, getDate, getYear}) => {\r\n    const [selectedBusiness, setSelectedBusiness] = useState(JSON.parse(localStorage.getItem('selectedBusiness')));\r\n    const [selectedSection, setSelectedSection] = useState('Items');\r\n    const [addItemPopupOpen, setAddItemPopupOpen] = useState(false);\r\n    const [editItemPopupOpen, setEditItemPopupOpen] = useState(false);\r\n    const [productBeingEdited, setProductBeingEdited] = useState();\r\n    const [citizens, setCitizens] = useState([]);\r\n    const [searchInput, setSearchInput] = useState('');\r\n    const [filteredCitizens, setFilteredCitizens] = useState([]);\r\n    const [transferDropboxCitizens, setTransferDropboxCitizens] = useState([]);\r\n    const [filteredTransferDropboxCitizens, setFilteredTransferDropboxCitizens] = useState([])\r\n    const [selectedCitizen, setSelectedCitizen] = useState();\r\n    const [newTransferPopupOpen, setNewTransferPopupOpen] = useState(false);\r\n    const [newBusinessName, setNewBusinessName] = useState(JSON.parse(localStorage.getItem('selectedBusiness')).name);\r\n    const [newBusinessDescription, setNewBusinessDescription] = useState(JSON.parse(localStorage.getItem('selectedBusiness')).description);\r\n    const [salesTaxRate, setSalesTaxRate] = useState(0);\r\n\r\n    const rushingtonEpoch = 1522648800;\r\n\r\n    useEffect(updateCitizens, []);\r\n\r\n    function updateCitizens(){\r\n    database.ref('/citizens').get().then(citizensObjects => {\r\n        const citizens = Object.values(citizensObjects.val()).filter(citizen => {\r\n            var citizenIsNotInList = true;\r\n            Object.values(selectedBusiness.owners).forEach(owner => {\r\n                if(owner.citizenID == citizen.citizenID) citizenIsNotInList = false;\r\n            })\r\n            return citizenIsNotInList;\r\n        });\r\n        setCitizens(citizens);\r\n        setFilteredCitizens(citizens);\r\n        database.ref('/government/salesTaxRate').get().then(salesTaxRateSnapshot => {\r\n            setSalesTaxRate(salesTaxRateSnapshot.val());\r\n        })\r\n    })}\r\n\r\n    const navigationSections = selectedBusiness.founder.citizenID == user.citizenID ? [\r\n        {sectionName: 'Items', sectionSelected: selectedSection == 'Items', icon: CollectionIcon},\r\n        {sectionName: 'Bank Account', sectionSelected: selectedSection == 'Bank Account', icon: LibraryIcon},\r\n        {sectionName: 'Orders', sectionSelected: selectedSection == 'Orders', icon: TruckIcon},\r\n        {sectionName: 'Manage', sectionSelected: selectedSection == 'Manage', icon: BriefcaseIcon}\r\n    ] : \r\n    [\r\n        {sectionName: 'Items', sectionSelected: selectedSection == 'Items', icon: CollectionIcon},\r\n        {sectionName: 'Bank Account', sectionSelected: selectedSection == 'Bank Account', icon: LibraryIcon},\r\n        {sectionName: 'Orders', sectionSelected: selectedSection == 'Orders', icon: TruckIcon}\r\n    ]\r\n\r\n    const userIsOwner = checkUserIsOwner();\r\n\r\n    function checkUserIsOwner(){\r\n        var userIsOwner = false;\r\n        Object.values(selectedBusiness.owners).forEach(owner => {\r\n            if(owner.citizenID == user.citizenID) userIsOwner = true;\r\n        });\r\n        return userIsOwner;\r\n    }\r\n\r\n    console.log('userIsOwner', userIsOwner);\r\n\r\n    useEffect(updateBusiness, []);\r\n\r\n    function updateBusiness(){\r\n        database.ref(`/businesses/${selectedBusiness.businessID}`).get().then(business => {\r\n            setSelectedBusiness(business.val());\r\n            localStorage.setItem('selectedBusiness', JSON.stringify(business.val()));\r\n        })\r\n    }\r\n\r\n    function censor(id){\r\n        return(id.startsWith('CI-') && user.citizenID != id ? `CI-***${id.substring(6, 8)}` : id);\r\n    }\r\n\r\n    function generateID(prefix){\r\n        var transferID = `${prefix}-`\r\n        for(var i = 0; i < 5; i++){\r\n            transferID = transferID + String(Math.floor(Math.random()*10));\r\n        }\r\n        return(transferID);\r\n    }\r\n\r\n    function classNames(...classes) {\r\n        return classes.filter(Boolean).join(\" \");\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            {userIsOwner &&\r\n                <div className='grid grid-cols-5 gap-5'>\r\n                    <div className='col-span-5 lg:col-span-1 lg:h-40 lg:sticky lg:top-6'>\r\n                    \r\n                    {navigationSections.map(navigationSection => {\r\n                        const Icon = navigationSection.icon;\r\n                        return(\r\n                        \r\n                        <div className='flex-auto lg:flex-none'>\r\n                        <button\r\n                            onClick={()=>{setSelectedSection(navigationSection.sectionName);\r\n                            }}\r\n                            className={classNames(navigationSection.sectionSelected ? 'bg-gray-200' : 'bg-white hover:bg-gray-100',\r\n                                'rounded p-2 w-full text-center lg:text-left'\r\n                            )}\r\n                        >\r\n                            <div className='flex gap-2 justify-center lg:justify-start'>\r\n                                <Icon className='h-6 w-6'\r\n                                    fill='white'\r\n                                />\r\n                            <p className='text-gray-800 font-semibold'>{navigationSection.sectionName}</p>\r\n                            </div>\r\n                            </button>\r\n                        </div>\r\n                        )\r\n                    })}\r\n                    \r\n                </div>\r\n                <div className='col-span-5 lg:col-span-4 bg-gray-100 rounded'>\r\n                    {selectedSection == 'Items' &&\r\n                        <div>\r\n                            <Popup\r\n                            header='Edit Product'\r\n                            additionalComponent={() => {return <EditProductPopupBody/>}}\r\n                            open={editItemPopupOpen}\r\n                            setOpen={setEditItemPopupOpen}\r\n                        />\r\n                            <div className='gap-y-2 border-b border-gray-500'>\r\n                            <a className='rounded bg-yellow-300 w-56 py-1 px-2 m-2 font-semibold hover:bg-yellow-400 flex justify-center shadow'\r\n                    href='/businesses'\r\n                >\r\n                                <ArrowCircleLeftIcon className='h-6 w-6'/>\r\n                                BACK TO BUSINESSES\r\n                </a>\r\n            <div className='gap-y-2 py-2'>\r\n                <div className='bg-white border-2 border-gray-700 p-2 m-2 shadow'>\r\n                <p className='text-center text-3xl font-bold'>{selectedBusiness.name}</p>\r\n                <p className='text-center text-lg'>{selectedBusiness.description}</p>\r\n                </div>\r\n            </div>\r\n                        </div>\r\n                            <div className='flow-root px-2'>\r\n                            <div className='float-left py-2'>\r\n                            <button className='bg-yellow-300 hover:bg-yellow-400 font-semibold rounded shadow flex py-1 px-2'\r\n                                onClick={() => {\r\n                                    setAddItemPopupOpen(true);\r\n                                }}\r\n                            >\r\n                                <Popup\r\n                                    header='New Product'\r\n                                    additionalComponent={() => {return <AddItemPopupBody/>}}\r\n                                    open={addItemPopupOpen}\r\n                                    setOpen={setAddItemPopupOpen}\r\n                                />\r\n                                <PlusCircleIcon className='w-6 h-6'/>\r\n                                ADD ITEM\r\n                            </button>\r\n                            </div>\r\n                            <div className='float-right'>\r\n                                <p className='font-bold text-center'>Personal Balance</p>\r\n                                <p className='text-center border-2 border-gray-500 font-semibold bg-white'>{user.meldas} [M]</p>\r\n                            </div>\r\n                            <input className='rounded w-full border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2 mt-8 mb-3'\r\n                    placeholder='Search products...'\r\n                    onChange={event => {\r\n                        setSearchInput(event.target.value);\r\n                    }}\r\n                    ></input>\r\n                            </div>\r\n                            <div className=''>\r\n                                {selectedBusiness.products != undefined &&\r\n                                    <div className='lg:grid lg:grid-cols-4 gap-2 m-2'>\r\n                                        {Object.values(selectedBusiness.products).sort((product1, product2) => {\r\n                                            return(product1.name.localeCompare(product2.name))\r\n                                        }).filter(product => {\r\n                                            if(searchInput != ''){\r\n                                                return product.name.toUpperCase().includes(searchInput.toUpperCase());\r\n                                            } else {\r\n                                                return true;\r\n                                            }\r\n                                        }).map(product => {\r\n                                            return(\r\n                                                <div className='pt-2'>\r\n                                                <Product product={product}/>\r\n                                                </div>\r\n                                            )\r\n                                        })}\r\n                                    </div>\r\n                                }\r\n                                {selectedBusiness.products == undefined &&\r\n                                    <p className='font-semibold text-center text-gray-700 pt-3 pb-6'>\r\n                                        NO PRODUCTS YET\r\n                                    </p>\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    {selectedSection == 'Bank Account' &&\r\n                        <div className='mx-1 lg:mx-2 my-1 lg:my-2'>\r\n                        <div className='flow-root p-2'>\r\n                            <div className='float-left'>\r\n                        <p className='text-3xl text-black font-bold'>Bank</p>\r\n                        \r\n                        </div>\r\n                        \r\n                        <div className='float-right'>\r\n                            <button className='rounded bg-yellow-300 p-2 font-semibold hover:bg-yellow-400 flex shadow'\r\n                                onClick={()=>{setNewTransferPopupOpen(true)}}\r\n                            ><PlusCircleIcon className='w-6 h-6'/><p className='pl-1'>NEW TRANSFER</p>\r\n                            <Popup\r\n                                open={newTransferPopupOpen}\r\n                                setOpen={setNewTransferPopupOpen}\r\n                                header='New Transfer'\r\n                                onClickSave={()=>{}}\r\n                                inputs={[]}\r\n            \r\n                                saveText={'Send'}\r\n                                additionalComponent={()=>{return <NewBusinessTransferPopupBody database={database} user={user}\r\n                                    business={selectedBusiness} updateBusiness={updateBusiness} setUser={setUser}\r\n                                    getTime={getTime} getDate={getDate} getYear={getYear} setNewBusinessTransferPopupOpen={setNewTransferPopupOpen}/>}}\r\n                            />\r\n                            </button>\r\n                        </div>\r\n                        </div>\r\n                        <div className='p-2 group bg-gray-100 rounded'>\r\n                        <div className='lg:flow-root w-full  p-1 shadow bg-white border-4 border-gray-500 text-bottom'>\r\n                            <div className='lg:float-left text-bottom bg-white'>\r\n                            <p className='text-2xl font-semibold pl-1 text-gray-700'>Current Balance</p>\r\n                            \r\n                            \r\n                            </div>\r\n                        <div className='flex justify-center text-2xl font-bold lg:float-right px-1 border-2 border-gray-500 bg-white'>\r\n                            <p className='pr-1'>{selectedBusiness.meldas}</p>\r\n                            <p>[M]</p>\r\n                        </div>\r\n                        </div>\r\n                        \r\n                        <div className='w-full border-gray-500 border-b-4 border-r-4 border-l-4 bg-white'>\r\n                            \r\n                            <p className='font-semibold text-gray-700 px-2 pt-2 text-2xl'>Transaction History</p>\r\n                            {selectedBusiness.transfers != undefined && Object.values(selectedBusiness.transfers).length != 0 ?\r\n                            <div className='lg:p-2 p-1 bg-gray-200'>\r\n                            {Object.values(selectedBusiness.transfers).sort((transfer1, transfer2) => {\r\n                                return transfer2.ssre - transfer1.ssre;\r\n                            }).map(transfer => {\r\n                                return(\r\n                                    <div className='p-1'>\r\n                                        <Transfer transfer={transfer}/>\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                            </div> :\r\n                            <div className='p-2 bg-gray-100'>\r\n                            <p className='font-semibold text-2xl'>Nothing yet</p>\r\n                            </div>\r\n                        }\r\n                            \r\n                        </div>\r\n                        </div>\r\n                        \r\n                        \r\n                        \r\n                        \r\n                    </div>\r\n                    }\r\n                    {selectedSection == 'Orders' &&\r\n                    <div className='m-4'>\r\n                        <div className=''>\r\n                            <p className='text-3xl text-black font-bold'>Orders</p>\r\n                        </div>\r\n                        {selectedBusiness.orders != undefined ?\r\n                        <div>\r\n                        {Object.values(selectedBusiness.orders).sort((order1, order2) => {\r\n                            return(order2.ssre - order1.ssre);\r\n                        }).map(order => {\r\n                            return(\r\n                            <div className='py-2'>\r\n                                <Order order={order}/>\r\n                            </div>)\r\n                        })}\r\n                    </div> : \r\n                    <p className='text-center text-gray-700 py-4 font-semibold'>NONE YET</p>\r\n                    }\r\n                    </div>\r\n                    }\r\n                    {selectedSection == 'Manage' &&\r\n                        <div>\r\n                            <div className='p-4'>\r\n                        <p className='text-3xl text-black font-bold'>Manage</p>\r\n                        \r\n                        </div>\r\n                            <div className='py-4 rounded bg-white mx-4 my-2 shadow'>\r\n                                <p className='font-bold text-sm text-center'>ADD OWNER</p>\r\n                            <CitizenUserDropboxMenu\r\n                                citizens={citizens}\r\n                                filteredCitizens={filteredCitizens}\r\n                                setFilteredCitizens={setFilteredCitizens}\r\n                                user={user}\r\n                                selectedCitizen={selectedCitizen}\r\n                                setSelectedCitizen={setSelectedCitizen}\r\n                            />\r\n                            <div className='flex justify-center pt-2'>\r\n                            <button className={classNames(\r\n                                selectedCitizen != undefined ? 'bg-yellow-300 hover:bg-yellow-400' : 'bg-yellow-200 text-gray-400',\r\n                                'font-semibold rounded shadow px-2 py-1 flex')}\r\n                                onClick={() => {\r\n                                    const ownersList = Object.values(selectedBusiness.owners);\r\n                                    ownersList.push(\r\n                                        {\r\n                                            citizenID: selectedCitizen.citizenID,\r\n                                            name: selectedCitizen.name\r\n                                        }\r\n                                    );\r\n                                    database.ref(`/businesses/${selectedBusiness.businessID}/owners`).set(ownersList);\r\n                                    updateBusiness();\r\n                                }}\r\n                                >\r\n                                <PlusCircleIcon className='h-6 w-6'/>\r\n                                ADD\r\n                            </button>\r\n                            </div>\r\n                            </div>\r\n                            <div className='p-4'>\r\n                            {Object.values(selectedBusiness.owners).map(owner => {\r\n                                return(\r\n                                    <div className='py-2'>\r\n                                    <div className='bg-white border-2 border-gray-700 shadow p-2'>\r\n                                        <div className='flow-root'>\r\n                                        <p className='float-left font-bold text-lg'>{owner.name}</p>\r\n                                        <p className='float-right text-lg'>{censor(owner.citizenID)}</p>\r\n                                        </div>\r\n                                        {owner.citizenID != user.citizenID &&\r\n                                            <div className='flex justify-center'>\r\n                                            <button className='bg-yellow-300 hover:bg-yellow-400 rounded shadow px-2 py-1 flex font-semibold'\r\n                                                onClick={() => {\r\n                                                    const ownersList = Object.values(selectedBusiness.owners);\r\n                                                    ownersList.splice(ownersList.indexOf(owner), 1);\r\n                                                    database.ref(`/businesses/${selectedBusiness.businessID}/owners`).set(ownersList);\r\n                                                    updateBusiness();\r\n                                                }}\r\n                                            >\r\n                                                <XCircleIcon className='w-6 h-6'/>\r\n                                                REMOVE OWNER\r\n                                            </button>\r\n                                            </div>\r\n                                        }\r\n                                    </div>\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                            </div>\r\n                            <div className='py-4 border-t border-gray-500'>\r\n                                <div className='p-4'>\r\n                            <input className='w-full rounded border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2'\r\n                                defaultValue={selectedBusiness.name}\r\n                                placeholder='Business name'\r\n                                onChange={event => {\r\n                                    setNewBusinessName(event.target.value);\r\n                                }}></input>\r\n                            </div>\r\n                            <div className='p-4'>\r\n                            <textarea className='w-full resize-none rounded border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2'\r\n                                defaultValue={selectedBusiness.description}\r\n                                placeholder='Business description'\r\n                                onChange={event => {\r\n                                    setNewBusinessDescription(event.target.value);\r\n                                }}\r\n                            >\r\n                            </textarea>\r\n                            </div>\r\n                            {(newBusinessName != selectedBusiness.name || newBusinessDescription != selectedBusiness.description) &&\r\n                                newBusinessName && newBusinessDescription &&\r\n                            <div className='flex justify-center'>\r\n                            <button className='bg-yellow-300 hover:bg-yellow-400 rounded shadow px-2 py-1 flex font-semibold'\r\n                                onClick={() => {\r\n                                    database.ref(`/businesses/${selectedBusiness.businessID}/name`).set(newBusinessName);\r\n                                    database.ref(`/businesses/${selectedBusiness.businessID}/description`).set(newBusinessDescription);\r\n                                    updateBusiness();\r\n                                }}\r\n                            >\r\n                                <CheckCircleIcon className='h-6 w-6'/>\r\n                                UPDATE NAME AND DESCRIPTION\r\n                                </button>\r\n                            </div>}\r\n                            </div>\r\n                            <div className='flex justify-center py-4 border-t border-gray-500'>\r\n                            <button className='bg-yellow-300 hover:bg-yellow-400 rounded shadow px-2 py-1 flex font-semibold'\r\n                                onClick={() => {\r\n                                    database.ref(`/businesses/${selectedBusiness.businessID}`).set(null);\r\n                                    window.location.href = '/businesses'\r\n                                }}>\r\n                                    <XCircleIcon className='w-6 h-6'/>\r\n                                    DELETE BUSINESS\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                </div>\r\n                </div>\r\n            }\r\n            {!userIsOwner &&\r\n            <div className='bg-gray-100 rounded p-2'>\r\n                \r\n                <a className='rounded bg-yellow-300 w-56 py-1 px-2 font-semibold hover:bg-yellow-400 flex justify-center shadow'\r\n                    href='/businesses'\r\n                >\r\n                                <ArrowCircleLeftIcon className='h-6 w-6'/>\r\n                                BACK TO BUSINESSES\r\n                </a>\r\n            <div className='gap-y-2 py-6 border-b border-gray-500'>\r\n                <div className='bg-white border-2 border-gray-700 py-2 shadow'>\r\n                <p className='text-center text-3xl font-bold'>{selectedBusiness.name}</p>\r\n                <p className='text-center text-lg'>{selectedBusiness.description}</p>\r\n                </div>\r\n            </div>\r\n            <div className='flow-root px-2'>\r\n            <div className='float-right'>\r\n                <p className='font-bold text-center'>Personal Balance</p>\r\n                <p className='text-center border-2 border-gray-500 font-semibold bg-white'>{user.meldas} [M]</p>\r\n            </div>\r\n            <input className='rounded w-full border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2 mt-8 mb-3'\r\n                    placeholder='Search products...'\r\n                    onChange={event => {\r\n                        setSearchInput(event.target.value);\r\n                    }}\r\n                    ></input>\r\n            </div>\r\n            <div className=''>\r\n                {selectedBusiness.products != undefined &&\r\n                    <div className='lg:grid lg:grid-cols-4 gap-2 lg:m-2 m-1'>\r\n                        {Object.values(selectedBusiness.products).sort((product1, product2) => {\r\n                            return(product1.name.localeCompare(product2.name))\r\n                        }).filter(product => {\r\n                            if(searchInput != ''){\r\n                                return product.name.toUpperCase().includes(searchInput.toUpperCase());\r\n                            } else {\r\n                                return true;\r\n                            }\r\n                        }).map(product => {\r\n                            return(\r\n                                <div className='pt-2'>\r\n                                <Product product={product}/>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                }\r\n                {selectedBusiness.products == undefined &&\r\n                    <p className='font-semibold text-center text-gray-700 pt-3 pb-6'>\r\n                        NO PRODUCTS YET\r\n                    </p>\r\n                }\r\n            </div>\r\n        </div>\r\n            }\r\n        </div>\r\n    );\r\n\r\n    function Product({product}){\r\n        const [quantity, setQuantity] = useState(1);\r\n        return(\r\n            <div className='bg-white shadow rounded place-content-end'>\r\n                \r\n                <p className='text-center font-bold p-2 text-xl'>{product.name}</p>\r\n                <p className='text-sm font-bold text-center text-gray-700'>NUMBER</p>\r\n                <div className='px-4 pb-2'>\r\n                <input type='Number' defaultValue={1} min={1}\r\n                    onChange={event => {\r\n                        if(event.target.value > 0){\r\n                        setQuantity(event.target.value);\r\n                        }\r\n                    }}\r\n                    className='border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 w-full p-1'></input>\r\n                </div>\r\n                <div className='flex'>\r\n                {product.buyable &&\r\n                    <div className={classNames(product.orderable ? 'pr-1' : 'pr-2', 'pl-2 py-2 flex-1')}>\r\n                    <button className={classNames((product.buyingPrice * quantity) <= user.meldas ? 'bg-yellow-300 hover:bg-yellow-400' : 'bg-yellow-200 text-gray-400', 'w-full shadow rounded font-semibold py-1 px-2')}\r\n                        onClick={() => {\r\n                            var businessResultingBalance = 0;\r\n        var senderResultingBalance = 0;\r\n        if((product.buyingPrice * quantity) <= user.meldas){\r\n            const transferAmount = Number(quantity * product.buyingPrice);\r\n        database.ref(`/businesses/${selectedBusiness.businessID}/meldas`).get().then(\r\n            meldasSnapshot => {\r\n                const amountTaxed = Math.round(Number(transferAmount) * salesTaxRate);\r\n                businessResultingBalance = Number(meldasSnapshot.val()) + transferAmount - amountTaxed;\r\n                database.ref(`/businesses/${selectedBusiness.businessID}/meldas`).set(businessResultingBalance);\r\n                database.ref(`/citizens/${user.citizenID}/meldas`).get().then(\r\n                    meldasSnapshot => {\r\n                        senderResultingBalance = Number(meldasSnapshot.val()) - transferAmount\r\n                        database.ref(`/citizens/${user.citizenID}/meldas`).set(senderResultingBalance);\r\n                        user.meldas = senderResultingBalance;\r\n                        const transferID = generateID('MT');\r\n                        database.ref(`/citizens/${user.citizenID}/transfers/${transferID}`).set(\r\n                        {\r\n                            transferID: transferID,\r\n                            date: `${getDate()}, ${getYear()}`,\r\n                            time: getTime(),\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                            amount: transferAmount,\r\n                            receiverID: selectedBusiness.businessID,\r\n                            receiverName: selectedBusiness.name,\r\n                            type: \"Outgoing\",\r\n                            reason: `Bought ${quantity} of '${product.name}'`,\r\n                            resultingBalance: senderResultingBalance,\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                        }\r\n                        \r\n                    );\r\n                    database.ref(`/businesses/${selectedBusiness.businessID}/transfers/${transferID}`).set(\r\n                        {\r\n                            transferID: transferID,\r\n                            date: `${getDate()}, ${getYear()}`,\r\n                            time: getTime(),\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                            amount: transferAmount - amountTaxed,\r\n                            senderID: user.citizenID,\r\n                            senderName: user.name,\r\n                            type: \"Incoming\",\r\n                            reason: `Bought ${quantity} of '${product.name}'`,\r\n                            resultingBalance: businessResultingBalance,\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                        }\r\n                        \r\n                    );\r\n                    const purchaseID = generateID('PU');\r\n                    database.ref(`/citizens/${user.citizenID}/businessPurchases/${purchaseID}`).set(\r\n                        {\r\n                            purchaseID: purchaseID,\r\n                            type: 'Buy',\r\n                            product: {\r\n                                name: product.name,\r\n                                productID: product.productID,\r\n                                buyingPrice: product.buyingPrice\r\n                            },\r\n                            business: {\r\n                                businessID: selectedBusiness.businessID,\r\n                                name: selectedBusiness.name,\r\n                                description: selectedBusiness.description\r\n                            },\r\n                            quantity: quantity,\r\n                            total: transferAmount,\r\n                            timePurchased: getTime(),\r\n                            datePurchased: getDate(),\r\n                            yearPurchased: getYear(),\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch)\r\n                        }\r\n                    );\r\n                    if(amountTaxed > 0){\r\n                        const taxTransferID = generateID('MT');\r\n                        database.ref('/government').get().then(governmentSnapshot => {\r\n                            var governmentFunds = governmentSnapshot.val().meldas;\r\n                            const newGovernmentFunds = governmentFunds + amountTaxed;\r\n                            database.ref('/government/meldas').set(newGovernmentFunds);\r\n                            database.ref(`/government/transfers/${taxTransferID}`).set(\r\n                                {\r\n                                    transferID: taxTransferID,\r\n                                    date: `${getDate()}, ${getYear()}`,\r\n                                    time: getTime(),\r\n                                    ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                                    amount: amountTaxed,\r\n                                    senderID: user.citizenID,\r\n                                    senderName: user.name,\r\n                                    type: \"Incoming\",\r\n                                    reason: `${salesTaxRate * 100}% tax of ${transferID}`,\r\n                                    resultingBalance: newGovernmentFunds\r\n                                }\r\n                            )\r\n                        })\r\n                    }\r\n                    setUser(user);\r\n                    localStorage.setItem('user', JSON.stringify(user));\r\n                    updateBusiness();\r\n                    }\r\n                    \r\n                )\r\n            }\r\n        );\r\n        }\r\n                        }}\r\n                    >\r\n                        <div className='flex justify-center'>\r\n                            BUY\r\n                        </div>\r\n                        <p>{quantity * product.buyingPrice} [M]</p>\r\n                    </button>\r\n                    </div>\r\n                }\r\n                {product.orderable &&\r\n                    <div className={classNames(product.orderable ? 'pl-1' : 'pl-2', 'pr-2 py-2 flex-1')}>\r\n                    <button className={classNames((product.orderingPrice * quantity) <= user.meldas ? 'bg-yellow-300 hover:bg-yellow-400' : 'bg-yellow-200 text-gray-400', 'w-full shadow rounded font-semibold py-1 px-2')}\r\n                        onClick={() => {\r\n                            var businessResultingBalance = 0;\r\n        var senderResultingBalance = 0;\r\n        if((product.orderingPrice * quantity) <= user.meldas){\r\n            const transferAmount = Number(quantity * product.orderingPrice);\r\n        database.ref(`/businesses/${selectedBusiness.businessID}/meldas`).get().then(\r\n            meldasSnapshot => {\r\n                const amountTaxed = Math.round(Number(transferAmount) * salesTaxRate);\r\n                businessResultingBalance = Number(meldasSnapshot.val()) + transferAmount - amountTaxed;\r\n                database.ref(`/businesses/${selectedBusiness.businessID}/meldas`).set(businessResultingBalance);\r\n                database.ref(`/citizens/${user.citizenID}/meldas`).get().then(\r\n                    meldasSnapshot => {\r\n                        senderResultingBalance = Number(meldasSnapshot.val()) - transferAmount;\r\n                        database.ref(`/citizens/${user.citizenID}/meldas`).set(senderResultingBalance);\r\n                        user.meldas = senderResultingBalance;\r\n                        const transferID = generateID('MT');\r\n                        database.ref(`/citizens/${user.citizenID}/transfers/${transferID}`).set(\r\n                        {\r\n                            transferID: transferID,\r\n                            date: `${getDate()}, ${getYear()}`,\r\n                            time: getTime(),\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                            amount: transferAmount,\r\n                            receiverID: selectedBusiness.businessID,\r\n                            receiverName: selectedBusiness.name,\r\n                            type: \"Outgoing\",\r\n                            reason: `Ordered ${quantity} of '${product.name}'`,\r\n                            resultingBalance: senderResultingBalance,\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                        }\r\n                        \r\n                    );\r\n                    database.ref(`/businesses/${selectedBusiness.businessID}/transfers/${transferID}`).set(\r\n                        {\r\n                            transferID: transferID,\r\n                            date: `${getDate()}, ${getYear()}`,\r\n                            time: getTime(),\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                            amount: transferAmount - amountTaxed,\r\n                            senderID: user.citizenID,\r\n                            senderName: user.name,\r\n                            type: \"Incoming\",\r\n                            reason: `Ordered ${quantity} of '${product.name}'`,\r\n                            resultingBalance: businessResultingBalance,\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                        }\r\n                        \r\n                    );\r\n                    const purchaseID = generateID('PU');\r\n                    database.ref(`/citizens/${user.citizenID}/businessPurchases/${purchaseID}`).set(\r\n                        {\r\n                            purchaseID: purchaseID,\r\n                            type: 'Order',\r\n                            delivered: false,\r\n                            product: {\r\n                                name: product.name,\r\n                                productID: product.productID,\r\n                                orderingPrice: product.orderingPrice\r\n                            },\r\n                            business: {\r\n                                businessID: selectedBusiness.businessID,\r\n                                name: selectedBusiness.name,\r\n                                description: selectedBusiness.description\r\n                            },\r\n                            quantity: quantity,\r\n                            total: transferAmount,\r\n                            timePurchased: getTime(),\r\n                            datePurchased: getDate(),\r\n                            yearPurchased: getYear(),\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch)\r\n                        }\r\n                    );\r\n                    database.ref(`/businesses/${selectedBusiness.businessID}/orders/${purchaseID}`).set(\r\n                        {\r\n                            purchaseID: purchaseID,\r\n                            delivered: false,\r\n                            product: {\r\n                                name: product.name,\r\n                                productID: product.productID,\r\n                                orderingPrice: product.orderingPrice\r\n                            },\r\n                            business: {\r\n                                businessID: selectedBusiness.businessID,\r\n                                name: selectedBusiness.name,\r\n                                description: selectedBusiness.description\r\n                            },\r\n                            customer: {\r\n                                citizenID: user.citizenID,\r\n                                name: user.name\r\n                            },\r\n                            quantity: quantity,\r\n                            total: transferAmount - amountTaxed,\r\n                            timePurchased: getTime(),\r\n                            datePurchased: getDate(),\r\n                            yearPurchased: getYear(),\r\n                            ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch)\r\n                        }\r\n                    );\r\n                    if(amountTaxed > 0){\r\n                        const taxTransferID = generateID('MT');\r\n                        database.ref('/government').get().then(governmentSnapshot => {\r\n                            var governmentFunds = governmentSnapshot.val().meldas;\r\n                            const newGovernmentFunds = governmentFunds + amountTaxed;\r\n                            database.ref('/government/meldas').set(newGovernmentFunds);\r\n                            database.ref(`/government/transfers/${taxTransferID}`).set(\r\n                                {\r\n                                    transferID: taxTransferID,\r\n                                    date: `${getDate()}, ${getYear()}`,\r\n                                    time: getTime(),\r\n                                    ssre: Math.round(((new Date()).getTime()/1000)-rushingtonEpoch),\r\n                                    amount: amountTaxed,\r\n                                    senderID: user.citizenID,\r\n                                    senderName: user.name,\r\n                                    type: \"Incoming\",\r\n                                    reason: `${salesTaxRate * 100}% tax of ${transferID}`,\r\n                                    resultingBalance: newGovernmentFunds\r\n                                }\r\n                            )\r\n                        })\r\n                    }\r\n                    setUser(user);\r\n                    localStorage.setItem('user', JSON.stringify(user));\r\n                    updateBusiness();\r\n                    }\r\n                    \r\n                )\r\n            }\r\n        );\r\n        }\r\n                        }}\r\n                    >\r\n                        <div className='flex justify-center'>\r\n                            ORDER\r\n                        </div>\r\n                        <p>{quantity * product.orderingPrice} [M]</p>\r\n                    </button>\r\n                    </div>\r\n                }\r\n                </div>\r\n                {userIsOwner &&\r\n                    <div className='grid grid-cols-2 p-2 gap-2'>\r\n                        \r\n                        <button className='shadow rounded font-semibold py-1 px-2 bg-yellow-300 hover:bg-yellow-400'>\r\n                        <div className='flex justify-center'\r\n                            onClick={() => {\r\n                                setProductBeingEdited(product);\r\n                                setEditItemPopupOpen(true);\r\n                            }}\r\n                        >\r\n                            <PencilAltIcon className='w-6 h-6'/>\r\n                            EDIT\r\n                            \r\n                        </div>\r\n                        \r\n                        </button>\r\n                        <button className='shadow rounded font-semibold py-1 px-2 bg-yellow-300 hover:bg-yellow-400'>\r\n                        <div className='flex justify-center'\r\n                            onClick={() => {\r\n                                database.ref(`/businesses/${selectedBusiness.businessID}/products/${product.productID}`).set(null);\r\n                                updateBusiness();\r\n                            }}\r\n                        >\r\n                            <XCircleIcon className='w-6 h-6'/>\r\n                            DELETE\r\n                        </div>\r\n                        </button>\r\n                    </div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n    function Transfer({transfer}){\r\n    \r\n        return(\r\n            <div className='rounded bg-white shadow'>\r\n                <div className='w-full lg:flow-root'>\r\n                <p className='lg:float-left pl-2 pt-2 font-semibold text-gray-700'>{transfer.date} at {transfer.time}</p>\r\n                <p className='lg:float-right lg:pl-0 pl-2 pr-2 pt-2 font-semibold text-gray-700'>{transfer.transferID} {transfer.ssre}</p>\r\n                </div>\r\n                <div className='grid grid-cols-4 lg:gap-3 gap-y-3 p-2'>\r\n                {transfer.type == \"Incoming\" ?\r\n                <div className='col-span-4 lg:col-span-2 grid grid-cols-2'>\r\n                            <div className='col-span-1'>\r\n                                <p className='font-semibold'>Amount</p>\r\n                                <p className='text-green-700'>+{transfer.amount} [M]</p>\r\n                            </div>\r\n                            <div className='col-span-1'>\r\n                                <p className='font-semibold'>Sender</p>\r\n                                <p className=''>{transfer.senderName}</p>\r\n                                <p className=''>{transfer.senderName != 'Rushington Government' && transfer.senderName != 'Rushington Bank' ? \r\n                                    censor(transfer.senderID) : ''}</p>\r\n                            </div>\r\n                            </div>\r\n                :    \r\n                <div className='col-span-4 lg:col-span-2 grid grid-cols-2'>\r\n                <div className='col-span-1'>\r\n                    <p className='font-semibold'>Amount</p>\r\n                    <p className='text-red-700'>-{transfer.amount} [M]</p>\r\n                </div>\r\n                <div className='col-span-1'>\r\n                    <p className='font-semibold'>Receiver</p>\r\n                    <p className=''>{transfer.receiverName}</p>\r\n                    <p className=''>{transfer.receiverName != 'Rushington Government' && transfer.receiverName != 'Rushington Bank' ? \r\n                                    censor(transfer.receiverID) : ''}</p>\r\n                </div>\r\n                </div>\r\n                        }\r\n                <div className='col-span-2 lg:col-span-1'>\r\n                                <p className='font-semibold'>Reason</p>\r\n                                <p className=''>{transfer.reason}</p>\r\n                            </div>\r\n                <div className='col-span-2 lg:col-span-1'>\r\n                                <p className='font-semibold'>Resulting Balance</p>\r\n                                <p className=''>{transfer.resultingBalance} [M]</p>\r\n                            </div>\r\n                        </div>\r\n                </div>\r\n        )\r\n    \r\n}\r\n\r\n    function AddItemPopupBody({}){\r\n        const [newItemBuyingPrice, setNewItemBuyingPrice] = useState(null);\r\n        const [newItemOrderingPrice, setNewItemOrderingPrice] = useState(null);\r\n        const [newItemName, setNewItemName] = useState('');\r\n        const [newItemBuyable, setNewItemBuyable] = useState(true);\r\n        const [newItemOrderable, setNewItemOrderable] = useState(false);\r\n\r\n        function generateProductID(){\r\n            var productID = 'PR-'\r\n            for(var i = 0; i < 5; i++){\r\n                productID = productID + String(Math.floor(Math.random()*10));\r\n            }\r\n            return(productID);\r\n        }\r\n\r\n        function onClickAddItemButton(){\r\n            if(newItemName && (newItemBuyable ? newItemBuyingPrice > 0 : true) && (newItemOrderable ? newItemOrderingPrice > 0 : true) && (newItemOrderable || newItemBuyable)){\r\n                const newProductID = generateProductID();\r\n                database.ref(`/businesses/${selectedBusiness.businessID}/products/${newProductID}`).set(\r\n                    {\r\n                        productID: newProductID,\r\n                        name: newItemName,\r\n                        buyingPrice: newItemBuyingPrice,\r\n                        orderingPrice: newItemOrderingPrice,\r\n                        buyable: newItemBuyable,\r\n                        orderable: newItemOrderable\r\n                    }\r\n                );\r\n                updateBusiness();\r\n                setAddItemPopupOpen(false);\r\n            }\r\n        }\r\n        return(\r\n            <div className='w-full justify-center '>\r\n            <div className='pb-4'>\r\n            <div className='p-5 bg-blue-200 rounded shadow'>\r\n                \r\n                <div className=''>\r\n                <p className='text-sm font-bold'>PRODUCT NAME</p>\r\n                <input className='rounded p-1 w-full border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 focus:outline-none'\r\n                    onChange={event => {setNewItemName(event.target.value)}}\r\n                ></input>\r\n                </div>\r\n                <div className='bg-white shadow rounded'>\r\n                <div className='mt-4 flow-root'>\r\n                    <p className='float-left pt-2 font-bold pl-2'>Buyable</p>\r\n                    <Switch\r\n                    className='float-right'\r\n                    checked={newItemBuyable}\r\n                    onChange={() => {\r\n                        if(newItemBuyable){\r\n                            setNewItemBuyingPrice(null);\r\n                        }\r\n                        setNewItemBuyable(!newItemBuyable)\r\n                    }}\r\n                    color='primary'\r\n                />\r\n                </div>\r\n                <p className='text-center text-gray-700 text-sm font-semibold w-full p-2'>\r\n                    With this option selected, people will click buy when they take it from your store, and money will just be transferred\r\n                </p>\r\n                {newItemBuyable &&\r\n                <div className='px-4 pb-4 pt-1'>\r\n                <p className='text-sm font-bold'>BUYING PRICE</p>\r\n                <div className='flex w-full justify-center'>\r\n                <input type='Number' placeholder='' min={0} onChange={event => {setNewItemBuyingPrice(event.target.value)}} className='rounded appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1'></input>\r\n                <p className='font-semibold pl-1 text-xl'>[M]</p>\r\n                </div>\r\n                </div>}\r\n                </div>\r\n                <div className='bg-white shadow rounded'>\r\n                <div className='mt-4 flow-root'>\r\n                    <p className='float-left pt-2 font-bold pl-2'>Orderable</p>\r\n                    <Switch\r\n                    className='float-right'\r\n                    checked={newItemOrderable}\r\n                    onChange={() => {\r\n                        if(newItemOrderable){\r\n                            setNewItemOrderingPrice(null);\r\n                        }\r\n                        setNewItemOrderable(!newItemOrderable)\r\n                    }}\r\n                    color='primary'\r\n                />\r\n                    \r\n                </div>\r\n                <p className='text-center text-gray-700 text-sm font-semibold w-full p-2'>\r\n                    With this option selected, people will click order, money will be transferred, and the order will be added to an order queue that your business is expected to fulfill\r\n                </p>\r\n                {newItemOrderable &&\r\n                <div className='px-4 pb-4 pt-1'>\r\n                <p className='text-sm font-bold'>ORDERING PRICE</p>\r\n                <div className='flex w-full justify-center'>\r\n                <input type='Number' placeholder='' min={0} onChange={event => {setNewItemOrderingPrice(event.target.value)}} className='rounded appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1'></input>\r\n                <p className='font-semibold pl-1 text-xl'>[M]</p>\r\n                </div>\r\n                </div>}\r\n                </div>\r\n                \r\n            </div>\r\n            </div>\r\n            <div className='flex justify-center'>\r\n            <button className={classNames(\r\n                newItemName && (newItemBuyable ? newItemBuyingPrice > 0 : true) && (newItemOrderable ? newItemOrderingPrice > 0 : true) && (newItemOrderable || newItemBuyable) ? 'text-black bg-yellow-300 hover:bg-yellow-400' : 'text-gray-400 bg-yellow-100',\r\n                'rounded py-1 px-2 font-semibold flex shadow')}\r\n                onClick={onClickAddItemButton}\r\n            >\r\n                <PlusCircleIcon className='w-6 h-6'/>\r\n                ADD</button>\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n\r\nfunction EditProductPopupBody({}){\r\n        const [itemBuyingPrice, setItemBuyingPrice] = useState(productBeingEdited.buyingPrice ? productBeingEdited.buyingPrice : null);\r\n        const [itemOrderingPrice, setItemOrderingPrice] = useState(productBeingEdited.orderingPrice ? productBeingEdited.orderingPrice : null);\r\n        const [itemName, setItemName] = useState(productBeingEdited.name);\r\n        const [itemBuyable, setItemBuyable] = useState(productBeingEdited.buyable ? true : null);\r\n        const [itemOrderable, setItemOrderable] = useState(productBeingEdited.orderable ? true : null);\r\n\r\n        function onClickSaveItemButton(){\r\n            if(itemName && (itemBuyable ? itemBuyingPrice > 0 : true) && (itemOrderable ? itemOrderingPrice > 0 : true) && (itemOrderable || itemBuyable)){\r\n                database.ref(`/businesses/${selectedBusiness.businessID}/products/${productBeingEdited.productID}`).set(\r\n                    {\r\n                        productID: productBeingEdited.productID,\r\n                        name: itemName,\r\n                        buyingPrice: itemBuyingPrice,\r\n                        orderingPrice: itemOrderingPrice,\r\n                        buyable: itemBuyable,\r\n                        orderable: itemOrderable\r\n                    }\r\n                );\r\n                updateBusiness();\r\n                setEditItemPopupOpen(false);\r\n            }\r\n        }\r\n        return(\r\n            <div className='w-full justify-center '>\r\n            <div className='pb-4'>\r\n            <div className='p-5 bg-blue-200 rounded shadow'>\r\n                \r\n                <div className=''>\r\n                <p className='text-sm font-bold'>PRODUCT NAME</p>\r\n                <input className='p-1 w-full border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 focus:outline-none'\r\n                    value={itemName}\r\n                    onChange={event => {setItemName(event.target.value)}}\r\n                ></input>\r\n                </div>\r\n                <div className='bg-white shadow rounded'>\r\n                <div className='mt-4 flow-root'>\r\n                    <p className='float-left pt-2 font-bold pl-2'>Buyable</p>\r\n                    <Switch\r\n                    className='float-right'\r\n                    checked={itemBuyable}\r\n                    onChange={() => {\r\n                        if(itemBuyable){\r\n                            setItemBuyingPrice(null);\r\n                        }\r\n                        setItemBuyable(!itemBuyable)\r\n                    }}\r\n                    color='primary'\r\n                />\r\n                </div>\r\n                <p className='text-center text-gray-700 text-sm font-semibold w-full p-2'>\r\n                    With this option selected, people will click buy when they take it from your store, and money will just be transferred\r\n                </p>\r\n                {itemBuyable &&\r\n                <div className='px-4 pb-4 pt-1'>\r\n                <p className='text-sm font-bold'>BUYING PRICE</p>\r\n                <div className='flex w-full justify-center'>\r\n                <input type='Number' placeholder='' defaultValue={itemBuyingPrice} min={0} onChange={event => {setItemBuyingPrice(event.target.value)}} className='appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1'></input>\r\n                <p className='font-semibold pl-1 text-xl'>[M]</p>\r\n                </div>\r\n                </div>}\r\n                </div>\r\n                <div className='bg-white shadow rounded'>\r\n                <div className='mt-4 flow-root'>\r\n                    <p className='float-left pt-2 font-bold pl-2'>Orderable</p>\r\n                    <Switch\r\n                    className='float-right'\r\n                    checked={itemOrderable}\r\n                    onChange={() => {\r\n                        if(itemOrderable){\r\n                            setItemOrderingPrice(null);\r\n                        }\r\n                        setItemOrderable(!itemOrderable)\r\n                    }}\r\n                    color='primary'\r\n                />\r\n                    \r\n                </div>\r\n                <p className='text-center text-gray-700 text-sm font-semibold w-full p-2'>\r\n                    With this option selected, people will click order, money will be transferred, and the order will be added to an order queue that your business is expected to fulfill\r\n                </p>\r\n                {itemOrderable &&\r\n                <div className='px-4 pb-4 pt-1'>\r\n                <p className='text-sm font-bold'>ORDERING PRICE</p>\r\n                <div className='flex w-full justify-center'>\r\n                <input type='Number' placeholder='' defaultValue={itemOrderingPrice} min={0} onChange={event => {setItemOrderingPrice(event.target.value)}} className='appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1'></input>\r\n                <p className='font-semibold pl-1 text-xl'>[M]</p>\r\n                </div>\r\n                </div>}\r\n                </div>\r\n                \r\n            </div>\r\n            </div>\r\n            <div className='flex justify-center'>\r\n            <button className={classNames(\r\n                itemName && (itemBuyable ? itemBuyingPrice > 0 : true) && (itemOrderable ? itemOrderingPrice > 0 : true) && (itemOrderable || itemBuyable) ? 'text-black bg-yellow-300 hover:bg-yellow-400' : 'text-gray-400 bg-yellow-100',\r\n                'rounded py-1 px-2 font-semibold flex shadow')}\r\n                onClick={onClickSaveItemButton}\r\n            >\r\n                <CheckCircleIcon className='w-6 h-6'/>\r\n                SAVE</button>\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n\r\n    function Order({order}){\r\n        return(\r\n            <div className='rounded bg-white border border-gray-400 shadow'>\r\n                <div className='bg-gray-100 border-b border-gray-400 rounded-t p-2 lg:grid-cols-none lg:flow-root grid grid-cols-2 gap-2'>\r\n                    <div className='lg:float-left'>\r\n                    \r\n                    <p className='text-gray-700 text-sm'>ORDERED</p>\r\n                    <p className='text-lg text-gray-700 font-semibold'>\r\n                        {order.datePurchased}, {order.yearPurchased}</p>\r\n                    </div>\r\n                    <div className='lg:float-left lg:pl-4'>\r\n                    <p className='text-gray-700 text-sm'>TOTAL</p>\r\n                    <p className='text-lg text-gray-700 font-semibold'>{order.total} [M]</p>\r\n                    </div>\r\n                    <div className='lg:float-left lg:pl-4'>\r\n                    <p className='text-gray-700 text-sm'>CUSTOMER</p>\r\n                    <p className='text-lg text-gray-700 font-semibold'>\r\n                        {order.customer.name}</p>\r\n                    </div>\r\n                    <div className='lg:float-right'>\r\n                        <p className='text-gray-700 text-sm'>PURCHASE ID</p>\r\n                        <p className='text-lg text-gray-700 font-semibold lg:text-right'>{order.purchaseID}</p>\r\n                    </div>\r\n                </div>\r\n                <div className='p-2'>\r\n                <p className='text-2xl font-semibold'>{order.product.name} ({order.quantity})</p>\r\n                <p className='text-blue-900 text-lg uppercase font-semibold'>{order.product.orderingPrice} [M] each</p>\r\n            </div>\r\n                <div className='p-2 border-t border-gray-400'>\r\n                    {order.delivered ?\r\n                     <p className='text-green-700 font-semibold text-lg'>Delivered {order.dateDelivered}, {order.yearDelivered} at {order.timeDelivered}</p>\r\n                     :\r\n                     <div>\r\n                     <p className='font-semibold text-red-700 text-lg'>Not delivered</p>\r\n                     <div className='flex justify-center'>\r\n                     <button className='shadow flex rounded font-semibold py-1 px-2 bg-yellow-300 hover:bg-yellow-400'\r\n                         onClick={() => {\r\n                             const businessOrderReference = `/businesses/${selectedBusiness.businessID}/orders/${order.purchaseID}`;\r\n                             database.ref(`${businessOrderReference}/delivered`).set(true);\r\n                             database.ref(`${businessOrderReference}/timeDelivered`).set(getTime());\r\n                             database.ref(`${businessOrderReference}/dateDelivered`).set(getDate());\r\n                             database.ref(`${businessOrderReference}/yearDelivered`).set(getYear());\r\n                             updateBusiness();\r\n\r\n                             const citizenPurchaseReference = `/citizens/${order.customer.citizenID}/businessPurchases/${order.purchaseID}`;\r\n                             database.ref(`${citizenPurchaseReference}/delivered`).set(true);\r\n                             database.ref(`${citizenPurchaseReference}/timeDelivered`).set(getTime());\r\n                             database.ref(`${citizenPurchaseReference}/dateDelivered`).set(getDate());\r\n                             database.ref(`${citizenPurchaseReference}/yearDelivered`).set(getYear());\r\n                             if(order.customer.citizenID == user.citizenID){\r\n                             database.ref(`/citizens/${order.customer.citizenID}`).get().then(citizen => {\r\n                                 setUser(citizen.val());\r\n                                 localStorage.setItem('user', JSON.stringify(citizen.val()));\r\n                             })\r\n                            }\r\n                         }}\r\n                     >\r\n                     <CheckCircleIcon className='h-6 w-6'/>\r\n                     SET AS DELIVERED\r\n                     </button>\r\n                     </div>\r\n                     </div>\r\n                        }\r\n                </div>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Business;","import React, { useEffect, useState } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport Resources from './Resources'\r\nimport Bank from './Bank';\r\nimport Calendar from './Calendar';\r\nimport Constitution from './Constitution';\r\nimport Government from './Government';\r\nimport Home from './Home'\r\nimport Profile from './Profile';\r\nimport Licenses from './Licenses';\r\nimport PostPage from '../Low Level/PostPage';\r\nimport Map from './Map';\r\nimport Properties from './Properties';\r\nimport Citizens from './Citizens';\r\nimport Settings from './Settings';\r\nimport Businesses from './Businesses';\r\nimport Business from './Business';\r\n\r\nconst Panel = ({ isAdmin, currentDate, currentYear, user, setUser, citizenID, database, getTime, getDate, getYear }) => {\r\n    const [selectedSection, setSelectedSection] = useState(localStorage.getItem('selectedSection') != undefined ? localStorage.getItem('selectedSection') : 'Public Posts');\r\n    const [selectedPost, setSelectedPost] = useState(localStorage.getItem('selectedPost') != undefined ? JSON.parse(localStorage.getItem('selectedPost')) : undefined);\r\n\r\n    return(\r\n        <div className=\"h-full\">\r\n            <Router>\r\n                <Switch>\r\n                    <Route exact path='/' render={(props) => {return <Home{...props} database={database} getDate={getDate} getYear={getYear} getTime={getTime} user={user} selectedSection={selectedSection} setSelectedSection={setSelectedSection} selectedPost={selectedPost} setSelectedPost={setSelectedPost}/>}}></Route>\r\n                    <Route path='/bank' render={(props) => {return <Bank{...props} user={user} citizenID={citizenID} database={database} getDate={getDate} getYear={getYear} getTime={getTime}/>}}></Route>\r\n                    <Route path='/resources' render={(props) => {return <Resources{...props}/>}}></Route>\r\n                    <Route path='/calendar' render={(props) => {return <Calendar{...props} currentDate={currentDate} currentYear={currentYear}/>}}></Route>\r\n                    <Route path='/constitution' render={(props) => {return <Constitution{...props}/>}}></Route>\r\n                    {isAdmin &&\r\n                    <Route path='/government' render={(props) => {return <Government{...props} database={database} getDate={getDate} getYear={getYear} getTime={getTime} user={user} setUser={setUser}/>}}></Route>\r\n                    }\r\n                    <Route path='/profile' render={(props)=>{return <Profile{...props} user={user} database={database} getDate={getDate} getYear={getYear} getTime={getTime}/>}}></Route>\r\n                    <Route path='/licenses' render={(props)=>{return <Licenses{...props} user={user} database={database} getDate={getDate} getYear={getYear} getTime={getTime} setUser={setUser}/>}}></Route>\r\n                    <Route path='/post' render={(props)=>{return <PostPage{...props} user={user} database={database} getTime={getTime} getDate={getDate} getYear={getYear} selectedSection={selectedSection} setSelectedSection={setSelectedSection} selectedPost={selectedPost} setSelectedPost={setSelectedPost}/>}}></Route>\r\n                    <Route path='/map' render={(props) => {return <Map{...props}/>}}></Route>\r\n                    <Route path='/properties' render={(props) => {return <Properties{...props} database={database}/>}}></Route>\r\n                    <Route path='/citizens' render={(props) => {return <Citizens{...props} database={database} user={user}/>}}></Route>\r\n                    <Route path='/settings' render={(props) => {return <Settings{...props} database={database} user={user} setUser={setUser}/>}}></Route>\r\n                    <Route path='/businesses' render={(props) => {return <Businesses{...props} database={database} user={user} setUser={setUser} getTime={getTime} getDate={getDate} getYear={getYear}/>}}></Route>\r\n                    <Route path='/business' render={(props) => {return <Business{...props} database={database} user={user} setUser={setUser} getTime={getTime} getDate={getDate} getYear={getYear}/>}}></Route>\r\n                </Switch>\r\n            </Router>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default React.memo(Panel);\r\n","import React from \"react\";\r\nimport Panel from \"../Mid Level/Panel\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\n\r\n\r\nconst Content = ({\r\n  isAdmin,\r\n  currentDate,\r\n  currentYear,\r\n  user,\r\n  database,\r\n  getTime,\r\n  getDate,\r\n  getYear,\r\n  setUser\r\n}) => {\r\n  \r\n  return (\r\n    <main className=\"-mt-24 lg:pb-8 bg-blue-200\">\r\n      <div className=\"max-w-3xl mx-auto px-2 sm:px-6 lg:max-w-7xl lg:px-8\">\r\n        <h1 className=\"sr-only\">Page title</h1>\r\n        {/* Main 3 column grid */}\r\n        <div className=\"grid grid-cols-1 gap-4 items-start lg:grid-cols-3 lg:gap-8\">\r\n          {/* Left column */}\r\n          <Router>\r\n            <Switch>\r\n              <Route exact path={['/bank', '/constitution', '/calendar', '/resources', '/', '/profile', isAdmin ? '/government' : '', '/licenses', '/post', '/map', '/properties', '/citizens', '/settings', '/businesses', '/business']}\r\n                render={(props)=>{return(\r\n                  <div className=\"grid grid-cols-1 gap-4 lg:col-span-3 py-2 lg:pt-5\">\r\n                  <section aria-labelledby=\"section-1-title\">\r\n                    <h2 className=\"sr-only\" id=\"section-1-title\">\r\n                      Section title\r\n                    </h2>\r\n                    <div className=\"border-2 border-gray-700 bg-white shadow\">\r\n                      <div className=\"p-2 lg:p-6\">\r\n                        {\r\n                          /* Your content */\r\n                          <Panel isAdmin={isAdmin}\r\n                                      user={user}\r\n                                      database={database}\r\n                                      getTime={getTime}\r\n                                      getYear={getYear}\r\n                                      getDate={getDate}\r\n                                      currentYear={currentYear}\r\n                                      currentDate={currentDate}\r\n                                      setUser={setUser}\r\n                                      />\r\n                        }\r\n                      </div>\r\n                    \r\n                    </div>\r\n                \r\n                  </section>\r\n                </div>\r\n                );}}/>\r\n              \r\n          </Switch>\r\n          </Router>\r\n        </div>\r\n        \r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Content;\r\n","import React from 'react';\r\n  \r\nconst Footer = () => {\r\n    return(\r\n        <footer className=\"bg-dark\">\r\n          <div className=\"max-w-7xl mx-auto py-12 px-4 sm:px-6 md:flex md:items-center md:justify-between lg:px-8\">\r\n            <div className=\"mt-8 md:mt-0 md:order-1\">\r\n              <p className=\"text-center text-base text-green\">&copy; 2021 Jonah Nelson. All rights reserved.</p>\r\n            </div>\r\n          </div>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default Footer;","import Header from \"../Fragments/High Level/Header\";\r\nimport Content from \"../Fragments/High Level/Content\";\r\nimport Footer from \"../Fragments/High Level/Footer\";\r\n\r\nconst Main = ({user, setUser, setSignedIn, setIsAdmin, isAdmin, database, currentTime, currentDate, currentYear, getTime, getDate, getYear}) => {\r\n    return(\r\n        <>\r\n            <Header setIsAdmin={setIsAdmin} currentTime={currentTime} currentDate={currentDate} currentYear={currentYear} user={user}\r\n                setSignedIn={setSignedIn} isAdmin={isAdmin} setUser={setUser}/>\r\n            <Content user={user} database={database} setUser={setUser}\r\n                        isAdmin={isAdmin} currentDate={currentDate} currentYear={currentYear} getDate={getDate} getYear={getYear} getTime={getTime} />\r\n            <Footer/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Main;","import \"./App.css\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport SignIn from \"./Components/Pages/SignIn\";\r\nimport Main from \"./Components/Pages/Main\"\r\nimport './App.css';\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\n\r\nconst firebaseInstance = firebase.initializeApp({\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_APP_ID,\r\n});\r\n\r\nconst database =  firebaseInstance.database();\r\n\r\nconst rushingtonEpoch = 1522648800;\r\n\r\n\r\nfunction App() {\r\n  const [citizens, setCitizens] = useState();\r\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')));\r\n  const [isAdmin, setIsAdmin] = useState(booleanify(localStorage.getItem('isAdmin')));\r\n  const [signedIn, setSignedIn] = useState(booleanify(localStorage.getItem(\"signedIn\")));\r\n  const [currentYear, setCurrentYear] = useState(getYear());\r\n  const [currentDate, setCurrentDate] = useState(getDate());\r\n  const [currentTime, setCurrentTime] = useState(getTime());\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setCurrentTime(getTime());\r\n      setCurrentDate(getDate());\r\n      setCurrentYear(getYear());\r\n    }, 1000);\r\n    return () => clearInterval(interval);\r\n  });\r\n\r\n  useEffect(updateCitizens, []);\r\n\r\n  function updateCitizens(){\r\n    database.ref('citizens').get().then(\r\n      citizensSnapshot => {\r\n        setCitizens(citizensSnapshot.val());\r\n        if(user != undefined){\r\n          setUser(citizensSnapshot.val()[user.citizenID]);\r\n          localStorage.setItem('user', JSON.stringify(citizensSnapshot.val()[user.citizenID]));\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  // Show the signed in content if user is signed in. Handling it this way here is a nice, easy way to do it\r\n  if (signedIn === true) {\r\n    return (\r\n      <Main\r\n        signedIn={signedIn}\r\n        setSignedIn={setSignedIn}\r\n        setIsAdmin={setIsAdmin}\r\n        isAdmin={isAdmin}\r\n        citizens={citizens}\r\n        setUser={setUser}\r\n        user={user}\r\n        database={database}\r\n        currentTime={currentTime}\r\n        currentDate={currentDate}\r\n        currentYear={currentYear}\r\n        getTime={getTime}\r\n        getDate={getDate}\r\n        getYear={getYear}\r\n      />\r\n    );\r\n\r\n    // Show sign in screen if user isn't signed in\r\n  } else {\r\n    return (\r\n      <SignIn\r\n        signedIn={signedIn}\r\n        setSignedIn={setSignedIn}\r\n        setIsAdmin={setIsAdmin}\r\n        citizens={citizens}\r\n        setUser={setUser}\r\n        database={database}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\n// Local storage only stores strings, so to actually be able to use the signedIn local storage info, it has to be\r\n// converted into a boolean\r\nfunction booleanify(s) {\r\n  if (s === \"true\" || s === true) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nconst months = [\r\n  {number: 1, name: 'Igmo'},\r\n  {number: 2, name: 'Bostiod'},\r\n  {number: 3, name: 'Walin'},\r\n  {number: 4, name: 'Sabetata'},\r\n  {number: 5, name: 'Carton'},\r\n  {number: 6, name: 'Wayu'},\r\n  {number: 7, name: 'Wildder'},\r\n  {number: 8, name: 'Wekenbarg'},\r\n  {number: 9, name: 'Pape'},\r\n  {number: 10, name: 'Fortis'},\r\n  {number: 11, name: 'Callidus'},\r\n  {number: 12, name: 'Fastis'}\r\n];\r\n\r\n// Converts the total number of seconds since April 2018 (when we started the Minecraft world, basically the epoch)\r\n// to a time based on year, month, day, and \"hour\" sizes that I chose\r\nfunction getTime(){\r\n  var currentTotalSeconds, year, month, day, hour, seconds;\r\n  const currentDate = new Date();\r\n  currentTotalSeconds = Math.round((currentDate.getTime()/1000)-rushingtonEpoch);\r\n  year = toFixed(currentTotalSeconds/345600, 0);\r\n  month = toFixed((currentTotalSeconds - (345600 * year))/28800, 0);\r\n  day = toFixed(((currentTotalSeconds - (345600 * year) - (28800 * month)))/1200, 0);\r\n  hour = toFixed(((currentTotalSeconds - (345600 * year) - (28800 * month) - (1200 * day))/60), 0);\r\n  seconds = toFixed(currentTotalSeconds - (345600 * year) - (28800 * month) - (1200 * day) - (60 * hour), 0);\r\n  hour++;\r\n  if(String(seconds).length > 1){\r\n    seconds = String(seconds);\r\n  } else {\r\n    seconds = `0${seconds}`;\r\n  }\r\n  return(`${hour}:${seconds}`);\r\n}\r\n\r\n// Converts seconds since \"Rushington epoch\" to a date and returns a formatted string\r\nfunction getDate(){\r\n  var currentTotalSeconds, year, month, day;\r\n  const currentDate = new Date();\r\n  currentTotalSeconds = Math.round((currentDate.getTime()/1000)-rushingtonEpoch);\r\n  year = toFixed(currentTotalSeconds/345600, 0);\r\n  month = toFixed((currentTotalSeconds - (345600 * year))/28800, 0);\r\n  day = toFixed(((currentTotalSeconds - (345600 * year) - (28800 * month)))/1200 + 1, 0);\r\n  var monthString = '';\r\n  months.forEach(monthItem => {\r\n    if(monthItem.number === Number(month) + 1){\r\n      monthString = monthItem.name;\r\n    }\r\n  });\r\n  var dayString = String(day);\r\n  if(dayString.endsWith('0') ||\r\n     dayString.endsWith('4') ||\r\n     dayString.endsWith('5') ||\r\n     dayString.endsWith('6') ||\r\n     dayString.endsWith('7') ||\r\n     dayString.endsWith('8') ||\r\n     dayString.endsWith('9')){\r\n       dayString = dayString.concat('th');\r\n     } else if(dayString.endsWith('1')){\r\n       dayString = dayString == '11' ? dayString.concat('th') : dayString.concat('st');\r\n     } else if(dayString.endsWith('2')){\r\n       dayString = dayString == '12' ? dayString.concat('th') : dayString.concat('nd');\r\n     } else if(dayString.endsWith('3')){\r\n       dayString = dayString == '13' ? dayString.concat('th') : dayString.concat('rd');\r\n     }\r\n  return(`${monthString} ${dayString}`);\r\n}\r\n\r\n// Converts seconds since Rushington epoch to years\r\nfunction getYear(){\r\n  var currentTotalSeconds, year;\r\n  const currentDate = new Date();\r\n  currentTotalSeconds = Math.round((currentDate.getTime()/1000)-rushingtonEpoch);\r\n  year = toFixed(currentTotalSeconds/345600, 0);\r\n  return(`${year}`);\r\n}\r\n\r\n// Function I found online that helps me cut off decimals because by their nature dates and times only\r\n// switch when it hits the above unit. Rounding doesn't do the job\r\nfunction toFixed(num, fixed) {\r\n  var re = new RegExp('^-?\\\\d+(?:\\.\\\\d{0,' + (fixed || -1) + '})?');\r\n  return num.toString().match(re)[0];\r\n}\r\n\r\nexport default App;","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}