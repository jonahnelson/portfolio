(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{48:function(e,t,s){},66:function(e,t,s){},96:function(e,t,s){"use strict";s.r(t);var c=s(0),n=s.n(c),a=s(32),r=s.n(a),i=(s(66),s(3)),l=(s(48),s.p+"static/media/RushingtonAtNight.5d0400fe.png"),o=s(1),d=function(e){var t=e.setSignedIn,s=e.citizens,n=e.setIsAdmin,a=e.setUser,r=Object(c.useState)(void 0!=localStorage.getItem("citizenID")?localStorage.getItem("citizenID"):""),d=Object(i.a)(r,2),b=d[0],j=d[1],m=Object(c.useState)(""),u=Object(i.a)(m,2),h=u[0],f=u[1];function x(){if(p(b,!1,!0)&&void 0!=s){var e=Object.values(s),c=!1;e.forEach((function(e){e.citizenID==b&&(c=!0,a(e),n("CI-78614"==b),localStorage.setItem("signedIn","true"),localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("isAdmin","CI-78614"==b),t(!0))})),f(c?"":"Citizen ID has a valid format, but found no matches. Try refreshing")}}function p(e,t,s){return 1==e.length&&!e.startsWith("C")||2==e.length&&!e.startsWith("CI")||e.length>=3&&!e.startsWith("CI-")?e.length<8?0==e.length?(s&&f(t?"":"Enter Citizen ID to sign in"),!!t):(s&&f("Invalid format. Citizen ID must begin with 'CI-'"),!1):(s&&f("Invalid format. Citizen ID must begin with 'CI-' and be followed by 5 numbers"),!1):0==e.length?(s&&f(t?"":"Enter Citizen ID to sign in"),!!t):e.length<8?(s&&f(t?"":"Invalid format. Citizen ID is too short. 5 numbers must follow 'CI-'"),!!t):e.length>8?(s&&f("Invalid format. Citizen ID is too dang long! At most 5 numbers must follow 'CI-'"),!1):Number(e.substring(3,9))?(console.log("nu",Number(e.substring(3,9))),s&&f(""),!0):(s&&f("Invalid format. 5 numbers must follow 'CI-'"),!1)}function g(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}return Object(o.jsx)("div",{className:"min-h-screen justify-center py-12",style:{backgroundImage:"url(".concat(l,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:Object(o.jsxs)("div",{className:"mx-6 lg:mx-0",children:[Object(o.jsx)("div",{className:"sm:mx-auto  sm:w-full sm:max-w-md ",children:Object(o.jsx)("div",{className:"flex justify-center bg-gray-200 py-8 px-4 shadow rounded-t-lg sm:px-10",children:Object(o.jsx)("div",{className:"shadow bg-white border-l-2 border-b-2 border-blue-300 border-b-blue-200",children:Object(o.jsxs)("a",{href:"#",children:[Object(o.jsx)("span",{className:"sr-only",children:"Workflow"}),Object(o.jsx)("p",{className:"text-3xl font-bold text-gray-700 p-1 border-r-2 border-t-2 border-yellow-300",children:"Rushington Hub"})]})})})}),Object(o.jsx)("div",{className:"sm:mx-auto  sm:w-full sm:max-w-md",children:Object(o.jsx)("div",{className:"bg-blue-200 py-8 px-4 shadow rounded-b-lg sm:px-10",children:Object(o.jsxs)("div",{className:"w-full",children:[Object(o.jsx)("p",{className:"font-semibold text-center",children:"Enter Citizen ID to Continue"}),Object(o.jsx)("input",{placeholder:"e.g. CI-49893, CI-28492...",value:b,onInput:function(e){j(e.target.value),p(e.target.value,!0,!0)},onKeyDown:function(e){"Enter"===e.code&&x()},className:g(p(b,!0,!1)?"":"text-red-500 font-semibold","w-full type-password focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1 rounded")}),Object(o.jsx)("div",{className:"w-full flex justify-center py-6",children:Object(o.jsx)("button",{className:g(void 0!=s&&p(b,!1,!1)?"bg-yellow-300 text-gray-800 hover:bg-yellow-400":"bg-yellow-200 text-gray-400","flex justify-center w-1/3 py-2 shadow font-semibold rounded"),onClick:x,children:"SIGN IN"})}),h&&Object(o.jsx)("p",{className:"text-center text-red-500 bg-white shadow p-1 font-semibold",children:h})]})})})]})})},b=n.a.memo(d),j=s(111),m=s(114),u=s(115),h=s(4),f=s.p+"static/media/logo.a626faa1.svg";function x(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}var p=[{title:"Home",active:!0,href:"/"},{title:"All Resources",active:!1,href:"/resources"},{title:"Profile",active:!1,href:"/profile"},{title:"Government",active:!1,href:"/government"}],g=[{title:"Home",active:!0,href:"/"},{title:"All Resources",active:!1,href:"/resources"},{title:"Profile",active:!1,href:"/profile"}],O=function(e){var t=e.setSignedIn,s=e.isAdmin,n=e.setIsAdmin,a=e.currentTime,r=e.currentDate,i=e.currentYear,l=e.user,d=e.setUser;function b(){d(null),n(null),localStorage.setItem("signedIn",null),localStorage.setItem("user",null),localStorage.setItem("isAdmin",null),t(null)}return Object(o.jsx)(j.a,{as:"header",className:"pb-24 bg-gray-100 align-bottom",children:function(e){var t=e.open;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("a",{className:"lg:hidden bg-black w-full flow-root px-2 pt-2.5 pb-1 h-10 fixed z-50",href:"/calendar",children:[Object(o.jsxs)("p",{className:"text-white float-right font-semibold",children:[r,", ",i]}),Object(o.jsx)("p",{className:"text-white float-left font-semibold",children:a})]}),Object(o.jsxs)("div",{className:" px-4 sm:px-6 pt-9 lg:pt-0 w-full",children:[Object(o.jsxs)("div",{className:"relative pt-5 pb-1 align-items-bottom items-baseline h-16 lg:h-24",children:[Object(o.jsxs)("div",{className:"flow-root w-full align-bottom",children:[Object(o.jsxs)("div",{className:"absolute bottom-1 lg:bottom-0 left-0",children:[Object(o.jsx)("div",{className:"shadow bg-white border-l-2 border-b-2 border-blue-300 border-b-blue-200",children:Object(o.jsxs)("a",{href:"/",children:[Object(o.jsx)("span",{className:"sr-only",children:"Workflow"}),Object(o.jsx)("p",{className:"text-3xl font-bold text-gray-700 p-1 border-r-2 border-t-2 border-yellow-300",children:"Rushington Hub"})]})}),Object(o.jsxs)("a",{href:"/calendar",className:"hidden lg:flow-root hover:bg-white px-1 hover:border hover:border-1 hover:border-gray-700",children:[Object(o.jsx)("div",{className:"float-left",children:Object(o.jsx)("p",{className:"text-base text-gray-700 font-semibold",children:a})}),Object(o.jsxs)("p",{className:"text-base text-gray-700 float-right font-semibold",children:[r,", ",i]})]})]}),Object(o.jsx)("div",{className:"absolute bottom-0 right-0",children:Object(o.jsx)(m.a,{as:"div",className:"relative flex-shrink-0",children:function(e){var t=e.profileOpen;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{children:Object(o.jsxs)(m.a.Button,{className:"bg-gray hover:bg-white px-2 rounded text-right text-sm focus:outline-none focus:ring-opacity-100",children:[Object(o.jsx)("p",{className:"lg:text-lg text-gray-700 font-semibold",children:l.citizenID}),Object(o.jsx)("p",{className:"lg:text-lg text-gray-700 font-semibold",children:l.name})]})}),Object(o.jsx)(u.a,{show:t,as:c.Fragment,enter:"transition ease-out duration-75",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(o.jsxs)(m.a.Items,{static:!0,className:"origin-top-right z-40 absolute -right-2 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-green ring-opacity-5 focus:outline-none",children:[Object(o.jsx)(m.a.Item,{children:function(e){var t=e.active;return Object(o.jsx)("button",{onClick:function(e){e.preventDefault(),localStorage.setItem("selectedCitizen",JSON.stringify(l)),window.location.href="/profile"},className:x(t?"bg-gray-100":"","block px-4 py-2 text-sm w-full text-left text-green"),children:"Profile"})}}),Object(o.jsx)(m.a.Item,{children:function(e){var t=e.active;return Object(o.jsx)("a",{onClick:b,href:"/",className:x(t?"bg-gray-100":"","block px-4 py-2 text-sm text-green w-full text-left"),children:"Sign Out"})}})]})})]})}})})]}),Object(o.jsx)("div",{className:"absolute right-0 flex-shrink-0 hidden",children:Object(o.jsxs)(j.a.Button,{className:"bg-transparent p-2 rounded-md inline-flex items-center justify-center text-green hover:text-green hover:bg-gray hover:bg-opacity-10",children:[Object(o.jsx)("span",{className:"sr-only",children:"Open main menu"}),t?Object(o.jsx)(h.C,{className:"block h-6 w-6","aria-hidden":"true"}):Object(o.jsx)(h.r,{className:"block h-6 w-6","aria-hidden":"true"})]})})]}),Object(o.jsx)("div",{className:"lg:block border-t border-gray-700 border-opacity-40 py-3",children:Object(o.jsx)("div",{className:"lg:grid lg:grid-cols-3 lg:gap-8 lg:items-center",children:Object(o.jsxs)("div",{className:"lg:col-span-2",children:[s&&Object(o.jsx)("nav",{className:"flex lg:space-x-4",children:p.map((function(e){return Object(o.jsx)("a",{href:e.href,onClick:function(t){"/profile"==e.href&&(t.preventDefault(),localStorage.setItem("selectedCitizen",JSON.stringify(l)),window.location.href="/profile")},className:x((e.active,"text-blue-600"),"flex-auto lg:flex-none text-center lg:text-left text-sm font-semibold rounded-md px-3 py-2 hover:bg-gray-200"),"aria-current":e.active?"page":"false",children:e.title},e.title)}))}),!s&&Object(o.jsx)("nav",{className:"flex lg:space-x-4",children:g.map((function(e){return Object(o.jsx)("a",{href:e.href,onClick:function(t){"/profile"==e.href&&(t.preventDefault(),localStorage.setItem("selectedCitizen",JSON.stringify(l)),window.location.href="/profile")},className:x((e.active,"text-blue-600"),"flex-auto lg:flex-none text-center lg:text-left text-sm font-semibold rounded-md px-3 py-2 hover:bg-gray-200"),"aria-current":e.active?"page":"false",children:e.title},e.title)}))})]})})})]}),Object(o.jsx)(u.a.Root,{show:t,as:c.Fragment,children:Object(o.jsxs)("div",{className:"lg:hidden",children:[Object(o.jsx)(u.a.Child,{as:c.Fragment,enter:"duration-150 ease-out",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"duration-150 ease-in",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(o.jsx)(j.a.Overlay,{static:!0,className:"z-20 fixed inset-0 bg-gray bg-opacity-25"})}),Object(o.jsx)(u.a.Child,{as:c.Fragment,enter:"duration-150 ease-out",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"duration-150 ease-in",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:Object(o.jsx)(j.a.Panel,{focus:!0,static:!0,className:"z-30 absolute top-0 inset-x-0 max-w-3xl mx-auto w-full p-2 transition transform origin-top",children:Object(o.jsx)("div",{className:"rounded-lg shadow-lg ring-1 ring-green ring-opacity-5 bg-white divide-y divide-gray",children:Object(o.jsxs)("div",{className:"pt-3 pb-2",children:[Object(o.jsxs)("div",{className:"flex items-center justify-between px-4",children:[Object(o.jsx)("div",{children:Object(o.jsx)("img",{className:"h-8 w-auto",src:f,alt:"GET Graph"})}),Object(o.jsx)("div",{className:"-mr-2",children:Object(o.jsxs)(j.a.Button,{className:"bg-gray rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100",children:[Object(o.jsx)("span",{className:"sr-only",children:"Close menu"}),Object(o.jsx)(h.C,{className:"h-6 w-6","aria-hidden":"true"})]})})]}),Object(o.jsxs)("div",{className:"mt-3 px-2 space-y-1",children:[s&&p.map((function(e,t){return Object(o.jsx)("a",{href:e.href,className:"block rounded-md px-3 py-2 text-base text-blue-600 font-semibold hover:bg-dark hover:text-blue-800",children:e.title},t)})),!s&&g.map((function(e,t){return Object(o.jsx)("a",{href:e.href,className:"block rounded-md px-3 py-2 text-base text-blue-600 font-semibold hover:bg-dark hover:text-blue-800",children:e.title},t)}))]})]})})})})]})})]})}})},v=s(13),N=s(42),y=s(15),w=s(31),D=function(e){Object(w.a)(e);var t=[{name:"Bank",subtext:"Transfer money, see balance, and see transfer history",icon:h.p,href:"/bank"},{name:"Businesses",subtext:"Add businesses and buy from other businesses",icon:h.h,href:"/businesses"},{name:"Licenses",subtext:"Buy new Rushington licenses and see purchased ones",icon:h.l,href:"/licenses"},{name:"Citizens",subtext:"See all Rushington citizens and their profiles",icon:h.A,href:"/citizens"},{name:"Map",subtext:"Full map of Rushington",icon:h.q,href:"/map"},{name:"Constitution",subtext:"Rushington's system of government, laws, rights, and policies",icon:h.e,href:"/constitution"},{name:"Calendar",subtext:"Rushington's yearly calendar by month and day",icon:h.g,href:"/calendar"}];return Object(o.jsx)("div",{children:Object(o.jsx)("div",{children:t.map((function(e){return Object(o.jsx)("div",{className:"px-2 lg:px-20 py-2",children:Object(o.jsx)("a",{className:"",href:e.href,children:Object(o.jsxs)("div",{className:"w-full rounded bg-yellow-300 hover:bg-yellow-400 shadow py-6 px-2",children:[Object(o.jsxs)("div",{className:"flex justify-center",children:[Object(o.jsx)(e.icon,{className:"h-7 w-7"}),Object(o.jsx)("p",{className:"font-bold text-xl pl-1",children:e.name})]}),Object(o.jsx)("p",{className:"text-center text-gray-700",children:e.subtext})]})})})}))})})},I=(s(95),s(113)),z=(s(68),function(e){var t=e.open,s=e.setOpen,n=e.header,a=e.additionalComponent,r=Object(c.useRef)(null);function i(){return a()}return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(u.a.Root,{show:t,as:c.Fragment,children:Object(o.jsx)(I.a,{as:"div",static:!0,className:"fixed z-10 inset-0 overflow-y-auto ",open:t,onClose:s,children:Object(o.jsxs)("div",{className:"flex items-end justify-center  min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(o.jsx)(u.a.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(o.jsx)(I.a.Overlay,{className:"fixed inset-0 bg-gray-700 bg-opacity-30 transition-opacity"})}),Object(o.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(o.jsx)(u.a.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(o.jsxs)("div",{className:"inline-block align-bottom justify-items-center bg-gray-100 rounded-lg px-4 pt-5 pb-4 overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6",children:[Object(o.jsx)("div",{className:"flow-root w-full",children:Object(o.jsx)("button",{type:"button",className:"mt-3 inline-flex float-right justify-center rounded-sm border border-gray-600 shadow-sm px-4 py-1 bg-red text-base font-medium text-gray hover:bg-red-600 hover:text-white focus:outline-none sm:mt-0 sm:col-start-1 sm:text-sm",onClick:function(){return s(!1)},ref:r,children:Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"flex items-center justify-center rounded-full",children:Object(o.jsx)("h1",{className:"text-green text-center font-semibold text-2xl px-2",children:n})}),Object(o.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[Object(o.jsx)(I.a.Title,{as:"h3",className:"text-lg leading-6 font-medium text-green"}),Object(o.jsxs)("div",{className:"mt-2",children:[a&&Object(o.jsx)(i,{}),Object(o.jsx)("p",{className:"text-sm text-gray-500"})]})]})]})]})})]})})})})}),S=function(e){var t=e.className,s=e.citizens,n=e.user,a=e.selectedCitizen,r=e.setSelectedCitizen,l=e.filteredCitizens,d=e.setFilteredCitizens,b=e.type,j=Object(c.useState)(""),h=Object(i.a)(j,2),f=h[0],x=h[1];function p(e){return e.open?Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(o.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})}):Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(o.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})})}function g(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}return Object(o.jsx)(m.a,{as:"div",className:g("flex-shrink-0 justify-center",t),children:function(e){var t=e.open;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)(m.a.Button,{className:"bg-white justify-center flex rounded-lg flex px-2 py-2 text-sm ring-2 ring-gray ring-opacity-20 focus:outline-none focus:ring-opacity-100",children:[Object(o.jsx)("p",{className:"text-center",children:void 0!=a?a.name:"Select Citizen..."}),Object(o.jsx)(p,{open:t})]})}),Object(o.jsx)(u.a,{show:t,as:c.Fragment,enter:"transition ease-out duration-75",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)(m.a.Items,{static:!0,className:"z-50 absolute justify-center h-auto w-56 rounded-md shadow-lg py-1 bg-white ring-1 ring-green ring-opacity-5 focus:outline-none",children:[Object(o.jsx)("div",{className:"px-1",children:Object(o.jsx)("input",{className:"rounded w-full focus:outline-none border-2 px-1 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700",defaultValue:f,placeholder:"Search",onChange:function(e){x(e.target.value),d(s.filter((function(t){return console.log(l),t.name.toUpperCase().includes(e.target.value.toUpperCase())})))}})}),Object(o.jsx)("div",{className:"max-h-40 overflow-y-scroll",children:l.filter((function(e){return void 0!=b&&"All"==b||e.citizenID!=n.citizenID})).map((function(e){return Object(o.jsx)(m.a.Item,{children:function(t){var s,c=t.active;return Object(o.jsx)("button",{onClick:function(){r(e)},className:g(c?"bg-gray-100":"","block w-full text-left px-2 py-2 text-sm text-green"),children:Object(o.jsxs)("div",{className:"w-full flow-root",children:[Object(o.jsx)("p",{className:"float-left font-semibold",children:e.name}),Object(o.jsx)("p",{className:"float-right",children:(s=e.citizenID,n.citizenID!=s?"CI-***".concat(s.substring(6,8)):s)})]})})}})}))})]})})})]})}})},C=function(e){var t=e.database,s=e.user,n=(e.setMeldas,e.meldas,e.getTime),a=e.getDate,r=e.getYear,l=(e.setTransfers,e.setNewTransferPopupOpen),d=Object(c.useState)([]),b=Object(i.a)(d,2),j=b[0],m=b[1],u=Object(c.useState)([]),f=Object(i.a)(u,2),x=f[0],p=f[1],g=Object(c.useState)(),O=Object(i.a)(g,2),v=O[0],N=O[1],y=Object(c.useState)(0),w=Object(i.a)(y,2),D=w[0],I=w[1],z=Object(c.useState)(""),C=Object(i.a)(z,2),k=C[0],T=C[1],A=Object(c.useState)(0),E=Object(i.a)(A,2),M=E[0],P=E[1],R=1522648800;function B(){for(var e="MT-",t=0;t<5;t++)e+=String(Math.floor(10*Math.random()));return e}function U(){return void 0!=v&&0!=String(D).length&&!String(D).startsWith("-")&&Number(s.meldas)-Number(D)>=0&&0!=D}return Object(c.useEffect)((function(){t.ref("/citizens").get().then((function(e){m(Object.values(e.val())),p(Object.values(e.val())),t.ref("/government/salesTaxRate").get().then((function(e){P(e.val())}))})),console.log("Called useeffect")}),[]),Object(o.jsxs)("div",{className:"w-full justify-center ",children:[Object(o.jsx)("div",{className:"pb-4",children:Object(o.jsxs)("div",{className:"p-5 bg-blue-200 rounded shadow",children:[Object(o.jsxs)("div",{className:"",children:[Object(o.jsxs)("div",{className:"w-full pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"TO"}),Object(o.jsx)(S,{filteredCitizens:x,setFilteredCitizens:p,citizens:j,selectedCitizen:v,setSelectedCitizen:N,className:"pb-2",user:s})]}),Object(o.jsxs)("div",{className:"w-full pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"AMOUNT"}),Object(o.jsxs)("div",{className:"flex w-full justify-center",children:[Object(o.jsx)("input",{type:"Number",placeholder:"",min:0,max:s.meldas,defaultValue:D,onChange:function(e){I(Number(e.target.value))},className:"rounded appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1"}),Object(o.jsx)("p",{className:"font-semibold pl-1 text-xl",children:"[M]"})]})]})]}),Object(o.jsxs)("div",{className:"pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"REASON"}),Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)("textarea",{placeholder:"",onChange:function(e){T(e.target.value)},className:"rounded w-full bg-white h-20 flex justify-center resize-none focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-2"})})]}),U()&&Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"RESULTING BALANCE"}),Object(o.jsxs)("p",{className:"p-1 font-semibold shadow bg-white ",children:[Number(s.meldas)-Number(D)," ","[M]"]})]}),Object(o.jsxs)("div",{className:"pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"AMOUNT TAXED"}),Object(o.jsxs)("p",{className:"p-1 font-semibold shadow bg-white ",children:[Math.round(Number(D)*Number(M))," [M]"]})]})]})]})}),Object(o.jsx)("button",{className:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}(U()?"text-black bg-yellow-300 hover:bg-yellow-400":"text-gray-400 bg-yellow-100","w-1/3 rounded py-1 px-2 font-semibold shadow"),onClick:function(){var e=0,c=0;U()&&t.ref("/citizens/".concat(v.citizenID,"/meldas")).get().then((function(i){var o=Math.round(Number(D)*M);e=Number(i.val())+Number(D)-o,t.ref("/citizens/".concat(v.citizenID,"/meldas")).set(e),t.ref("/citizens/".concat(s.citizenID,"/meldas")).get().then((function(i){c=Number(i.val())-Number(D),t.ref("/citizens/".concat(s.citizenID,"/meldas")).set(c),s.meldas=c;var d=B();if(t.ref("/citizens/".concat(s.citizenID,"/transfers/").concat(d)).set({transferID:d,date:"".concat(a(),", ").concat(r()),time:n(),ssre:Math.round((new Date).getTime()/1e3-R),amount:D,receiverID:v.citizenID,receiverName:v.name,type:"Outgoing",reason:0!=k.length?k:"None given",resultingBalance:c}),t.ref("/citizens/".concat(v.citizenID,"/transfers/").concat(d)).set({transferID:d,date:"".concat(a(),", ").concat(r()),time:n(),ssre:Math.round((new Date).getTime()/1e3-R),amount:D-o,senderID:s.citizenID,senderName:s.name,type:"Incoming",reason:0!=k.length?k:"None given",resultingBalance:e}),o>0){var b=B();t.ref("/government").get().then((function(e){var c=e.val().meldas+o;t.ref("/government/meldas").set(c),t.ref("/government/transfers/".concat(b)).set({transferID:b,date:"".concat(a(),", ").concat(r()),time:n(),ssre:Math.round((new Date).getTime()/1e3-R),amount:o,senderID:s.citizenID,senderName:s.name,type:"Incoming",reason:"".concat(100*M,"% tax of ").concat(d),resultingBalance:c})}))}t.ref("/citizens/".concat(s.citizenID,"/transfers")).get().then((function(e){console.log("Transfers",e.val()),s.transfers=Object.values(e.val()).sort((function(e,t){return t.ssre-e.ssre})),localStorage.setItem("user",JSON.stringify(s)),l(!1)}))}))}))},children:Object(o.jsxs)("div",{className:"flex justify-center",children:[Object(o.jsx)(h.c,{className:"h-6 w-6"}),"SEND"]})})]})},k=n.a.memo(C),T=function(e){var t=e.user,s=(e.citizenID,e.database),n=e.getTime,a=e.getDate,r=e.getYear,l=Object(c.useState)(!1),d=Object(i.a)(l,2),b=d[0],j=d[1],m=Object(c.useState)("..."),u=Object(i.a)(m,2),f=u[0],x=u[1],p=Object(c.useState)([]),g=Object(i.a)(p,2),O=g[0];g[1];function v(e){return e.startsWith("CI-")&&t.citizenID!=e?"CI-***".concat(e.substring(6,8)):e}return Object(o.jsxs)("div",{className:"mx-1 lg:mx-10 my-1 lg:my-5",children:[Object(o.jsxs)("div",{className:"flow-root py-2",children:[Object(o.jsx)("div",{className:"float-left",children:Object(o.jsx)("p",{className:"text-4xl text-black font-bold",children:"Bank"})}),Object(o.jsx)("div",{className:"float-right",children:Object(o.jsxs)("button",{className:"rounded bg-yellow-300 p-2 font-semibold hover:bg-yellow-400 flex shadow",onClick:function(){j(!0)},children:[Object(o.jsx)(h.u,{className:"w-6 h-6"}),Object(o.jsx)("p",{className:"pl-1",children:"NEW TRANSFER"}),Object(o.jsx)(z,{open:b,setOpen:j,header:"New Transfer",onClickSave:function(){},inputs:[],saveText:"Send",additionalComponent:function(){return Object(o.jsx)(k,{database:s,bankAccounts:O,user:t,setMeldas:x,meldas:f,getTime:n,getDate:a,getYear:r,setNewTransferPopupOpen:j})}})]})})]}),Object(o.jsxs)("div",{className:"p-2 lg:p-6 group bg-gray-100 rounded",children:[Object(o.jsxs)("div",{className:"lg:flow-root w-full  p-1 shadow bg-white border-4 border-gray-500 text-bottom",children:[Object(o.jsx)("div",{className:"lg:float-left text-bottom bg-white",children:Object(o.jsx)("p",{className:"text-2xl font-semibold pl-1 text-gray-700",children:"Current Balance"})}),Object(o.jsxs)("div",{className:"flex justify-center text-2xl font-bold lg:float-right px-1 border-2 border-gray-500 bg-white",children:[Object(o.jsx)("p",{className:"pr-1",children:t.meldas}),Object(o.jsx)("p",{children:"[M]"})]})]}),Object(o.jsxs)("div",{className:"w-full border-gray-500 border-b-4 border-r-4 border-l-4 bg-white",children:[Object(o.jsx)("p",{className:"font-semibold text-gray-700 px-2 pt-2 text-2xl",children:"Transaction History"}),void 0!=t.transfers&&0!=Object.values(t.transfers).length?Object(o.jsx)("div",{className:"lg:p-2 p-1 bg-gray-200",children:Object.values(t.transfers).sort((function(e,t){return t.ssre-e.ssre})).map((function(e){return Object(o.jsx)("div",{className:"p-1",children:Object(o.jsx)(N,{transfer:e})})}))}):Object(o.jsx)("div",{className:"p-2 bg-gray-100",children:Object(o.jsx)("p",{className:"font-bold text-2xl",children:"Nothing yet"})})]})]})]});function N(e){var t=e.transfer;return Object(o.jsxs)("div",{className:"rounded bg-white shadow",children:[Object(o.jsxs)("div",{className:"w-full lg:flow-root",children:[Object(o.jsxs)("p",{className:"lg:float-left pl-2 pt-2 font-semibold text-gray-700",children:[t.date," at ",t.time]}),Object(o.jsxs)("p",{className:"lg:float-right lg:pl-0 pl-2 pr-2 pt-2 font-semibold text-gray-700",children:[t.transferID," ",t.ssre]})]}),Object(o.jsxs)("div",{className:"grid grid-cols-4 lg:gap-3 gap-y-3 p-2",children:["Incoming"==t.type?Object(o.jsxs)("div",{className:"col-span-4 lg:col-span-2 grid grid-cols-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Amount"}),Object(o.jsxs)("p",{className:"text-green-700",children:["+",t.amount," [M]"]})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Sender"}),Object(o.jsx)("p",{className:"",children:t.senderName}),Object(o.jsx)("p",{className:"",children:"Rushington Government"!=t.senderName&&"Rushington Bank"!=t.senderName?v(t.senderID):""})]})]}):Object(o.jsxs)("div",{className:"col-span-4 lg:col-span-2 grid grid-cols-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Amount"}),Object(o.jsxs)("p",{className:"text-red-700",children:["-",t.amount," [M]"]})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Receiver"}),Object(o.jsx)("p",{className:"",children:t.receiverName}),Object(o.jsx)("p",{className:"",children:"Rushington Government"!=t.receiverName&&"Rushington Bank"!=t.receiverName&&"Real Currency"!=t.receiverName?v(t.receiverID):""})]})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Reason"}),Object(o.jsx)("p",{className:"",children:t.reason})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Resulting Balance"}),Object(o.jsxs)("p",{className:"",children:[t.resultingBalance," [M]"]})]})]})]})}},A=function(e){var t=e.currentDate,s=e.currentYear;function c(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}function n(e,t){return 1==t&&10==e?"Dependence Day":1==t&&23==e?"To Day":2==t&&3==e?"Coupon Day":2==t&&4==e?"Government Harassment Day":2==t&&30==e?"Monkey Day":3==t&&1==e?"Day of Stain":3==t&&14==e?"Crisis Day":4==t&&15==e?"Cruelty Day":4==t&&22==e?"Shantik Forest Memorial Day":5==t&&19==e?"Blood Day":5==t&&24==e?"Insurance Day":6==t&&5==e?"Argument Day":6==t&&17==e?"China Day":7==t&&1==e?"Clothes Day":7==t&&20==e?"Thankstaking":8==t&&9==e?"Chive Day":8==t&&20==e?"Jazz Day":void 0}var a=function(){for(var e=[],t=1;t<25;t++)e.push(t);return e}();function r(e,t){var s=""+t;return console.log(s.endsWith("1")),s.endsWith("0")||s.endsWith("4")||s.endsWith("5")||s.endsWith("6")||s.endsWith("7")||s.endsWith("8")||s.endsWith("9")?s=s.concat("th"):s.endsWith("1")?s="11"==s?s.concat("th"):s.concat("st"):s.endsWith("2")?s="12"==s?s.concat("th"):s.concat("nd"):s.endsWith("3")&&(s="13"==s?s.concat("th"):s.concat("rd")),"".concat(e," ").concat(s)}return console.log(a),Object(o.jsxs)("div",{className:"py-10 px-1 lg:px-16",children:[Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)("h",{className:"text-center text-3xl font-bold",children:["Year ",s]})}),[{number:1,name:"Igmo"},{number:2,name:"Bostiod"},{number:3,name:"Walin"},{number:4,name:"Sabetata"},{number:5,name:"Carton"},{number:6,name:"Wayu"},{number:7,name:"Wildder"},{number:8,name:"Wekenbarg"},{number:9,name:"Pape"},{number:10,name:"Fortis"},{number:11,name:"Callidus"},{number:12,name:"Fastis"}].map((function(e){return Object(o.jsx)("div",{className:"py-5",children:Object(o.jsxs)("table",{class:"table-fixed w-full border-collapse",children:[Object(o.jsx)("thead",{children:Object(o.jsx)("tr",{children:Object(o.jsx)("th",{className:"text-left text-xl",children:e.name})})}),Object(o.jsx)("tbody",{children:[4,3,2,1].map((function(s){return Object(o.jsx)("tr",{className:"",children:a.slice(24-6*s,24-6*s+6).map((function(s){return Object(o.jsx)("td",{className:c(t==r(e.name,s)?"bg-yellow-300 hover:bg-yellow-400 text-black":"bg-white hover:bg-gray-200 text-blue-600","border border-gray-500 px-1 h-24"),children:Object(o.jsxs)("div",{className:"w-full h-full",children:[Object(o.jsx)("div",{className:"",children:Object(o.jsx)("p",{className:"text-black",children:s})}),Object(o.jsx)("div",{className:"",children:Object(o.jsx)("p",{className:"break-normal overflow-hidden font-semibold text-xs lg:text-base",children:n(s,e.number)})})]})})}))})}))})]})})}))]})},E=function(){var e=0,t=0,s=0,c=0,n=0;return Object(o.jsxs)("div",{className:"px-2 lg:px-16 py-8",children:[Object(o.jsx)("p",{className:"font-bold text-2xl text-center",children:"Constitution of Rushington"}),Object(o.jsx)("p",{className:"text-sm text-center font-semibold text-gray-800",children:"THE SUPREME LAW OF THE LAND"}),Object(o.jsx)("p",{className:"font-bold pt-5",children:"System of Government"}),Object(o.jsx)("div",{children:Object(o.jsx)("p",{children:"The government of Rushington is a Demoperiatic Oligarchy under the sovereignty of a dictator and a council consisting of two advisors, who are, under the law, citizens. The dictator can create/change laws and any other legal policies. The citizens must follow these laws and legal policies or they will be sentenced to a punishment that the dictator, who acts as a judge, or an appointed licensed judge sees as necessary. The dictator of Rushington can break any laws or legal policies with the permission of both advisors."})}),Object(o.jsx)("p",{className:"font-bold pt-5",children:"Laws"}),Object(o.jsx)("p",{className:"pb-2",children:"The following laws are enforced by the government and licensed police. Citizens must follow these laws within Rushington or they will be sentenced to a punishment."}),["No citizen can alter any governmental, business, or residential property that is not their own unless given verbal or written permission by the owner of the property.","No citizen can interact with containers (chests, furnaces, etc.) that aren\u2019t theirs unless given verbal or written permission or they are labeled \u201cPublic.\u201d","No citizen can trespass on residential property that isn\u2019t theirs unless given verbal or written permission.","No citizen can own TNT.","No citizen can plot to overthrow the government.","No citizen can farm crops/animals, ride horses, create potions, or create and operate a business, unless they paid for and own a license signed by the dictator of Rushington.","No citizen can kill or hurt anyone else unless by self-defense.","No citizen can take items or property (including animals and mobs) that isn\u2019t their own unless given verbal or written permission."].map((function(t){return e++,Object(o.jsx)("div",{children:Object(o.jsxs)("p",{children:[e,". ",t]})})})),Object(o.jsx)("p",{className:"font-bold pt-5",children:"Rights"}),Object(o.jsx)("p",{className:"pb-2",children:"All citizens of Rushington have the following rights while in Rushington that cannot be infringed upon."}),["All citizens of Rushington have the right to say whatever they want without punishment, unless what\u2019s said is a threat against others or the government.","All citizens of Rushington have the right to use any of the government services in the government area of Rushington.","All citizens of Rushington, if they own a business license signed by the dictator of Rushington, have the right to create and operate a business on a business lot they paid for, at a price given by the dictator of Rushington.","All citizens of Rushington have the right to buy (at a price given by the dictator of Rushington), own, and alter property that is their own.","All citizens of Rushington have the right to own any item they want, except TNT.","All citizens of Rushington have the right to a fair public trial by the dictator if they feel they were wrongly prosecuted.","All citizens of Rushington have the right to resist being searched by military personnel if they believe it\u2019s unnecessary, although the dictator may issue a search warrant to allow them to do so.","All citizens have the right to go onto any governmental property (except the Town Hall) and business property unless the property is labeled \u201cPrivate.\u201d","All businesses have the right to refuse service to anyone they want.","All citizens have the right to go onto business properties, as long as business is in mind.","All citizens have the right to alter terrain outside of Rushington.","All citizens have the right to fair treatment under the law."].map((function(e){return t++,Object(o.jsx)("div",{children:Object(o.jsxs)("p",{children:[t,". ",e]})})})),Object(o.jsx)("p",{className:"font-bold pt-5",children:"Policies"}),Object(o.jsx)("p",{className:"pb-2",children:"The following policies describe important information in the daily life of a Rushington citizen."}),["To become a citizen of Rushington, one has to register with the dictator at the registry/licensure. He or she will receive an official certificate of citizenship that contains their information that is signed by the dictator of Rushington. The citizen will then be guaranteed the rights laid out by the Rights section of the Constitution and will be required to follow all laws, or he or she will be punished. It is not required by law that citizens uphold civil responsibilities laid out in the Civil Responsibilities section of the Constitution, but it is preferred.","To create regular currency, a citizen must find/mine/get gold and rename it with an anvil. Gold nuggets are renamed \u201cMeldas\u201d, gold ingots are renamed \u201cDemorias\u201d, and gold blocks are renamed \u201cRildas.\u201d Each citizen is free to use currency however they please.","To get a property, a citizen must ask which properties are free to use, and the dictator of Rushington will show them which to use based on the purpose (residential vs. business, type of business, etc.) and property balance across the city.","To create a book for the library, a citizen has to put the book in a submission box in the library, and the book will be put in the library in its appropriate genre if it\u2019s approved by the dictator.","To attain a license, a citizen must buy it on the Rushington Hub website. It is illegal for a citizen to do an action that legally requires a license without owning that license.","To sign up for the military, a citizen must meet with the dictator or general at the military office and be trained, approved, and registered.","To become a police officer, a citizen must purchase a Police Officer License on the Rushington Hub website. He or she will be encouraged to wear the now legal netherite armor and will legally be able to reasonably threaten to enact or enact violence to enforce the law. If the Rushington government believes the threat or enaction was not reasonable, however, that is grounds for license revocation.","To use the bank, a citizen drops their gold nuggets, ingots, or blocks into their deposit box at the bank, and the dictator will keep track of the money of each citizen, occasionally granting interest at the cost of the government."].map((function(e){return s++,Object(o.jsx)("div",{children:Object(o.jsxs)("p",{children:[s,". ",e]})})})),Object(o.jsx)("p",{className:"font-bold pt-5",children:"Civil Responsibilities"}),Object(o.jsx)("p",{className:"pb-2",children:"The following civil responsibilities are not required by law to perform, but they are preferred in order to maintain Rushington the best that is possible."}),["All citizens should kill any harmful mobs they see within Rushington.","All citizens should fix any property damage caused by creepers/fire/TNT that they find to the best of their ability.","All citizens should buy residential property and build a home.","All citizens should start a business or get a job as part of an already existing business.","All citizens should use government services."].map((function(e){return c++,Object(o.jsx)("div",{children:Object(o.jsxs)("p",{children:[c,". ",e]})})})),Object(o.jsx)("p",{className:"font-bold pt-5",children:"Constitutional Additions/Changes"}),Object(o.jsx)("p",{className:"pb-2",children:"The following additions/changes overrule any already existing constitutional ideas."}),["(Additional Law). Advisors are citizens in the eyes of the law, but they can legally alter any governmental property as they see fit.","(Additional Right). All citizens have the right to expression. They may wear any skin and armor.","(Additional Law). No citizen can wear/own a green leather cap, as they are only worn by military personnel, and any offense would be stolen valor.","(Additional Right). All citizens have the right to kill any animals/mobs on their property or on governmental/business property that doesn\u2019t clearly belong to that government/business.","(Additional Law). All citizens have to fix any property damage that was caused by a creeper that exploded in an attempt to kill that citizen.","(Additional Law). The most recent edition of the Constitution is the Supreme Law of the Land.","(Additional Right). No citizen of Rushington can be convicted of a crime that was not prohibited previous of the crime.","(Addition to the System of Government). The dictator of Rushington needs the approval of one of the advisors of a punishment when deciding a verdict.","(Clarification of Right 8). No citizen can enter or alter the property that the Town Hall is on (defined the innermost green hedge).","(Addition to the System of Government). The dictator of Rushington has the right to infringe upon a citizen\u2019s right(s) if given permission by both advisors.","(Additional Policy). Citizens have to pay for their residential/business property within a month of beginning the purchase.","(Additional Policy). Citizens have to start paying for a residential/business property within a day of the property being registered to the citizen.","(Additional Law). No citizen can host a business on their business property if he or she does not own a Business and Organization License.","(Additional Law). No citizen can wear netherite armor if he or she is not a licensed police officer."].map((function(e){return n++,Object(o.jsx)("div",{children:Object(o.jsxs)("p",{children:[n," ",e]})})}))]})},M=s(11),P=function(e){var t=e.className,s=e.citizens,n=(e.user,e.selectedCitizen),a=e.setSelectedCitizen,r=e.filteredCitizens,l=e.setFilteredCitizens,d=Object(c.useState)(""),b=Object(i.a)(d,2),j=b[0],h=b[1];function f(e){return e.open?Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(o.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})}):Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(o.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})})}function x(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}return Object(o.jsx)(m.a,{as:"div",className:x("flex-shrink-0 justify-center",t),children:function(e){var t=e.open;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)(m.a.Button,{className:"bg-white justify-center flex rounded-lg flex px-2 py-1 text-sm ring-2 ring-gray ring-opacity-20 focus:outline-none focus:ring-opacity-100",children:[Object(o.jsx)("p",{className:"text-center",children:void 0!=n?n.name:"Select Citizen..."}),Object(o.jsx)(f,{open:t})]})}),Object(o.jsx)(u.a,{show:t,as:c.Fragment,enter:"transition ease-out duration-75",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)(m.a.Items,{static:!0,className:"z-50 absolute justify-center h-auto w-56 rounded-md shadow-lg py-1 bg-white ring-1 ring-green ring-opacity-5 focus:outline-none",children:[Object(o.jsx)("div",{className:"px-1",children:Object(o.jsx)("input",{className:"w-full focus:outline-none bg-gray-100 border-2 px-1 border-gray-500 focus:border-gray-700",defaultValue:j,placeholder:"Search",onChange:function(e){h(e.target.value),l(s.filter((function(t){return console.log(r),t.name.toUpperCase().includes(e.target.value.toUpperCase())})))}})}),Object(o.jsx)("div",{className:"max-h-40 overflow-y-scroll",children:r.map((function(e){return Object(o.jsx)(m.a.Item,{children:function(t){var s=t.active;return Object(o.jsx)("button",{onClick:function(){a(e)},className:x(s?"bg-gray-100":"","block w-full text-left px-2 py-2 text-sm text-green"),children:Object(o.jsxs)("div",{className:"w-full flow-root",children:[Object(o.jsx)("p",{className:"float-left font-semibold",children:e.name}),Object(o.jsx)("p",{className:"float-right",children:e.citizenID})]})})}})}))})]})})})]})}})},R=function(e){var t=e.database,s=e.getTime,n=e.getDate,a=e.getYear,r=e.selectedCitizen,l=e.setSelectedCitizen,d=e.setNewChargePopupOpen,b=e.setValues,j=Object(c.useState)([]),m=Object(i.a)(j,2),u=m[0],h=m[1],f=Object(c.useState)([]),x=Object(i.a)(f,2),p=x[0],g=x[1],O=Object(c.useState)(r),v=Object(i.a)(O,2),N=v[0],y=(v[1],Object(c.useState)()),w=Object(i.a)(y,2),D=w[0],I=w[1],z=Object(c.useState)(""),S=Object(i.a)(z,2),C=S[0],k=S[1],T=Object(c.useState)(""),A=Object(i.a)(T,2),E=A[0],R=A[1],B=Object(c.useState)(""),U=Object(i.a)(B,2),F=U[0],L=U[1],Y=Object(c.useState)(!0),W=Object(i.a)(Y,2),G=W[0],J=W[1],V=1522648800;function H(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}return Object(c.useEffect)((function(){t.ref("/citizens").get().then((function(e){h(Object.values(e.val())),g(Object.values(e.val())),console.log(Object.values(e.val())[0])})),console.log("Called useeffect")}),[]),Object(o.jsxs)("div",{className:"w-full justify-center ",children:[Object(o.jsx)("div",{className:"pb-4",children:Object(o.jsxs)("div",{className:"p-5 bg-blue-200 rounded shadow",children:[Object(o.jsxs)("div",{className:"flow-root w-full pb-5",children:[Object(o.jsxs)("div",{className:"float-left w-1/2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"PROSECUTOR"}),Object(o.jsx)(P,{filteredCitizens:p,setFilteredCitizens:g,citizens:u,selectedCitizen:D,setSelectedCitizen:I,className:"pb-2"})]}),Object(o.jsxs)("div",{className:"float-right w-1/2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"DEFENDANT"}),Object(o.jsx)("p",{children:r.name})]})]}),Object(o.jsxs)("div",{className:"w-full",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"ALLEGED CRIME"}),Object(o.jsx)("textarea",{className:"w-full focus:outline-none p-2",placeholder:"",onChange:function(e){k(e.target.value)}})]}),Object(o.jsxs)("div",{className:"w-full flex justify-center pt-2",children:[Object(o.jsx)("button",{className:H(G?"text-black bg-yellow-300":"text-gray-400 bg-yellow-100 hover:bg-yellow-200","w-1/3 rounded-l py-1 px-2 font-semibold text-sm"),onClick:function(){J(!0)},children:"GUILTY"}),Object(o.jsx)("button",{className:H(G?"text-gray-400 bg-yellow-100 hover:bg-yellow-200":"text-black bg-yellow-300","w-1/3 rounded-r py-1 px-2 font-semibold text-sm"),onClick:function(){J(!1)},children:"NOT GUILTY"})]}),Object(o.jsxs)("div",{className:"w-full pt-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"REASON"}),Object(o.jsx)("textarea",{className:"w-full focus:outline-none p-2",placeholder:"",onChange:function(e){R(e.target.value)}})]}),G&&Object(o.jsxs)("div",{className:"w-full pt-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"PUNISHMENT"}),Object(o.jsx)("textarea",{className:"w-full focus:outline-none p-2",placeholder:"",onChange:function(e){L(e.target.value)}})]})]})}),Object(o.jsx)("button",{className:H(void 0!=N&&void 0!=D?"text-black bg-yellow-300 hover:bg-yellow-400":"text-gray-400 bg-yellow-100","w-1/3 rounded py-1 px-2 font-semibold"),onClick:function(){t.ref("/citizens/".concat(r.citizenID)).get().then((function(e){var c=e.val(),i={},o=function(){for(var e="CC-",t=0;t<5;t++)e+=String(Math.floor(10*Math.random()));return e}();i=G?{date:"".concat(n(),", ").concat(a()),time:"".concat(s()),ssre:Math.round((new Date).getTime()/1e3-V),chargeID:o,defendant:{name:N.name,citizenID:N.citizenID},prosecutor:{name:D.name,citizenID:D.citizenID},crime:C,verdict:"Guilty",reasonForVerdict:E,punishment:F}:{date:"".concat(n(),", ").concat(a()),time:"".concat(s()),ssre:Math.round((new Date).getTime()/1e3-V),chargeID:o,defendant:{name:N.name,citizenID:N.citizenID},prosecutor:{name:D.name,citizenID:D.citizenID},allegedCrime:C,verdict:"Not Guilty",reasonForVerdict:E},t.ref("/citizens/".concat(r.citizenID,"/charges/").concat(o)).set(i),t.ref("/criminalCharges/".concat(o)).set(i),console.log("Charges",r.charges),c.charges=void 0!=c.charges?JSON.parse(JSON.stringify([].concat(Object(M.a)(Object.values(c.charges)),[i]))):JSON.parse(JSON.stringify([i])),b(),l(c),d(!1)}))},children:"Add"})]})},B=n.a.memo(R),U=function(e){var t=e.database,s=e.getTime,n=e.getDate,a=e.getYear,r=e.properties,l=e.setProperties,d=e.setAddPropertyPopupOpen,b=Object(c.useState)(),j=Object(i.a)(b,2),h=j[0],f=j[1],x=Object(c.useState)(""),p=Object(i.a)(x,2),g=p[0],O=p[1],v=Object(c.useState)(),N=Object(i.a)(v,2),y=N[0],w=N[1],D=Object(c.useState)(),I=Object(i.a)(D,2),z=I[0],S=I[1],C=Object(c.useState)(),k=Object(i.a)(C,2),T=k[0],A=k[1],E=["Residential","Business"];function P(e){return e.open?Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(o.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})}):Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(o.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})})}function R(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"pb-4",children:Object(o.jsxs)("div",{className:"p-5 bg-blue-200 rounded shadow",children:[Object(o.jsx)("div",{className:"w-full flex gap-4 justify-center items-center pb-4",children:Object(o.jsx)("div",{children:Object(o.jsxs)("div",{className:"align-center",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"PROPERTY TYPE"}),Object(o.jsx)(m.a,{as:"div",className:R("flex-shrink-0 align-center w-full"),children:function(e){var t=e.open;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(m.a.Button,{className:"bg-white w-full justify-center rounded-lg flex align-center p-2 text-sm ring-2 ring-gray ring-opacity-20 focus:outline-none focus:ring-opacity-100",children:[Object(o.jsx)("p",{className:"text-center",children:void 0!=h?h:"Select Property Type..."}),Object(o.jsx)(P,{open:t})]}),Object(o.jsx)(u.a,{show:t,as:c.Fragment,enter:"transition ease-out duration-75",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)(m.a.Items,{static:!0,className:"z-40 absolute justify-center h-auto w-56 rounded-md shadow-lg py-1 bg-white ring-1 ring-green ring-opacity-5 focus:outline-none",children:Object(o.jsx)("div",{className:"max-h-40",children:E.map((function(e){return Object(o.jsx)(m.a.Item,{children:function(t){var s=t.active;return Object(o.jsx)("button",{onClick:function(){f(e)},className:R(s?"bg-gray-100":"","block w-full text-left px-4 py-2 text-sm text-green"),children:e})}})}))})})})})]})}})]})})}),Object(o.jsxs)("div",{className:"align-center",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"ADDRESS"}),Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)("input",{placeholder:"",onChange:function(e){O(e.target.value)},className:"flex justify-center border-2 border-gray-500 focus:border-gray-700 focus:outline-none bg-white p-1 w-full"})})]}),Object(o.jsxs)("div",{className:"flex gap-3 justify-center pt-4",children:[Object(o.jsxs)("div",{className:"w-full",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"WIDTH"}),Object(o.jsx)("input",{className:"focus:outline-none bg-white w-full p-1 border-2 border-gray-500 focus:border-gray-700",onChange:function(e){w(e.target.value)}})]}),Object(o.jsxs)("div",{className:"w-full",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"LENGTH"}),Object(o.jsx)("input",{className:"focus:outline-none bg-white p-1 w-full border-2 border-gray-500 focus:border-gray-700",onChange:function(e){S(e.target.value)}})]}),z&&y&&Object(o.jsxs)("div",{className:"w-full",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"SIZE"}),Object(o.jsxs)("p",{className:"p-1 bg-white w-full shadow border-2 border-white break-none",children:[z*y," Blocks"]})]})]}),Object(o.jsxs)("div",{className:"pt-4",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"PRICE"}),Object(o.jsxs)("div",{className:"flex gap-1 justify-center",children:[Object(o.jsx)("input",{className:"focus:outline-none bg-white p-1 w-32 border-2 border-gray-500 focus:border-gray-700",onChange:function(e){A(e.target.value)}}),Object(o.jsx)("p",{className:"font-semibold text-lg",children:"[M]"})]})]}),Object(o.jsx)("div",{})]})}),Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)("button",{className:R(void 0!=h&&void 0!=z&&void 0!=y&&void 0!=g&&void 0!=T?"text-black bg-yellow-300 hover:bg-yellow-400":"text-gray-400 bg-yellow-100","w-1/3 rounded py-1 px-2 font-semibold shadow"),onClick:function(){if(void 0!=h&&void 0!=z&&void 0!=y&&void 0!=g&&void 0!=T){var e=function(){for(var e="PR-",t=0;t<5;t++)e+=String(Math.floor(10*Math.random()));return e}(),c={propertyID:e,address:g,type:h,price:Number(T),width:Number(y),length:Number(z),size:z*y,ssre:Math.round((new Date).getTime()/1e3-1522648800),dateAdded:"".concat(n(),", ").concat(a()),timeAdded:s()};t.ref("/properties/".concat(e)).set(c);var i=Object(M.a)(r);i.push(c),l(i),d(!1)}},children:"ADD"})})]})},F=function(e){var t=e.database,s=e.setAddCitizenPopupOpen,n=e.citizens,a=e.setCitizens,r=(e.getTime,e.getDate),l=e.getYear,d=Object(c.useState)(""),b=Object(i.a)(d,2),j=b[0],m=b[1],u=Object(c.useState)(""),h=Object(i.a)(u,2),f=h[0],x=h[1],p=Object(c.useState)(0),g=Object(i.a)(p,2),O=g[0];g[1];return Object(o.jsxs)("div",{className:"w-full justify-center ",children:[Object(o.jsx)("div",{className:"pb-4",children:Object(o.jsxs)("div",{className:"p-5 bg-blue-200 rounded shadow",children:[Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"NAME"}),Object(o.jsx)("input",{className:"p-1 focus:outline-none",onChange:function(e){m(e.target.value)}})]}),Object(o.jsxs)("div",{className:"pt-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"CITIZEN ID"}),Object(o.jsx)("input",{className:"p-1 focus:outline-none",placeholder:"Generated if no input",onChange:function(e){x(e.target.value)}})]}),Object(o.jsxs)("div",{className:"pt-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"INITIAL MELDAS"}),Object(o.jsx)("input",{type:"Number",defaultValue:"0",className:"p-1 focus:outline-none"})]})]})}),Object(o.jsx)("button",{className:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}(j?"text-black bg-yellow-300 hover:bg-yellow-400":"text-gray-400 bg-yellow-100","w-1/3 rounded py-1 px-2 font-semibold"),onClick:function(){var e=function(){for(var e="CI-",t=0;t<5;t++)e+=String(Math.floor(10*Math.random()));return e}();if(j){var c={citizenID:f||e,name:j,meldas:O,dateAdded:"".concat(r(),", ").concat(l())};t.ref("/citizens/"+(f||e)).set(c);var i=Object(M.a)(n);i.push(c),a(i),s(!1)}},children:"Add"})]})},L=n.a.memo(F),Y=function(e){var t=e.database,s=e.setValues,n=e.selectedProperty,a=e.setSelectedProperty,r=e.setAddChangeBusinessPopupOpen,l=Object(c.useState)(),d=Object(i.a)(l,2),b=d[0],j=d[1],m=Object(c.useState)(),u=Object(i.a)(m,2),h=u[0],f=u[1];return Object(o.jsxs)("div",{className:"w-full justify-center ",children:[Object(o.jsx)("div",{className:"pb-4",children:Object(o.jsxs)("div",{className:"p-5 bg-blue-200 rounded shadow",children:[Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"NAME"}),Object(o.jsx)("input",{className:"p-1 w-full border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 focus:outline-none",defaultValue:void 0!=n.business?n.business.name:"",onChange:function(e){j(e.target.value)}})]}),Object(o.jsxs)("div",{className:"pt-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"DESCRIPTION"}),Object(o.jsx)("textarea",{className:"p-1 w-full border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 resize-none focus:outline-none",defaultValue:void 0!=n.business?n.business.description:"",onChange:function(e){f(e.target.value)}})]})]})}),Object(o.jsx)("button",{className:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}(b&&h?"text-black bg-yellow-300 hover:bg-yellow-400":"text-gray-400 bg-yellow-100","w-1/3 rounded py-1 px-2 font-semibold"),onClick:function(){var e={name:b,description:h};t.ref("/properties/".concat(n.propertyID,"/business")).set(e),t.ref("/citizens/".concat(n.owner.citizenID,"/properties/").concat(n.propertyID,"/business")).set(e),s();var c=JSON.parse(JSON.stringify(n));c.business=e,a(c),r(!1)},children:"Add"})]})},W=function(e){var t=e.className,s=e.properties,n=(e.user,e.selectedProperty),a=e.setSelectedProperty,r=e.filteredProperties,l=e.setFilteredProperties,d=Object(c.useState)(""),b=Object(i.a)(d,2),j=b[0],h=b[1];function f(e){return e.open?Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(o.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})}):Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(o.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})})}function x(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}return Object(o.jsx)(m.a,{as:"div",className:x("flex-shrink-0 justify-center",t),children:function(e){var t=e.open;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)(m.a.Button,{className:"bg-white justify-center flex rounded-lg flex px-2 py-1 text-sm ring-2 ring-gray ring-opacity-20 focus:outline-none focus:ring-opacity-100",children:[Object(o.jsx)("p",{className:"text-center",children:void 0!=n?n.address:"Select Property..."}),Object(o.jsx)(f,{open:t})]})}),Object(o.jsx)(u.a,{show:t,as:c.Fragment,enter:"transition ease-out duration-75",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)(m.a.Items,{static:!0,className:"z-40 absolute justify-center h-auto w-56 rounded-md shadow-lg py-1 bg-white ring-1 ring-green ring-opacity-5 focus:outline-none",children:[Object(o.jsx)("div",{className:"px-1",children:Object(o.jsx)("input",{className:"w-full focus:outline-none bg-gray-100 border-2 px-1 border-gray-500 focus:border-gray-700",defaultValue:j,placeholder:"Search",onChange:function(e){h(e.target.value),l(s.filter((function(t){return t.address.toUpperCase().includes(e.target.value.toUpperCase())})))}})}),Object(o.jsx)("div",{className:"max-h-40 overflow-y-scroll",children:r.map((function(e){return Object(o.jsx)(m.a.Item,{children:function(t){var s=t.active;return Object(o.jsx)("button",{onClick:function(){a(e)},className:x(s?"bg-gray-100":"","block w-full text-left px-2 py-2 text-sm text-green"),children:Object(o.jsxs)("div",{className:"w-full flow-root",children:[Object(o.jsx)("p",{className:"float-left font-semibold",children:e.address}),Object(o.jsx)("p",{className:"float-right",children:e.propertyID})]})})}})}))})]})})})]})}})},G=function(e){var t=e.database,s=(e.user,e.getTime),n=e.getDate,a=e.getYear,r=e.setNewGovernmentTransferPopupOpen,l=e.selectedCitizen,d=e.setValues,b=e.governmentFunds,j=Object(c.useState)([]),m=Object(i.a)(j,2),u=(m[0],m[1]),f=Object(c.useState)([]),x=Object(i.a)(f,2),p=(x[0],x[1]),g=Object(c.useState)(0),O=Object(i.a)(g,2),v=O[0],N=O[1],y=Object(c.useState)(""),w=Object(i.a)(y,2),D=w[0],I=w[1],z=1522648800;function S(){return void 0!=l&&0!=String(v).length&&!String(v).startsWith("-")&&Number(b)-Number(v)>=0&&0!=v}return Object(c.useEffect)((function(){t.ref("/citizens").get().then((function(e){u(Object.values(e.val())),p(Object.values(e.val())),console.log(Object.values(e.val())[0])})),console.log("Called useeffect")}),[]),Object(o.jsxs)("div",{className:"w-full justify-center ",children:[Object(o.jsx)("div",{className:"pb-4",children:Object(o.jsxs)("div",{className:"p-5 bg-blue-200 rounded shadow",children:[Object(o.jsxs)("div",{className:"",children:[Object(o.jsxs)("div",{className:"w-full pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"TO"}),Object(o.jsxs)("div",{className:"bg-white shadow p-1",children:[Object(o.jsx)("p",{children:l.name}),Object(o.jsx)("p",{children:l.citizenID})]})]}),Object(o.jsxs)("div",{className:"w-full pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"AMOUNT"}),Object(o.jsxs)("div",{className:"flex w-full justify-center",children:[Object(o.jsx)("input",{type:"Number",placeholder:"",min:0,max:b,defaultValue:v,onChange:function(e){N(Number(e.target.value))},className:"appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1"}),Object(o.jsx)("p",{className:"font-semibold pl-1 text-xl",children:"[M]"})]})]})]}),Object(o.jsxs)("div",{className:"pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"REASON"}),Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)("textarea",{placeholder:"",onChange:function(e){I(e.target.value)},className:"w-full bg-white h-20 flex justify-center resize-none focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-2"})})]}),S()&&Object(o.jsxs)("div",{className:"pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"RESULTING BALANCE"}),Object(o.jsxs)("p",{className:"p-1 font-semibold shadow bg-white ",children:[Number(b)-Number(v)," ","[M]"]})]})]})}),Object(o.jsx)("button",{className:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}(S()?"text-black bg-yellow-300 hover:bg-yellow-400":"text-gray-400 bg-yellow-100","w-1/3 rounded py-1 px-2 font-semibold shadow"),onClick:function(){var e=0,c=0;S()&&t.ref("/citizens/".concat(l.citizenID,"/meldas")).get().then((function(i){e=Number(i.val())+Number(v),t.ref("/citizens/".concat(l.citizenID,"/meldas")).set(e),t.ref("/government/meldas").get().then((function(i){c=Number(i.val())-Number(v),t.ref("/government/meldas").set(c);var o=function(){for(var e="MT-",t=0;t<5;t++)e+=String(Math.floor(10*Math.random()));return e}();t.ref("/government/transfers/".concat(o)).set({transferID:o,date:"".concat(n(),", ").concat(a()),time:s(),ssre:Math.round((new Date).getTime()/1e3-z),amount:v,receiverCitizenID:l.citizenID,receiverName:l.name,type:"Outgoing",reason:0!=D.length?D:"None given",resultingBalance:c}),t.ref("/citizens/".concat(l.citizenID,"/transfers/").concat(o)).set({transferID:o,date:"".concat(n(),", ").concat(a()),time:s(),ssre:Math.round((new Date).getTime()/1e3-z),amount:v,senderCitizenID:"CI-78614",senderName:"Rushington Government",type:"Incoming",reason:0!=D.length?D:"None given",resultingBalance:e}),d(),r(!1)}))}))},children:Object(o.jsxs)("div",{className:"flex justify-center",children:[Object(o.jsx)(h.c,{className:"h-6 w-6"}),"SEND"]})})]})},J=n.a.memo(G),V=function(e){var t=e.database,s=e.getTime,n=e.getDate,a=e.getYear,r=e.user,l=e.setUser,d=Object(c.useState)("Citizens"),b=Object(i.a)(d,2),j=b[0],m=b[1],u=Object(c.useState)(localStorage.getItem("citizens")?JSON.parse(localStorage.getItem("citizens")):[]),f=Object(i.a)(u,2),x=f[0],p=f[1],g=Object(c.useState)(""),O=Object(i.a)(g,2),v=O[0],N=O[1],y=Object(c.useState)(localStorage.getItem("filteredCitizens")?JSON.parse(localStorage.getItem("filteredCitizens")):[]),w=Object(i.a)(y,2),D=w[0],I=w[1],S=Object(c.useState)(localStorage.getItem("filteredCitizens")?JSON.parse(localStorage.getItem("filteredCitizens")):[]),C=Object(i.a)(S,2),k=C[0],T=C[1],A=Object(c.useState)([]),E=Object(i.a)(A,2),R=E[0],F=E[1],G=Object(c.useState)(""),V=Object(i.a)(G,2),H=V[0],q=V[1],K=Object(c.useState)(""),Z=Object(i.a)(K,2),X=Z[0],Q=Z[1],$=Object(c.useState)([]),_=Object(i.a)($,2),ee=_[0],te=_[1],se=Object(c.useState)(0),ce=Object(i.a)(se,2),ne=ce[0],ae=ce[1],re=Object(c.useState)(""),ie=Object(i.a)(re,2),le=ie[0],oe=ie[1],de=Object(c.useState)(""),be=Object(i.a)(de,2),je=be[0],me=be[1],ue=Object(c.useState)(0),he=Object(i.a)(ue,2),fe=he[0],xe=he[1],pe=Object(c.useState)([]),ge=Object(i.a)(pe,2),Oe=ge[0],ve=ge[1],Ne=Object(c.useState)(),ye=Object(i.a)(Ne,2),we=ye[0],De=ye[1],Ie=Object(c.useState)([]),ze=Object(i.a)(Ie,2),Se=ze[0],Ce=ze[1],ke=Object(c.useState)(localStorage.getItem("selectedCitizen")?JSON.parse(localStorage.getItem("selectedCitizen")):void 0),Te=Object(i.a)(ke,2),Ae=Te[0],Ee=Te[1],Me=Object(c.useState)(0),Pe=Object(i.a)(Me,2),Re=Pe[0],Be=Pe[1],Ue=Object(c.useState)(0),Fe=Object(i.a)(Ue,2),Le=Fe[0],Ye=Fe[1],We=Object(c.useState)(0),Ge=Object(i.a)(We,2),Je=Ge[0],Ve=Ge[1],He=Object(c.useState)(localStorage.getItem("selectedProperty")?JSON.parse(localStorage.getItem("selectedProperty")):void 0),qe=Object(i.a)(He,2),Ke=qe[0],Ze=qe[1],Xe=Object(c.useState)(),Qe=Object(i.a)(Xe,2),$e=Qe[0],_e=Qe[1],et=Object(c.useState)(0),tt=Object(i.a)(et,2),st=tt[0],ct=tt[1],nt=Object(c.useState)(0),at=Object(i.a)(nt,2),rt=at[0],it=at[1],lt=Object(c.useState)([]),ot=Object(i.a)(lt,2),dt=ot[0],bt=ot[1],jt=Object(c.useState)(!1),mt=Object(i.a)(jt,2),ut=mt[0],ht=mt[1],ft=Object(c.useState)(!1),xt=Object(i.a)(ft,2),pt=xt[0],gt=xt[1],Ot=Object(c.useState)("All"),vt=Object(i.a)(Ot,2),Nt=(vt[0],vt[1],Object(c.useState)(!1)),yt=Object(i.a)(Nt,2),wt=yt[0],Dt=yt[1],It=Object(c.useState)(!1),zt=Object(i.a)(It,2),St=zt[0],Ct=zt[1],kt=Object(c.useState)(!1),Tt=Object(i.a)(kt,2),At=Tt[0],Et=Tt[1],Mt=Object(c.useState)([]),Pt=Object(i.a)(Mt,2),Rt=Pt[0],Bt=Pt[1],Ut=1522648800;Object(c.useEffect)(Lt,[]);var Ft=[{sectionName:"Citizens",sectionSelected:"Citizens"==j},{sectionName:"Bank",sectionSelected:"Bank"==j},{sectionName:"Properties",sectionSelected:"Properties"==j},{sectionName:"Licenses",sectionSelected:"Licenses"==j},{sectionName:"Announcements",sectionSelected:"Announcements"==j}];function Lt(){t.ref("/citizens").get().then((function(e){p(Object.values(e.val()).sort((function(e,t){return e.name.localeCompare(t.name)}))),T(Object.values(e.val()).sort((function(e,t){return e.name.localeCompare(t.name)}))),I(Object.values(e.val()).sort((function(e,t){return e.name.localeCompare(t.name)})).filter((function(e){return e.name.toUpperCase().includes(H.toUpperCase())}))),Ee(void 0!=Ae?e.val()[Ae.citizenID]:void 0),void 0!=Ae&&(Ee(e.val()[Ae.citizenID]),localStorage.setItem("selectedCitizen",JSON.stringify(e.val()[Ae.citizenID])),r.citizenID==Ae.citizenID&&(l(e.val()[r.citizenID]),localStorage.setItem("user",JSON.stringify(e.val()[r.citizenID])))),localStorage.setItem("citizens",JSON.stringify(Object.values(e.val()).sort((function(e,t){return e.name.localeCompare(t.name)})))),localStorage.setItem("filteredCitizens",JSON.stringify(Object.values(e.val()).sort((function(e,t){return e.name.localeCompare(t.name)}))))})),t.ref("/properties").get().then((function(e){console.log("properties",e),void 0!=e.val()&&(Bt(Object.values(e.val()).sort((function(e,t){return e.address.localeCompare(t.address)}))),Ce(Object.values(e.val()).sort((function(e,t){return e.address.localeCompare(t.address)}))),console.log(void 0!=Ke?Ke.propertyID:"undfee"),Ze(void 0!=Ke?e.val()[Ke.propertyID]:void 0))})),t.ref("/announcements").get().then((function(e){void 0!=e.val()&&F(Object.values(e.val()).sort((function(e,t){return t.ssre-e.ssre})))})),t.ref("/government").get().then((function(e){console.log("gover funds",e.val().meldas),ae(Number(e.val().meldas)),Ve(100*Number(e.val().salesTaxRate)),bt(Object.values(e.val().transfers).sort((function(e,t){return t.ssre-e.ssre})))})),t.ref("/licenses").get().then((function(e){void 0!=e.val()&&ve(Object.values(e.val()))})),t.ref("/businesses").get().then((function(e){void 0!=e.val()&&te(Object.values(e.val()))}))}function Yt(){var e=Jt("GA");t.ref("/announcements/".concat(e)).set({announcementID:e,text:v,datePosted:"".concat(n(),", ").concat(a()),timePosted:s(),ssre:Math.round((new Date).getTime()/1e3-Ut)}),Lt()}function Wt(){var e=Object(M.a)(x),t=0;return e.forEach((function(e){var s=Math.round(Number(e.meldas)*(.01*Re));t+=s})),t}function Gt(){var e=Object(M.a)(x),t=0;return e.forEach((function(e){var s=Math.round(Number(e.meldas)*(.01*Le));t+=s})),t}function Jt(e){for(var t="".concat(e,"-"),s=0;s<5;s++)t+=String(Math.floor(10*Math.random()));return t}function Vt(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}return Object(o.jsx)("div",{children:Object(o.jsxs)("div",{className:"lg:grid lg:grid-cols-6 lg:gap-5",children:[Object(o.jsx)("div",{className:"lg:col-span-1 pb-4 lg:pb-0",children:Object(o.jsx)("div",{children:Ft.map((function(e){return Object(o.jsx)("div",{children:Object(o.jsx)("button",{onClick:function(){m(e.sectionName)},className:Vt(e.sectionSelected?"bg-gray-200":"bg-white hover:bg-gray-100","rounded p-2 w-full text-center lg:text-left"),children:Object(o.jsx)("p",{className:"text-gray-800 font-semibold",children:e.sectionName})})})}))})}),Object(o.jsxs)("div",{className:"lg:col-span-5 bg-gray-100 rounded",children:["Citizens"==j&&Object(o.jsxs)("div",{className:"lg:grid lg:grid-cols-3",children:[Object(o.jsxs)("div",{className:"col-span-2 p-2",children:[void 0==Ae&&Object(o.jsx)("p",{className:"text-gray-500 p-5 font-semibold text-center lg:text-left",children:"NO CITIZEN SELECTED"}),void 0!=Ae&&Object(o.jsxs)("div",{className:"bg-white rounded",children:[Object(o.jsx)("div",{className:"p-2",children:Object(o.jsxs)("div",{className:"grid grid-cols-3 border-2 border-gray-400",children:[Object(o.jsxs)("div",{className:"col-span-1 p-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Name"}),Object(o.jsx)("p",{children:Ae.name})]}),Object(o.jsxs)("div",{className:"col-span-1 p-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Citizen ID"}),Object(o.jsx)("p",{children:Ae.citizenID})]}),Object(o.jsxs)("div",{className:"col-span-1 p-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Date Added"}),Object(o.jsx)("p",{children:Ae.dateAdded})]})]})}),Object(o.jsx)("div",{className:"p-2",children:Object(o.jsxs)("div",{className:"grid grid-cols-2",children:[Object(o.jsx)("div",{className:"col-span-2 p-2",children:Object(o.jsxs)("div",{className:"bg-white",children:[Object(o.jsxs)("div",{className:"w-full flow-root p-2 bg-gray-200",children:[Object(o.jsx)("p",{className:"font-semibold float-left",children:"BANK"}),Object(o.jsxs)("div",{className:"float-right flex gap-1",children:[Object(o.jsx)("input",{type:"Number",onChange:function(e){ct(e.target.value)},className:"px-2 border-2 border-gray-700 w-20 focus:outline-none"}),Object(o.jsxs)("button",{onClick:function(){t.ref("/citizens/".concat(Ae.citizenID,"/meldas")).get().then((function(e){var c=Number(e.val())+Number(st);t.ref("/citizens/".concat(Ae.citizenID,"/meldas")).set(c);var i=JSON.stringify(Ae);(i=JSON.parse(i)).meldas=c;var o=Jt("MT"),d=st>=0?{transferID:o,date:"".concat(n(),", ").concat(a()),time:s(),ssre:Math.round((new Date).getTime()/1e3-Ut),amount:st,senderCitizenID:"CI-78614",senderName:"Rushington Bank",type:"Incoming",reason:"Deposit",resultingBalance:c}:{transferID:o,date:"".concat(n(),", ").concat(a()),time:s(),ssre:Math.round((new Date).getTime()/1e3-Ut),amount:Math.abs(st),receiverName:"Real Currency",receiverCitizenID:Ae.citizenID,type:"Outgoing",reason:"Withdrawal",resultingBalance:c};t.ref("/citizens/".concat(Ae.citizenID,"/transfers/").concat(o)).set(d),i.transfers=void 0!=i.transfers?[].concat(Object(M.a)(Object.values(i.transfers)),[d]):[d],console.log("Transfers",Object.values(i.transfers)),Lt(),i.citizenID==r.citizenID&&(l(i),localStorage.setItem("user",JSON.stringify(i))),Ee(i)}))},className:"bg-yellow-300 py-1 px-2 mr-2 flex text-sm hover:bg-yellow-400 font-semibold rounded shadow",children:[Object(o.jsx)(h.u,{className:"w-5 h-5"}),st<0?"WITHDRAW":"DEPOSIT"]}),Object(o.jsxs)("button",{onClick:function(){Ct(!0)},className:"bg-yellow-300 py-1 px-2 flex text-sm hover:bg-yellow-400 font-semibold rounded shadow",children:[Object(o.jsx)(h.u,{className:"w-5 h-5"}),Object(o.jsx)(z,{header:"New Government Transfer",open:St,setOpen:Ct,inputs:[],additionalComponent:function(){return Object(o.jsx)(J,{database:t,getTime:s,getDate:n,getYear:a,setNewGovernmentTransferPopupOpen:Ct,setValues:Lt,selectedCitizen:Ae,governmentFunds:ne})}}),"NEW TRANSFER"]})]})]}),Object(o.jsxs)("div",{className:"flow-root p-2 border-2 border-gray-400",children:[Object(o.jsx)("p",{className:"float-left font-semibold text-gray-700",children:"Balance"}),Object(o.jsxs)("p",{className:"float-right",children:[Ae.meldas," [M]"]})]}),Object(o.jsxs)("div",{className:"p-2 border-b-2 border-r-2 border-l-2 border-gray-400",children:[Object(o.jsx)("p",{className:"font-semibold text-gray-700",children:"Transfers"}),void 0!=Ae.transfers&&Object(o.jsx)("div",{className:"max-h-96 overflow-y-scroll bg-gray-100",children:Object.values(Ae.transfers).sort((function(e,t){return t.ssre-e.ssre})).map((function(e){return Object(o.jsx)("div",{className:"p-1",children:Object(o.jsx)(Ht,{transfer:e})})}))}),void 0==Ae.transfers&&Object(o.jsx)("div",{className:"",children:"None yet"})]})]})}),Object(o.jsx)("div",{className:"col-span-2 p-2",children:Object(o.jsxs)("div",{className:"bg-white",children:[Object(o.jsxs)("div",{className:"p-2 flow-root w-full bg-gray-200",children:[Object(o.jsx)("p",{className:"font-semibold float-left",children:"CRIMINAL CHARGES"}),Object(o.jsxs)("button",{onClick:function(){ht(!0)},className:"bg-yellow-300 float-right flex py-1 px-2 hover:bg-yellow-400 text-sm font-semibold rounded shadow",children:[Object(o.jsx)(h.u,{className:"w-5 h-5"}),"ADD CHARGE"]}),Object(o.jsx)(z,{open:ut,setOpen:ht,header:"New Charge",onClickSave:function(){},inputs:[],saveText:"Add",additionalComponent:function(){return Object(o.jsx)(B,{database:t,getTime:s,getDate:n,getYear:a,setNewChargePopupOpen:ht,selectedCitizen:Ae,setSelectedCitizen:Ee,setValues:Lt})}})]}),Object(o.jsxs)("div",{className:"flow-root p-2 border-2 border-gray-400",children:[Object(o.jsx)("p",{className:"float-left font-semibold text-gray-700",children:"Total"}),Object(o.jsx)("p",{className:"float-right",children:Ae.charges?Object.values(Ae.charges).length:0})]}),Object(o.jsxs)("div",{className:"p-2 border-b-2 border-r-2 border-l-2 border-gray-400",children:[void 0!=Ae.charges&&Object(o.jsx)("div",{className:"max-h-96 overflow-y-scroll bg-gray-100",children:Object.values(Ae.charges).sort((function(e,t){return t.ssre-e.ssre})).map((function(e){return Object(o.jsx)("div",{className:"p-1",children:Object(o.jsx)(Zt,{charge:e})})}))}),void 0==Ae.charges&&Object(o.jsx)("div",{className:"",children:"None yet"})]})]})}),Object(o.jsx)("div",{className:"col-span-2 p-2",children:Object(o.jsxs)("div",{className:"bg-white",children:[Object(o.jsxs)("div",{className:"p-2 flow-root w-full bg-gray-200",children:[Object(o.jsx)("p",{className:"font-semibold float-left",children:"PROPERTIES"}),Object(o.jsxs)("div",{className:"flex gap-2 float-right",children:[Object(o.jsx)(W,{properties:Rt,user:r,selectedProperty:we,setSelectedProperty:De,filteredProperties:Se,setFilteredProperties:Ce}),Object(o.jsxs)("button",{onClick:function(){console.log(we),void 0!=we.owner&&(console.log(we.propertyID),t.ref("/citizens/".concat(we.owner.citizenID,"/properties/").concat(we.propertyID)).set(null));var e=JSON.stringify(we);(e=JSON.parse(e)).owner={name:Ae.name,citizenID:Ae.citizenID,dateAdded:"".concat(n(),", ").concat(a())},console.log("edited sp",e),t.ref("/properties/".concat(we.propertyID,"/owner")).set({name:Ae.name,citizenID:Ae.citizenID,dateAdded:"".concat(n(),", ").concat(a())}),t.ref("/citizens/".concat(Ae.citizenID,"/properties/").concat(we.propertyID)).set(e),Lt()},className:"bg-yellow-300 flex py-1 px-2 hover:bg-yellow-400 text-sm font-semibold rounded shadow",children:[Object(o.jsx)(h.u,{className:"w-5 h-5"}),"GRANT PROPERTY"]})]})]}),Object(o.jsxs)("div",{className:"flow-root p-2 border-2 border-gray-400",children:[Object(o.jsx)("p",{className:"float-left font-semibold text-gray-700",children:"Total"}),Object(o.jsx)("p",{className:"float-right",children:Ae.properties?Object.values(Ae.properties).length:0})]}),Object(o.jsxs)("div",{className:"p-2 border-b-2 border-r-2 border-l-2 border-gray-400",children:[void 0!=Ae.properties&&Object(o.jsx)("div",{className:"max-h-96 overflow-y-scroll bg-gray-100",children:Object(o.jsx)("div",{className:"py-1",children:Object.values(Ae.properties).sort((function(e,t){return t.ssre-e.ssre})).map((function(e){return Object(o.jsx)("button",{className:"w-full text-left group",onClick:function(){Ze(function(e){for(var t=0;t<Rt.length;t++)if(Rt[t].propertyID==e)return Rt[t]}(e.propertyID)),m("Properties")},children:Object(o.jsx)("div",{className:"px-1",children:Object(o.jsx)(Xt,{property:e})})})}))})}),void 0==Ae.properties&&Object(o.jsx)("div",{className:"",children:"None yet"})]})]})}),Object(o.jsx)("div",{className:"col-span-2 p-2",children:Object(o.jsxs)("div",{className:"bg-white",children:[Object(o.jsx)("div",{className:"w-full flow-root p-2 bg-gray-200",children:Object(o.jsx)("p",{className:"font-semibold float-left",children:"LICENSES"})}),Object(o.jsxs)("div",{className:"flow-root p-2 border-2 border-gray-400",children:[Object(o.jsx)("p",{className:"float-left font-semibold text-gray-700",children:"Total"}),Object(o.jsx)("p",{className:"float-right",children:Ae.licenses?Object.values(Ae.licenses).length:0})]}),Object(o.jsxs)("div",{className:"p-2 border-b-2 border-r-2 border-l-2 border-gray-400",children:[void 0!=Ae.licenses&&Object(o.jsx)("div",{className:"max-h-96 overflow-y-scroll bg-gray-100",children:Object.values(Ae.licenses).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return Object(o.jsx)("div",{className:"text-left group m-2",onClick:function(){},children:Object(o.jsx)(Kt,{license:e})})}))}),void 0==Ae.licenses&&Object(o.jsx)("div",{className:"",children:"None yet"})]})]})})]})})]})]}),Object(o.jsx)("div",{className:"col-span-1 p-2",children:Object(o.jsxs)("div",{className:"bg-white rounded",children:[Object(o.jsxs)("div",{className:"p-2",children:[Object(o.jsxs)("button",{className:"w-full bg-yellow-300 hover:bg-yellow-400 font-semibold text-sm py-2 justify-center text-center rounded shadow flex",onClick:function(){Et(!0)},children:[Object(o.jsx)(h.u,{className:"w-5 h-5"}),"ADD CITIZEN"]}),Object(o.jsx)(z,{open:At,setOpen:Et,header:"New Citizen",onClickSave:function(){},inputs:[],saveText:"Add",additionalComponent:function(){return Object(o.jsx)(L,{database:t,getTime:s,getDate:n,getYear:a,citizens:x,setCitizens:p,setAddCitizenPopupOpen:Et})}})]}),Object(o.jsx)("div",{className:"p-2",children:Object(o.jsx)("input",{placeholder:"Search",value:H,className:"w-full border-2 border-gray-500 p-2 bg-gray-100 focus:ring-1 focus:ring-gray-700 focus:border-gray-700 focus:outline-none",onChange:function(e){q(e.target.value),I(x.filter((function(t){return console.log(D),t.name.toUpperCase().includes(e.target.value.toUpperCase())})))}})}),Object(o.jsx)("div",{className:"",children:D.map((function(e){return Object(o.jsx)("div",{className:"p-2",children:Object(o.jsxs)("button",{onClick:function(){Ee(e),localStorage.setItem("selectedCitizen",JSON.stringify(e))},className:Vt(void 0!=Ae&&Ae.citizenID==e.citizenID?"border-2 border-blue-400 shadow-lg bg-yellow-400":" bg-yellow-300","w-full shadow rounded hover:bg-yellow-400 p-2 text-sm font-semibold"),children:[Object(o.jsx)("div",{children:e.name.toUpperCase()}),Object(o.jsx)("div",{className:"text-gray-700",children:e.citizenID.toUpperCase()})]})})}))})]})})]}),"Bank"==j&&Object(o.jsxs)("div",{className:"p-4",children:[Object(o.jsxs)("div",{className:"p-3 grid grid-cols-2 bg-white rounded shadow",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{className:"text-2xl font-bold",children:"Bank Vault"}),Object(o.jsxs)("p",{className:"text-3xl",children:[function(){var e=0;return x.forEach((function(t){e+=Number(t.meldas)})),ee.forEach((function(t){e+=Number(t.meldas)})),e+ne}()," [M]"]})]}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"flex gap-2",children:[Object(o.jsx)("p",{className:"text-2xl font-bold",children:"Government Funds"}),Object(o.jsxs)("div",{className:"float-right flex gap-1",children:[Object(o.jsx)("input",{type:"Number",value:rt,onChange:function(e){it(e.target.value)},className:"px-2 border-2 border-gray-700 w-20 focus:outline-none"}),Object(o.jsxs)("button",{onClick:function(){t.ref("/government/meldas").set(Number(ne)+Number(rt));var e=Jt("MT"),c=rt>=0?{transferID:e,date:"".concat(n(),", ").concat(a()),time:s(),ssre:Math.round((new Date).getTime()/1e3-Ut),amount:Number(rt),senderCitizenID:"CI-78614",senderName:"Rushington Bank",type:"Incoming",reason:"Deposit",resultingBalance:Number(ne)+Number(rt)}:{transferID:e,date:"".concat(n(),", ").concat(a()),time:s(),ssre:Math.round((new Date).getTime()/1e3-Ut),amount:Math.abs(rt),receiverName:"Real Currency",type:"Outgoing",reason:"Withdrawal",resultingBalance:Number(ne)+Number(rt)};t.ref("/government/transfers/".concat(e)).set(c),it(0),Lt()},className:"bg-yellow-300 py-1 px-2 mr-2 flex hover:bg-yellow-400 font-semibold rounded shadow",children:[Object(o.jsx)(h.u,{className:"w-6 h-6"}),rt<0?"WITHDRAW":"DEPOSIT"]})]})]}),Object(o.jsxs)("p",{className:"text-3xl",children:[ne," [M]"]})]}),Object(o.jsxs)("div",{className:"col-span-2 pt-4",children:[Object(o.jsx)("p",{className:"text-2xl font-bold",children:"Transfers"}),Object(o.jsx)("div",{className:"bg-gray-200 border-2 border-gray-500 p-2 max-h-56 min-h-12 overflow-y-scroll",children:dt.map((function(e){return Object(o.jsx)("div",{className:"p-1",children:Object(o.jsx)(Ht,{transfer:e})})}))})]})]}),Object(o.jsxs)("div",{className:"p-3 my-4 bg-white shadow rounded",children:[Object(o.jsx)("p",{className:"text-2xl font-bold",children:"Sales Tax"}),Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)("div",{className:"gap-1",children:[Object(o.jsx)("p",{className:"text-xl font-semibold",children:"Rate"}),Object(o.jsxs)("div",{className:"flex gap-1",children:[Object(o.jsx)("input",{className:"p-1 bg-white border-2 border-gray-500 focus:outline-none",type:"Number",value:Je,onChange:function(e){Ve(Number(e.target.value))}}),Object(o.jsx)("p",{className:"text-xl font-semibold",children:"%"})]})]})}),Object(o.jsxs)("button",{className:"mt-4 p-2 col-span-3 rounded shadow flex w-full justify-center font-semibold bg-yellow-300 hover:bg-yellow-400 text-lg",onClick:function(){t.ref("/government/salesTaxRate").set(.01*Je)},children:[Object(o.jsx)(h.j,{className:"h-7 w-7"}),"UPDATE SALES TAX RATE"]})]})]}),Object(o.jsxs)("div",{className:"p-3 my-4 bg-white shadow rounded",children:[Object(o.jsx)("p",{className:"text-2xl font-bold",children:"Interest"}),Object(o.jsxs)("div",{className:"grid grid-cols-3",children:[Object(o.jsxs)("div",{className:"gap-1",children:[Object(o.jsx)("p",{className:"text-xl font-semibold",children:"Rate"}),Object(o.jsxs)("div",{className:"flex gap-1",children:[Object(o.jsx)("input",{className:"p-1 bg-white border-2 border-gray-500 focus:outline-none",type:"Number",value:Re,onChange:function(e){Be(Number(e.target.value))}}),Object(o.jsx)("p",{className:"text-xl font-semibold",children:"%"})]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{className:"text-xl font-semibold",children:"Resulting Payout"}),Object(o.jsxs)("p",{className:Vt(Wt()>0?"text-red-700":"","text-xl"),children:[Wt()," [M]"]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{className:"text-xl font-semibold",children:"Resulting Government Funds"}),Object(o.jsxs)("p",{className:Vt(Wt()>0?"text-red-700":"","text-xl"),children:[ne-Wt()," [M]"]})]}),Object(o.jsxs)("button",{className:"mt-4 p-2 col-span-3 rounded shadow flex w-full justify-center font-semibold bg-yellow-300 hover:bg-yellow-400 text-lg",onClick:function(){var e=Object(M.a)(x),c={},r=0;e.forEach((function(e){var t=Math.round(Number(e.meldas)*(.01*Re));if(0!=t){e.meldas=Number(e.meldas)+Number(t),r+=t;var i=Jt("MT");void 0==e.transfers&&(e.transfers={}),e.transfers[i]={transferID:i,date:"".concat(n(),", ").concat(a()),time:s(),ssre:Math.round((new Date).getTime()/1e3-Ut),amount:t,senderCitizenID:"CI-78614",senderName:"Rushington Bank",type:"Incoming",reason:"Accrued ".concat(Re,"% Interest"),resultingBalance:e.meldas}}c[e.citizenID]=e}));var i=Jt("MT");t.ref("/government/transfers/".concat(i)).set({transferID:i,date:"".concat(n(),", ").concat(a()),time:s(),ssre:Math.round((new Date).getTime()/1e3-Ut),amount:r,receiverName:"All Citizens",type:"Outgoing",reason:"Accrued ".concat(Re,"% Interest"),resultingBalance:ne-Number(r)}),t.ref("/citizens").set(c),t.ref("/government/meldas").set(ne-Number(r)),Be(0),Lt()},children:[Object(o.jsx)(h.c,{className:"h-7 w-7"}),"GRANT INTEREST"]})]})]}),Object(o.jsxs)("div",{className:"p-3 bg-white shadow rounded",children:[Object(o.jsx)("p",{className:"text-2xl font-bold",children:"Taxes"}),Object(o.jsxs)("div",{className:"grid grid-cols-3",children:[Object(o.jsxs)("div",{className:"gap-1",children:[Object(o.jsx)("p",{className:"text-xl font-semibold",children:"Rate"}),Object(o.jsxs)("div",{className:"flex gap-1",children:[Object(o.jsx)("input",{className:"p-1 bg-white border-2 border-gray-500 focus:outline-none",type:"Number",value:Le,onChange:function(e){Ye(Number(e.target.value))}}),Object(o.jsx)("p",{className:"text-xl font-semibold",children:"%"})]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{className:"text-xl font-semibold",children:"Resulting Revenue"}),Object(o.jsxs)("p",{className:Vt(Gt()>0?"text-green-700":"","text-xl"),children:[Gt()," [M]"]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{className:"text-xl font-semibold",children:"Resulting Government Funds"}),Object(o.jsxs)("p",{className:Vt(Gt()>0?"text-green-700":"","text-xl"),children:[ne+Gt()," [M]"]})]}),Object(o.jsxs)("button",{className:"mt-4 p-2 col-span-3 rounded shadow flex w-full justify-center font-semibold bg-yellow-300 hover:bg-yellow-400 text-lg",onClick:function(){var e=Object(M.a)(x),c={},r=0;e.forEach((function(e){var t=Math.round(Number(e.meldas)*(.01*Le));if(0!=t){e.meldas=Number(e.meldas)-Number(t),r+=t;var i=Jt("MT");void 0==e.transfers&&(e.transfers={}),e.transfers[i]={transferID:i,date:"".concat(n(),", ").concat(a()),time:s(),ssre:Math.round((new Date).getTime()/1e3-Ut),amount:t,receiverCitizenID:"CI-78614",receiverName:"Rushington Government",type:"Outgoing",reason:"".concat(Le,"% Tax"),resultingBalance:e.meldas}}c[e.citizenID]=e}));var i=Jt("MT");t.ref("/government/transfers/".concat(i)).set({transferID:i,date:"".concat(n(),", ").concat(a()),time:s(),ssre:Math.round((new Date).getTime()/1e3-Ut),amount:r,senderName:"All Citizens",type:"Incoming",reason:"".concat(Le,"% Tax"),resultingBalance:ne-Number(r)}),t.ref("/citizens").set(c),t.ref("/government/meldas").set(ne+Number(r)),Ye(0),Lt()},children:[Object(o.jsx)(h.a,{className:"h-7 w-7"}),"PULL TAXES"]})]})]})]}),"Licenses"==j&&Object(o.jsxs)("div",{className:"",children:[Object(o.jsxs)("div",{className:"m-4 bg-white rounded p-2 shadow",children:[Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)("p",{className:"font-semibold text-lg",children:"Title"}),Object(o.jsx)("input",{className:"border-2 border-gray-500 w-full p-1 focus:outline-none",onChange:function(e){oe(e.target.value)}})]}),Object(o.jsxs)("div",{className:"py-2",children:[Object(o.jsx)("p",{className:"font-semibold text-lg",children:"Permissions"}),Object(o.jsx)("input",{className:"border-2 border-gray-500 w-full p-1 focus:outline-none",onChange:function(e){me(e.target.value)}})]}),Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)("p",{className:"font-semibold text-lg",children:"Price"}),Object(o.jsxs)("div",{className:"flex gap-1 w-full",children:[Object(o.jsx)("input",{className:"border-2 border-gray-500 w-full p-1 focus:outline-none",onChange:function(e){xe(e.target.value)}}),Object(o.jsx)("p",{className:"text-xl font-bold",children:"[M]"})]})]}),Object(o.jsx)("div",{className:"flex justify-center pt-2",children:Object(o.jsx)("button",{className:"font-semibold rounded shadow bg-yellow-300 hover:bg-yellow-400 py-1 px-2 flex justify-center",onClick:function(){var e=Jt("LI");t.ref("/licenses/".concat(e)).set({licenseID:e,title:le,permissions:je,price:Number(fe),dateAdded:"".concat(n(),", ").concat(a())}),Lt()},children:"ADD LICENSE"})})]}),Object(o.jsx)("div",{className:"py-2 bg-gray-200 max-h-screen overflow-y-scroll",children:Oe.map((function(e){return Object(o.jsx)("div",{className:"px-4 py-2",children:Object(o.jsx)(qt,{license:e})})}))})]}),"Holidays"==j&&Object(o.jsx)("div",{children:"Holidays"}),"Properties"==j&&Object(o.jsxs)("div",{className:"grid grid-cols-3",children:[Object(o.jsxs)("div",{className:"col-span-2 p-2",children:[void 0==Ke&&Object(o.jsx)("p",{className:"text-gray-500 p-5 font-semibold",children:"NO PROPERTY SELECTED"}),void 0!=Ke&&Object(o.jsxs)("div",{className:"bg-white rounded",children:[Object(o.jsx)("div",{className:"p-1",children:Object(o.jsx)(Xt,{property:Ke})}),Object(o.jsx)("div",{className:"p-2 max-h-screen overflow-y-scroll",children:Object(o.jsxs)("div",{className:"grid grid-cols-2",children:[Object(o.jsx)("div",{className:"col-span-2 p-2",children:Object(o.jsxs)("div",{className:"bg-white",children:[Object(o.jsxs)("div",{className:"w-full flow-root p-2 bg-gray-200",children:[Object(o.jsx)("p",{className:"font-semibold float-left",children:"OWNER"}),Object(o.jsxs)("div",{className:"float-right flex gap-2",children:[Object(o.jsx)(P,{citizens:x,selectedCitizen:$e,setSelectedCitizen:_e,filteredCitizens:k,setFilteredCitizens:T}),Object(o.jsxs)("button",{onClick:function(){void 0!=Ke.owner&&t.ref("/citizens/".concat(Ke.owner.citizenID,"/properties/").concat(Ke.propertyID)).set(null);var e=JSON.stringify(Ke);(e=JSON.parse(e)).owner={name:$e.name,citizenID:$e.citizenID,dateAdded:"".concat(n(),", ").concat(a())},console.log("edited sp",e),t.ref("/properties/".concat(Ke.propertyID,"/owner")).set({name:$e.name,citizenID:$e.citizenID,dateAdded:"".concat(n(),", ").concat(a())}),t.ref("/citizens/".concat($e.citizenID,"/properties/").concat(Ke.propertyID)).set(e),Lt()},className:"bg-yellow-300 py-1 px-2 flex text-sm hover:bg-yellow-400 font-semibold rounded shadow",children:[Object(o.jsx)(h.u,{className:"w-5 h-5"}),void 0!=Ke.owner?"CHANGE OWNER":"ADD OWNER"]})]})]}),Object(o.jsxs)("div",{className:"flow-root p-2 border-2 border-gray-400",children:[Object(o.jsx)("p",{className:"float-left font-semibold text-gray-700",children:"Current"}),Object(o.jsx)("p",{className:"float-right",children:Ke.owner?"".concat(Ke.owner.name,", ").concat(Ke.owner.citizenID):"None"})]}),Ke.owner&&Object(o.jsxs)("div",{className:"flow-root p-2 border-l-2 border-r-2 border-b-2 border-gray-400",children:[Object(o.jsx)("p",{className:"float-left font-semibold text-gray-700",children:"Date Given"}),Object(o.jsx)("p",{className:"float-right",children:Ke.owner.dateAdded})]})]})}),"Business"==Ke.type&&Object(o.jsx)("div",{className:"col-span-2 p-2",children:Object(o.jsxs)("div",{className:"bg-white",children:[Object(o.jsxs)("div",{className:"w-full flow-root p-2 bg-gray-200",children:[Object(o.jsx)("p",{className:"font-semibold float-left",children:"BUSINESS"}),Object(o.jsx)("div",{className:"float-right flex gap-2",children:Object(o.jsxs)("button",{onClick:function(){gt(!0)},className:"bg-yellow-300 py-1 px-2 flex text-sm hover:bg-yellow-400 font-semibold rounded shadow",children:[Object(o.jsx)(h.u,{className:"w-5 h-5"}),void 0!=Ke.business?"CHANGE BUSINESS":"ADD BUSINESS",Object(o.jsx)(z,{open:pt,setOpen:gt,header:void 0!=Ke.business?"Change Business":"Add Business",onClickSave:function(){},inputs:[],saveText:void 0!=Ke.business?"Change":"Add",additionalComponent:function(){return Object(o.jsx)(Y,{database:t,setValues:Lt,selectedProperty:Ke,setSelectedProperty:Ze,setAddChangeBusinessPopupOpen:gt})}})]})})]}),void 0!=Ke.business?Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"flow-root p-2 border-2 border-gray-400",children:[Object(o.jsx)("p",{className:"float-left font-semibold text-gray-700",children:"Name"}),Object(o.jsx)("p",{className:"float-right",children:Ke.business.name})]}),Object(o.jsxs)("div",{className:"flow-root p-2 border-b-2 border-l-2 border-r-2 border-gray-400",children:[Object(o.jsx)("p",{className:"float-left font-semibold text-gray-700",children:"Description"}),Object(o.jsx)("p",{className:"float-right",children:Ke.business.description})]})]}):Object(o.jsx)("div",{className:"flow-root p-2 border-2 border-gray-400",children:Object(o.jsx)("p",{className:"float-left font-semibold text-gray-700",children:"None yet"})})]})})]})}),Object(o.jsx)("p",{})]})]}),Object(o.jsx)("div",{className:"col-span-1 p-2",children:Object(o.jsxs)("div",{className:"bg-white rounded",children:[Object(o.jsxs)("div",{className:"p-2",children:[Object(o.jsxs)("button",{className:"w-full bg-yellow-300 hover:bg-yellow-400 font-semibold text-sm py-2 justify-center text-center rounded shadow flex",onClick:function(){Dt(!0)},children:[Object(o.jsx)(h.u,{className:"w-5 h-5"}),"ADD PROPERTY"]}),Object(o.jsx)(z,{open:wt,setOpen:Dt,header:"Add Property",onClickSave:function(){},inputs:[],saveText:"Add",additionalComponent:function(){return Object(o.jsx)(U,{database:t,getTime:s,getDate:n,getYear:a,properties:Rt,setProperties:Bt,setAddPropertyPopupOpen:Dt})}})]}),Object(o.jsx)("div",{className:"p-2",children:Object(o.jsx)("input",{placeholder:"Search",value:X,className:"w-full border-2 border-gray-500 p-2 bg-gray-100 focus:ring-1 focus:ring-gray-700 focus:border-gray-700 focus:outline-none",onChange:function(e){Q(e.target.value),Ce(Rt.filter((function(t){return console.log(Se),t.address.toUpperCase().includes(e.target.value.toUpperCase())})))}})}),Object(o.jsx)("div",{className:"",children:Se.map((function(e){return Object(o.jsx)("div",{className:"p-2",children:Object(o.jsxs)("button",{onClick:function(){Ze(e),localStorage.setItem("selectedProperty",JSON.stringify(e))},className:Vt(void 0!=Ke&&Ke.propertyID==e.propertyID?"border-2 border-blue-400 shadow-lg bg-yellow-400":" bg-yellow-300","w-full shadow rounded hover:bg-yellow-400 p-2 text-sm font-semibold"),children:[Object(o.jsx)("div",{children:e.address.toUpperCase()}),Object(o.jsx)("div",{className:"text-gray-700",children:e.propertyID.toUpperCase()})]})})}))})]})})]}),"Announcements"==j&&Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"w-full",children:Object(o.jsxs)("div",{className:"flow-root p-3 bg-white rounded shadow mx-2 my-2",children:[Object(o.jsx)("textarea",{className:"p-2 w-full mb-2 border-2 focus:border-black bg-gray-100 shadow-sm focus:outline-none border-gray-500 resize-none",placeholder:"Write announcement...",value:v,onKeyDown:function(e){"Enter"===e.code&&Yt()},onChange:function(e){e.target.value.includes("\n")||N(e.target.value)}}),Object(o.jsx)("div",{className:"w-full flex pb-2 justify-center",children:Object(o.jsx)("button",{onClick:Yt,className:Vt(""!=v&&void 0!=v?"bg-yellow-300 hover:bg-yellow-400":"bg-yellow-200 text-gray-400","w-64 flex text-md justify-center py-1 font-semibold rounded shadow"),children:Object(o.jsxs)("div",{className:"flex justify-center",children:[Object(o.jsx)(h.u,{className:"w-6 h-6"}),"POST ANNOUNCEMENT"]})})})]})}),Object(o.jsx)("div",{className:"mt-5 bg-gray-200 py-1 max-h-screen overflow-y-scroll",children:R.map((function(e){return Object(o.jsx)("div",{className:"px-2 py-1",children:Object(o.jsx)(Qt,{announcement:e})})}))})]})]})]})});function Ht(e){var t=e.transfer;return Object(o.jsxs)("div",{className:"rounded bg-white text-sm shadow",children:[Object(o.jsxs)("div",{className:"w-full",children:[Object(o.jsxs)("p",{className:"pl-2 pt-2 font-semibold text-gray-700",children:[t.date," at ",t.time]}),Object(o.jsxs)("p",{className:"pl-2 pt-2 font-semibold text-gray-700",children:[t.transferID," ",t.ssre]})]}),Object(o.jsxs)("div",{className:"grid grid-cols-4 p-2 gap-2",children:["Incoming"==t.type?Object(o.jsxs)("div",{className:"col-span-2 grid grid-cols-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Amount"}),Object(o.jsxs)("p",{className:"text-green-700",children:["+",t.amount," [M]"]})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"From"}),Object(o.jsx)("p",{className:"",children:t.senderName})]})]}):Object(o.jsxs)("div",{className:"col-span-2 grid grid-cols-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Amount"}),Object(o.jsxs)("p",{className:"text-red-700",children:["-",t.amount," [M]"]})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"To"}),Object(o.jsx)("p",{className:"",children:t.receiverName})]})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Reason"}),Object(o.jsx)("p",{className:"",children:t.reason})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Resulting Balance"}),Object(o.jsxs)("p",{className:"",children:[t.resultingBalance," [M]"]})]})]})]})}function qt(e){var t=e.license;return Object(o.jsxs)("div",{className:"border-2 border-gray-500 bg-white shadow p-2",children:[Object(o.jsxs)("div",{className:"flow-root",children:[Object(o.jsxs)("div",{className:"float-left",children:[Object(o.jsx)("p",{className:"text-lg font-semibold",children:t.title}),Object(o.jsx)("p",{className:"font-semibold text-gray-700",children:t.licenseID})]}),Object(o.jsxs)("p",{className:"float-right font-bold text-xl",children:[t.price," [M]"]})]}),Object(o.jsx)("p",{className:"pt-2 font-semibold",children:t.permissions})]})}function Kt(e){var t=e.license;return Object(o.jsxs)("div",{className:"border-2 border-gray-500 bg-white shadow p-2",children:[Object(o.jsxs)("div",{className:"flow-root",children:[Object(o.jsxs)("div",{className:"float-left",children:[Object(o.jsx)("p",{className:"text-lg font-semibold",children:t.title}),Object(o.jsx)("p",{className:"font-semibold text-gray-700",children:t.licenseID})]}),Object(o.jsxs)("p",{className:"float-right font-bold text-xl",children:[t.price," [M]"]})]}),Object(o.jsxs)("div",{className:"flow-root",children:[Object(o.jsx)("p",{className:"pt-2 pr-2 font-semibold float-left",children:t.permissions}),Object(o.jsxs)("div",{className:"flex float-right",children:[Object(o.jsx)(h.j,{className:"w-7 h-7"}),Object(o.jsxs)("p",{className:"float-right font-bold px-1 text-lg",children:["Purchased ",Ae.licenses[t.licenseID].datePurchased]})]})]})]})}function Zt(e){var t=e.charge;return Object(o.jsxs)("div",{className:"rounded bg-white shadow text-sm break-words",children:[Object(o.jsxs)("div",{className:"w-full",children:[Object(o.jsxs)("p",{className:"pl-2 pt-2 font-semibold text-gray-700",children:[t.date," at ",t.time]}),Object(o.jsxs)("p",{className:"pl-2 pt-2 font-semibold text-gray-700",children:[t.chargeID," ",t.ssre]})]}),"Guilty"==t.verdict?Object(o.jsxs)("div",{className:"grid grid-cols-3 p-2 gap-x-2 gap-y-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Prosecutor"}),Object(o.jsx)("p",{className:"",children:t.prosecutor.name}),Object(o.jsx)("p",{className:"",children:t.prosecutor.citizenID})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Defendant"}),Object(o.jsx)("p",{className:"",children:t.defendant.name}),Object(o.jsx)("p",{className:"",children:t.defendant.citizenID})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Verdict"}),Object(o.jsx)("p",{className:"text-red-700",children:"Guilty"})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Crime"}),Object(o.jsx)("p",{className:"",children:t.crime})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Reason for Verdict"}),Object(o.jsx)("p",{className:"",children:t.reasonForVerdict})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Punishment"}),Object(o.jsx)("p",{className:"",children:t.punishment})]})]}):Object(o.jsxs)("div",{className:"grid grid-cols-3 p-2 gap-x-2 gap-y-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Prosecutor"}),Object(o.jsx)("p",{className:"",children:t.prosecutor.name}),Object(o.jsx)("p",{className:"",children:t.prosecutor.citizenID})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Defendant"}),Object(o.jsx)("p",{className:"",children:t.defendant.name}),Object(o.jsx)("p",{className:"",children:t.defendant.citizenID})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Verdict"}),Object(o.jsx)("p",{className:"text-green-700",children:"Not Guilty"})]}),Object(o.jsx)("p",{className:"font-semibold",children:"Alleged Crime"}),Object(o.jsx)("p",{className:"",children:t.allegedCrime})]}),Object(o.jsxs)("div",{className:"col-span-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Reason for Verdict"}),Object(o.jsx)("p",{className:"",children:t.reasonForVerdict})]})]})]})}function Xt(e){var t=e.property;return Object(o.jsx)("div",{className:Vt("Citizens"==j?"text-sm":"","p-1"),children:Object(o.jsxs)("div",{className:"w-full bg-white group-hover:bg-gray-200 border-2 border-gray-500 grid grid-cols-4",children:[Object(o.jsx)("div",{className:"col-span-4 p-2 flow-root",children:Object(o.jsxs)("div",{className:"float-left",children:[Object(o.jsx)("p",{className:Vt("Citizens"==j?"text-lg":"text-xl","font-bold"),children:t.address}),Object(o.jsx)("p",{className:Vt("Citizens"==j?"text-xs":"text-sm","uppercase font-semibold"),children:t.type})]})}),Object(o.jsxs)("div",{className:"col-span-1 p-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Property ID"}),Object(o.jsx)("p",{children:t.propertyID})]}),Object(o.jsxs)("div",{className:"col-span-1 p-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Price"}),Object(o.jsxs)("p",{children:[t.price," [M]"]})]}),Object(o.jsxs)("div",{className:"col-span-1 p-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Dimensions"}),Object(o.jsxs)("p",{children:[t.length," by ",t.width]})]}),Object(o.jsxs)("div",{className:"col-span-1 p-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Date Added"}),Object(o.jsx)("p",{children:t.dateAdded})]})]})})}function Qt(e){var t=e.announcement;return Object(o.jsxs)("div",{className:"bg-white rounded shadow p-2",children:[Object(o.jsxs)("p",{className:"text-gray-700 font-semibold",children:[t.datePosted," at ",t.timePosted]}),Object(o.jsx)("div",{className:"p-2",children:Object(o.jsx)("p",{className:"text-lg font-semibold py-2 px-2 border-2 border-gray-400 shadow-sm",children:t.text})})]})}},H=function(e){var t=e.database,s=e.user,n=e.getDate,a=e.getYear,r=e.getTime,l=e.selectedSection,d=e.setSelectedSection,b=(e.selectedPost,e.setSelectedPost),j=Object(c.useState)([]),f=Object(i.a)(j,2),x=f[0],p=f[1],g=Object(c.useState)(),O=Object(i.a)(g,2),v=O[0],N=O[1],y=Object(c.useState)(),w=Object(i.a)(y,2),D=w[0],I=w[1],z=Object(c.useState)([]),S=Object(i.a)(z,2),C=S[0],k=S[1],T=Object(c.useState)(),A=Object(i.a)(T,2),E=A[0],P=A[1],R=Object(c.useState)(!1),B=Object(i.a)(R,2),U=(B[0],B[1],Object(c.useState)("")),F=Object(i.a)(U,2),L=F[0],Y=F[1],W=Object(c.useState)(12),G=Object(i.a)(W,2),J=G[0],V=G[1],H=Object(c.useState)("Most Recent"),q=Object(i.a)(H,2),K=q[0],Z=q[1],X=Object(c.useState)(!1),Q=Object(i.a)(X,2),$=Q[0],_=Q[1],ee=Object(c.useState)(!1),te=Object(i.a)(ee,2),se=te[0],ce=te[1],ne=Object(c.useState)(!1),ae=Object(i.a)(ne,2),re=ae[0],ie=ae[1],le=Object(c.useState)(!1),oe=Object(i.a)(le,2),de=oe[0],be=oe[1],je=Object(c.useState)(!1),me=Object(i.a)(je,2),ue=me[0],he=me[1],fe=1522648800,xe=[{sectionName:"Public Posts",sectionSelected:"Public Posts"==l,icon:h.s},{sectionName:"Government Announcements",sectionSelected:"Government Announcements"==l,icon:h.w},{sectionName:"Criminal Charges",sectionSelected:"Criminal Charges"==l,icon:h.v},{sectionName:"Notifications",sectionSelected:"Notifications"==l,icon:h.d}];function pe(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}function ge(){console.log("Called updateValues()"),t.ref("/citizens/".concat(s.citizenID,"/notifications")).get().then((function(e){void 0!=e.val()&&P(Object.values(e.val()).sort((function(e,t){return t.ssre-e.ssre}))),"Notifications"==l?t.ref("/citizens/".concat(s.citizenID,"/notifications")).get().then((function(e){if(void 0!=e.val()){var c=Object.values(e.val());c.forEach((function(e){e.seen=!0})),ie(!1),t.ref("/citizens/".concat(s.citizenID,"/notifications")).set(c),P(c.sort((function(e,t){return t.ssre-e.ssre})))}})):void 0!=e.val()&&function(e){console.log("Called updateUnseenNotifications()");var t=!1,s=0;void 0!=e&&e.forEach((function(e){e.seen||(s++,t=!0)}));console.log("Found",s,"unseen notifications"),ie(t)}(Object.values(e.val())),ce(!0),t.ref("/posts").get().then((function(e){void 0!=e.val()&&(console.log("Retrieved",Object.values(e.val()).length,"posts, showing",J),N(Object.values(e.val()).sort((function(e,t){return t.ssre-e.ssre})).slice(0,100)),Oe(Object.values(e.val()).sort((function(e,t){return t.ssre-e.ssre})),J)),_(!0),t.ref("/announcements").get().then((function(e){void 0!=e.val()&&k(Object.values(e.val()).sort((function(e,t){return t.ssre-e.ssre})).slice(0,100)),be(!0),t.ref("/criminalCharges").get().then((function(e){void 0!=e.val()&&p(Object.values(e.val()).sort((function(e,t){return t.ssre-e.ssre}))),he(!0)}))}))}))}))}function Oe(e,t){if(e){var s=Object(M.a)(e.sort((function(e,t){return t.ssre-e.ssre})));"Most Liked"==K?s.sort((function(e,t){var s=void 0!=e.liked?Object.values(e.liked).length:0;return(void 0!=t.liked?Object.values(t.liked).length:0)-s})):"Most Disliked"==K&&s.sort((function(e,t){var s=void 0!=e.disliked?Object.values(e.disliked).length:0;return(void 0!=t.disliked?Object.values(t.disliked).length:0)-s})),I(s.slice(0,t))}}function ve(e){return s.citizenID!=e?"CI-***".concat(e.substring(6,8)):e}function Ne(e){var t=Math.round((new Date).getTime()/1e3-fe)-e.ssre;if(t>2591999)return"".concat(e.datePosted);if(t>307199){var s=ye(t/307200,0);return"".concat(s," Rushington ").concat(1!=s?"years":"year"," ago")}if(t>38399){var c=ye(t/38400,0);return"".concat(c," Rushington ").concat(1!=c?"months":"month"," ago")}if(t>1199){var n=ye(Math.round((new Date).getTime()/1e3-fe)/1200,0)-ye(e.ssre/1200,0);return"".concat(n," Rushington ").concat(1!=n?"days":"day"," ago")}if(t>59){var a=ye(t/60,0);return"".concat(a," ").concat(1!=a?"minutes":"minute"," ago")}return"".concat(t," ").concat(1!=t?"seconds":"second"," ago")}function ye(e,t){var s=new RegExp("^-?\\d+(?:.\\d{0,"+(t||-1)+"})?");return e.toString().match(s)[0]}function we(){if(""!=L&&void 0!=L){var e=function(){for(var e="PO-",t=0;t<5;t++)e+=String(Math.floor(10*Math.random()));return e}(),c={postID:e,ssre:Math.round((new Date).getTime()/1e3-fe),poster:{citizenID:s.citizenID,name:s.name},text:L,datePosted:"".concat(n(),", ").concat(a()),timePosted:r()};t.ref("/posts/".concat(e)).set(c),ge(),Y("")}}function De(e){return e.open?Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(o.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})}):Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(o.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})})}return Object(c.useEffect)(ge,[]),Object(c.useEffect)((function(){Oe(v,J)}),[K]),Object(o.jsx)("div",{children:Object(o.jsxs)("div",{className:"grid grid-cols-4 gap-5",children:[Object(o.jsx)("div",{className:"col-span-4 lg:col-span-1 lg:h-40 lg:sticky lg:top-6",children:xe.map((function(e){var c=e.icon;return Object(o.jsx)("div",{className:"flex-auto lg:flex-none",children:Object(o.jsx)("button",{onClick:function(){d(e.sectionName),localStorage.setItem("selectedSection",e.sectionName),"Notifications"==e.sectionName&&t.ref("/citizens/".concat(s.citizenID,"/notifications")).get().then((function(e){if(void 0!=e.val()){var c=Object.values(e.val());c.forEach((function(e){e.seen=!0})),t.ref("/citizens/".concat(s.citizenID,"/notifications")).set(c),ge()}}))},className:pe(e.sectionSelected?"bg-gray-200":"bg-white hover:bg-gray-100","rounded p-2 w-full text-center lg:text-left"),children:Object(o.jsxs)("div",{className:"flex gap-2 justify-center lg:justify-start",children:[Object(o.jsx)(c,{className:"h-6 w-6",fill:pe("Notifications"==e.sectionName&&re?"#facc15":"white")}),Object(o.jsx)("p",{className:"text-gray-800 font-semibold",children:e.sectionName})]})})})}))}),Object(o.jsx)("div",{className:"col-span-4 lg:col-span-3 bg-gray-100 rounded",children:Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)("p",{className:"font-bold py-1 px-2 bg-gray-100 border-b border-gray-400 text-xl",children:l}),"Criminal Charges"==l&&Object(o.jsxs)("div",{className:pe(ue?"":"animate-pulse","p-1 lg:p-2"),children:[!ue&&Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)(h.m,{className:"h-10 w-10"})}),x.map((function(e){return Object(o.jsx)("div",{className:"p-1 lg:p-2",children:Object(o.jsx)(ze,{charge:e})})}))]}),"Public Posts"==l&&Object(o.jsxs)("div",{className:pe($?"":"animate-pulse","w-full"),children:[Object(o.jsxs)("div",{className:"flow-root p-1 mx-2 my-2",children:[Object(o.jsx)("textarea",{className:"p-2 rounded w-full focus:ring-1 focus:ring-gray-700 mb-2 border-2 focus:border-gray-700 bg-white shadow-sm focus:outline-none border-gray-500 resize-none",placeholder:"Write post...",value:L,onKeyDown:function(e){"Enter"===e.code&&we()},onChange:function(e){e.target.value.includes("\n")||Y(e.target.value)}}),Object(o.jsx)("div",{className:"w-full flex pb-2 justify-center",children:Object(o.jsx)("button",{onClick:we,className:pe(""!=L&&void 0!=L?"bg-yellow-300 hover:bg-yellow-400":"bg-yellow-200 text-gray-400","w-64 flex text-md justify-center py-1 font-semibold rounded shadow"),children:Object(o.jsxs)("div",{className:"flex justify-center",children:[Object(o.jsx)(h.u,{className:"w-6 h-6"}),"POST TO EVERYONE"]})})})]}),!$&&Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)(h.m,{className:"h-10 w-10"})}),D&&Object(o.jsxs)("div",{className:"w-full",children:[Object(o.jsx)("div",{className:"flow-root w-full px-3 py-1",children:Object(o.jsx)(m.a,{as:"div",className:pe("flex-shrink-0 float-right"),children:function(e){var t=e.open;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)(m.a.Button,{className:"bg-white justify-center flex rounded-lg flex px-2 py-2 font-semibold text-sm ring-2 ring-gray ring-opacity-20 focus:outline-none",children:[Object(o.jsx)("p",{className:"text-center",children:K}),Object(o.jsx)(De,{open:t})]})}),Object(o.jsx)(u.a,{show:t,as:c.Fragment,enter:"transition ease-out duration-75",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)(m.a.Items,{static:!0,className:"z-50 absolute justify-center h-auto w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-green ring-opacity-5 focus:outline-none",children:Object(o.jsxs)("div",{className:"max-h-40",children:[Object(o.jsx)(m.a.Item,{children:function(e){var t=e.active;return Object(o.jsx)("button",{onClick:function(){Z("Most Recent")},className:pe(t?"bg-gray-100":"","block w-full text-left px-4 py-2 text-sm text-green"),children:"Most Recent"})}}),Object(o.jsx)(m.a.Item,{children:function(e){var t=e.active;return Object(o.jsx)("button",{onClick:function(){Z("Most Liked")},className:pe(t?"bg-gray-100":"","block w-full text-left px-4 py-2 text-sm text-green"),children:"Most Liked"})}}),Object(o.jsx)(m.a.Item,{children:function(e){var t=e.active;return Object(o.jsx)("button",{onClick:function(){Z("Most Disliked")},className:pe(t?"bg-gray-100":"","block w-full text-left px-4 py-2 text-sm text-green"),children:"Most Disliked"})}})]})})})})]})}})}),0!=D.length?Object(o.jsxs)("div",{className:"w-full p-1 lg:p-2 bg-gray-200",children:[D.map((function(e){return Object(o.jsx)("div",{className:"p-1 lg:p-2",children:Object(o.jsx)(Ie,{post:e})})})),J<v.length&&Object(o.jsx)("div",{className:"flex justify-center py-2",children:Object(o.jsxs)("button",{className:"px-2 py-1 rounded shadow bg-yellow-300 hover:bg-yellow-400 font-semibold flex",onClick:function(){var e=J+10;V(e),Oe(v,e)},children:[Object(o.jsx)(h.u,{className:"h-6 w-6"}),"LOAD MORE POSTS"]})})]}):Object(o.jsx)("p",{className:"text-gray-700 text-center font-bold py-2 w-full",children:"NONE YET"})]})]}),"Government Announcements"==l&&Object(o.jsxs)("div",{className:pe(de?"":"animate-pulse","py-1 lg:py-2"),children:[!de&&Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)(h.m,{className:"h-10 w-10"})}),C.map((function(e){return Object(o.jsx)("div",{className:"px-2 py-1 lg:px-4 lg:py-2",children:Object(o.jsx)(Se,{announcement:e})})}))]}),"Notifications"==l&&Object(o.jsx)("div",{className:pe(se?"":"animate-pulse"),children:se?Object(o.jsx)("div",{className:"px-2 lg:px-4",children:void 0!=E?Object(o.jsx)("div",{className:"py-1 lg:py-2",children:E.map((function(e){return Object(o.jsx)("div",{className:"py-1 lg:py-2",children:Object(o.jsxs)("button",{className:"bg-white rounded shadow p-2 w-full",onClick:function(){t.ref("/posts/".concat(e.post.postID)).get().then((function(e){void 0!=e.val()&&(b(e.val()),localStorage.setItem("selectedPost",JSON.stringify(e.val())),window.location.href="/post")}))},children:["commented"==e.action?Object(o.jsxs)("div",{className:"flex flex-wrap gap-1",children:[Object(o.jsx)("p",{className:"font-bold flex-none flex-wrap",children:e.actor.name}),Object(o.jsx)("p",{className:"flex-wrap",children:"commented:"}),Object(o.jsx)("p",{className:"text-left flex-wrap font-semibold",children:e.commentText})]}):Object(o.jsxs)("div",{className:"flex flex-wrap gap-1",children:[Object(o.jsx)("p",{className:"font-bold flex-none flex-wrap",children:e.actor.name}),Object(o.jsxs)("p",{className:"flex-none",children:[e.action," your ",e.object,":"]}),Object(o.jsx)("p",{className:"font-semibold flex justify-start text-left",children:"post"==e.object?e.post.text:e.comment.text})]}),Object(o.jsxs)("p",{className:"font-semibold text-gray-700 pt-1 text-sm text-left",children:[e.dateAdded," at ",e.timeAdded]})]})})}))}):Object(o.jsx)("div",{className:"text-center font-semibold text-lg py-6 text-gray-700",children:"NO NOTIFICATIONS YET"})}):Object(o.jsx)("div",{className:"flex justify-center pt-10",children:Object(o.jsx)(h.m,{className:"h-10 w-10"})})})]})})]})});function Ie(e){var c=e.post;return Object(o.jsx)("div",{className:"rounded bg-white shadow",children:Object(o.jsxs)("a",{onClick:function(){b(c),localStorage.setItem("selectedPost",JSON.stringify(c))},href:"/post",children:[Object(o.jsxs)("div",{className:"flow-root",children:[Object(o.jsxs)("button",{onClick:function(e){e.preventDefault(),t.ref("/citizens/".concat(c.poster.citizenID)).get().then((function(e){localStorage.setItem("selectedCitizen",JSON.stringify(e.val())),window.location.href="/profile"}))},className:"px-1 m-1 text-gray-700 text-left font-semibold float-left hover:bg-gray-100 rounded",children:[Object(o.jsx)("p",{className:"",children:c.poster.citizenID==s.citizenID?"Me":c.poster.name}),Object(o.jsx)("p",{className:"text-sm",children:ve(c.poster.citizenID)})]}),Object(o.jsx)("div",{className:"float-right p-2",children:Object(o.jsx)("p",{className:"text-right text-gray-700 font-semibold uppercase text-sm",children:Ne(c)})})]}),Object(o.jsx)("div",{className:"px-3 py-1",children:Object(o.jsx)("p",{className:"text-lg font-semibold py-2 px-2 border-2 border-gray-400 shadow-sm bg-white",children:c.text})}),Object(o.jsxs)("div",{className:pe(void 0!=c.comments?"border-b border-gray-500":"","w-full flow-root pb-2 pt-5 px-2"),children:[Object(o.jsxs)("button",{className:"flex gap-1 float-left hover:bg-gray-200 rounded p-1",onClick:function(e){e.preventDefault(),t.ref("/posts/".concat(c.postID)).get().then((function(e){var c=e.val(),i=void 0!=c.liked?Object(M.a)(Object.values(c.liked)):[],l=void 0!=c.disliked?Object(M.a)(Object.values(c.disliked)):[];i.includes(s.citizenID)?(i.splice(i.indexOf(s.citizenID),1),console.log("liked",i),t.ref("/posts/".concat(c.postID,"/liked")).set(i),ge()):(i.push(s.citizenID),l.includes(s.citizenID)&&l.splice(l.indexOf(s.citizenID),1),t.ref("/posts/".concat(c.postID,"/liked")).set(i),t.ref("/posts/".concat(c.postID,"/disliked")).set(l),ge(),c.poster.citizenID!=s.citizenID&&t.ref("/citizens/".concat(c.poster.citizenID,"/notifications")).get().then((function(e){var i=void 0!=e.val()?Object.values(e.val()):[];i.push({dateAdded:"".concat(n(),", ").concat(a()),timeAdded:r(),action:"liked",object:"post",actor:{name:s.name,citizenID:s.citizenID},post:{postID:c.postID,text:c.text},seen:!1,ssre:Math.round((new Date).getTime()/1e3-fe)}),t.ref("/citizens/".concat(c.poster.citizenID,"/notifications")).set(i)})))}))},children:[Object(o.jsx)(h.y,{className:"h-6 w-6",fill:pe(void 0!=c.liked&&Object.values(c.liked).includes(s.citizenID)?"#facc15":"white")}),Object(o.jsx)("p",{className:"font-semibold",children:void 0!=c.liked?Object.values(c.liked).length:0})]}),Object(o.jsxs)("button",{className:"flex gap-1 float-left hover:bg-gray-200 rounded p-1 mx-1",onClick:function(e){e.preventDefault(),t.ref("posts/".concat(c.postID)).get().then((function(e){var c=e.val(),i=void 0!=c.disliked?Object(M.a)(Object.values(c.disliked)):[],l=void 0!=c.liked?Object(M.a)(Object.values(c.liked)):[];i.includes(s.citizenID)?(i.splice(i.indexOf(s.citizenID),1),t.ref("/posts/".concat(c.postID,"/disliked")).set(i),ge()):(i.push(s.citizenID),l.includes(s.citizenID)&&l.splice(l.indexOf(s.citizenID),1),t.ref("/posts/".concat(c.postID,"/disliked")).set(i),t.ref("/posts/".concat(c.postID,"/liked")).set(l),ge(),c.poster.citizenID!=s.citizenID&&t.ref("/citizens/".concat(c.poster.citizenID,"/notifications")).get().then((function(e){var i=void 0!=e.val()?Object.values(e.val()):[];i.push({dateAdded:"".concat(n(),", ").concat(a()),timeAdded:r(),action:"disliked",object:"post",actor:{name:s.name,citizenID:s.citizenID},post:{postID:c.postID,text:c.text},seen:!1,ssre:Math.round((new Date).getTime()/1e3-fe)}),t.ref("/citizens/".concat(c.poster.citizenID,"/notifications")).set(i)})))}))},children:[Object(o.jsx)(h.x,{className:"h-6 w-6",fill:pe(void 0!=c.disliked&&Object.values(c.disliked).includes(s.citizenID)?"#facc15":"white")}),Object(o.jsx)("p",{className:"font-semibold",children:void 0!=c.disliked?Object.values(c.disliked).length:0})]}),Object(o.jsxs)("a",{href:"/post",className:"p-1 gap-1 float-left rounded flex hover:bg-gray-200",onClick:function(){b(c),localStorage.setItem("selectedPost",JSON.stringify(c))},children:[Object(o.jsx)(h.i,{className:"h-6 w-6",fill:"white"}),Object(o.jsx)("p",{className:"font-semibold",children:void 0!=c.comments?Object.values(c.comments).length:0})]}),c.poster.citizenID==s.citizenID&&Object(o.jsx)("button",{className:"font-semibold bg-yellow-300 hover:bg-yellow-400 rounded shadow flex float-right",onClick:function(e){e.preventDefault(),t.ref("/posts/".concat(c.postID)).set(null),ge()},children:Object(o.jsxs)("div",{className:"px-2 py-1 flex",children:[Object(o.jsx)(h.B,{className:"h-6 w-6"}),"DELETE"]})})]}),void 0!=c.comments&&Object(o.jsxs)("div",{className:"p-2",children:[Object.values(c.comments).sort((function(e,t){return t.ssre-e.ssre})).sort((function(e,t){var s=void 0!=e.liked?Object.values(e.liked).length:0;return(void 0!=t.liked?Object.values(t.liked).length:0)-s})).slice(0,2).map((function(e){return Object(o.jsxs)("div",{className:"flex gap-3",children:[Object(o.jsx)("div",{className:"font-bold flex-none",children:e.poster.name}),Object(o.jsx)("p",{className:"truncate",children:e.text})]})})),Object.values(c.comments).length>2&&Object(o.jsxs)("div",{className:"text-base font-semibold pt-1",children:[Object.values(c.comments).length-2," more..."]})]})]})})}function ze(e){var t=e.charge;return Object(o.jsxs)("div",{className:"rounded bg-white shadow text-sm break-words",children:[Object(o.jsxs)("div",{className:"w-full",children:[Object(o.jsxs)("p",{className:"pl-2 pt-2 font-semibold text-gray-700",children:[t.date," at ",t.time]}),Object(o.jsxs)("p",{className:"pl-2 pt-2 font-semibold text-gray-700",children:[t.chargeID," ",t.ssre]})]}),"Guilty"==t.verdict?Object(o.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 p-2 gap-x-4 gap-y-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Prosecutor"}),Object(o.jsx)("p",{className:"",children:t.prosecutor.name}),Object(o.jsx)("p",{className:"",children:ve(t.prosecutor.citizenID)})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Defendant"}),Object(o.jsx)("p",{className:"",children:t.defendant.name}),Object(o.jsx)("p",{className:"",children:ve(t.defendant.citizenID)})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Crime"}),Object(o.jsx)("p",{className:"",children:t.crime})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Verdict"}),Object(o.jsx)("p",{className:"text-red-700",children:"Guilty"})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Reason for Verdict"}),Object(o.jsx)("p",{className:"",children:t.reasonForVerdict})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Sentence"}),Object(o.jsx)("p",{className:"",children:t.punishment})]})]}):Object(o.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-2 p-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Prosecutor"}),Object(o.jsx)("p",{className:"",children:t.prosecutor.name}),Object(o.jsx)("p",{className:"",children:ve(t.prosecutor.citizenID)})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Defendant"}),Object(o.jsx)("p",{className:"",children:t.defendant.name}),Object(o.jsx)("p",{className:"",children:ve(t.defendant.citizenID)})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Alleged Crime"}),Object(o.jsx)("p",{className:"",children:t.allegedCrime})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Verdict"}),Object(o.jsx)("p",{className:"text-green-700",children:"Not Guilty"})]}),Object(o.jsxs)("div",{className:"col-span-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Reason for Verdict"}),Object(o.jsx)("p",{className:"",children:t.reasonForVerdict})]})]})]})}function Se(e){var t=e.announcement;return Object(o.jsxs)("div",{className:"bg-white rounded shadow p-2",children:[Object(o.jsxs)("p",{className:"text-gray-700 font-semibold",children:[t.datePosted," at ",t.timePosted]}),Object(o.jsx)("div",{className:"p-2",children:Object(o.jsx)("p",{className:"text-lg font-semibold py-2 px-2 border-2 border-gray-400 shadow-sm",children:t.text})})]})}},q=n.a.memo(H),K=function(e){var t=e.user,s=e.database,n=e.getDate,a=e.getYear,r=e.getTime,l=1522648800,d=Object(c.useState)(void 0!=localStorage.getItem("selectedCitizen")?JSON.parse(localStorage.getItem("selectedCitizen")):{}),b=Object(i.a)(d,2),j=b[0],m=b[1],u=Object(c.useState)("Posts"),f=Object(i.a)(u,2),x=f[0],p=f[1],g=Object(c.useState)(!1),O=Object(i.a)(g,2),v=O[0],N=O[1],y=Object(c.useState)(),w=Object(i.a)(y,2),D=w[0],I=w[1],z=Object(c.useState)(!1),S=Object(i.a)(z,2),C=S[0],k=S[1],T=Object(c.useState)(void 0!=j.biography?j.biography:void 0),A=Object(i.a)(T,2),E=A[0],P=A[1];function R(e){return t.citizenID!=e?"CI-***".concat(e.substring(6,8)):e}function B(){s.ref("/citizens/".concat(j.citizenID)).get().then((function(e){m(e.val()),localStorage.setItem("selectedCitizen",JSON.stringify(e.val())),P(e.val().biography),s.ref("/posts").get().then((function(e){I(Object.values(e.val()).filter((function(e){return e.poster.citizenID==j.citizenID})).sort((function(e,t){return t.ssre-e.ssre}))),k(!0)}))}))}function U(e){var t=Math.round((new Date).getTime()/1e3-l)-e.ssre;if(t>3455999)return"".concat(e.datePosted);if(t>345599){var s=F(t/345600,0);return"".concat(s," Rushington ").concat(1!=s?"years":"year"," ago")}if(t>28799){var c=F(t/28800,0);return"".concat(c," Rushington ").concat(1!=c?"months":"month"," ago")}if(t>1199){var n=F(Math.round((new Date).getTime()/1e3-l)/1200,0)-F(e.ssre/1200,0);return"".concat(n," Rushington ").concat(1!=n?"days":"day"," ago")}if(t>59){var a=F(t/60,0);return"".concat(a," ").concat(1!=a?"minutes":"minute"," ago")}return"".concat(t," ").concat(1!=t?"seconds":"second"," ago")}function F(e,t){var s=new RegExp("^-?\\d+(?:.\\d{0,"+(t||-1)+"})?");return e.toString().match(s)[0]}function L(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}return Object(c.useEffect)(B,[]),Object(o.jsxs)("div",{className:"bg-white rounded lg:px-20",children:[Object(o.jsxs)("div",{className:"py-2",children:[Object(o.jsx)("div",{className:"flex justify-center text-3xl font-bold",children:j.name}),Object(o.jsx)("div",{className:"flex justify-center text-lg",children:R(j.citizenID)})]}),v?Object(o.jsx)("div",{className:"w-full",children:Object(o.jsx)("textarea",{className:"rounded resize-none border-2 text-center border-gray-500 h-20 w-full p-2 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700",onChange:function(e){P(e.target.value)},placeholder:L(void 0!=j.biography?"Edit biography...":"Add biography..."),value:E})}):null,Object(o.jsxs)("div",{className:"border-b border-gray-500 lg:mx-2 pb-2",children:[void 0!=j.biography&&!v&&Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)("p",{className:"p-2 border-gray-500 border-2 font-semibold text-center shadow",children:j.biography})}),j.citizenID==t.citizenID?v?Object(o.jsxs)("div",{className:"flex gap-2 justify-center",children:[Object(o.jsxs)("button",{className:"bg-yellow-300 hover:bg-yellow-400 font-semibold p-2 flex justify-center rounded my-1 text-sm shadow",onClick:function(){N(!1)},children:[Object(o.jsx)(h.B,{className:"h-5 w-5"}),"CANCEL"]}),Object(o.jsxs)("button",{className:L(void 0!=E&&""!=E?"bg-yellow-300 hover:bg-yellow-400":"bg-yellow-200 text-gray-400","font-semibold p-2 flex justify-center rounded my-1 text-sm shadow"),onClick:function(){void 0!=E&&""!=E&&(s.ref("/citizens/".concat(t.citizenID,"/biography")).set(E),N(!1),B())},children:[Object(o.jsx)(h.j,{className:"h-5 w-5"}),"SAVE"]})]}):void 0==j.biography?Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)("button",{className:"bg-yellow-300 hover:bg-yellow-400 shadow text-sm font-semibold p-2 flex justify-center rounded my-1",onClick:function(){N(!0)},children:[Object(o.jsx)(h.u,{className:"h-5 w-5"}),"ADD BIO"]})}):Object(o.jsx)("div",{className:"flex justify-center my-2",children:Object(o.jsxs)("button",{className:"bg-yellow-300 hover:bg-yellow-400 text-sm font-semibold flex rounded p-2 shadow justify-center",onClick:function(){N(!0)},children:[Object(o.jsx)(h.t,{className:"h-5 w-5"}),"EDIT BIO"]})}):null]}),Object(o.jsxs)("div",{className:"pt-8 lg:mx-2 border-b border-gray-500",children:[Object(o.jsx)("button",{className:L("Posts"==x?"border-b-4 border-yellow-300 font-bold hover:bg-gray-100 rounded-t":"text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded","w-1/2 py-1"),onClick:function(){p("Posts")},children:"POSTS"}),Object(o.jsx)("button",{className:L("File"==x?"border-b-4 border-yellow-300 font-bold hover:bg-gray-100 rounded-t":"text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded","w-1/2 py-1"),onClick:function(){p("File")},children:"FILE"})]}),Object(o.jsxs)("div",{children:["File"==x&&Object(o.jsxs)("div",{className:"pt-2",children:[Object(o.jsx)("div",{className:"text-lg",children:Object(o.jsxs)("div",{className:"grid grid-cols-3 lg:m-2 border-2 border-gray-400",children:[Object(o.jsxs)("div",{className:"col-span-1 p-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Name"}),Object(o.jsx)("p",{children:j.name})]}),Object(o.jsxs)("div",{className:"col-span-1 p-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Citizen ID"}),Object(o.jsx)("p",{children:R(j.citizenID)})]}),Object(o.jsxs)("div",{className:"col-span-1 p-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Date Added"}),Object(o.jsx)("p",{children:j.dateAdded})]})]})}),Object(o.jsx)("div",{className:"py-2",children:Object(o.jsxs)("div",{className:"grid grid-cols-2",children:[Object(o.jsx)("div",{className:"col-span-2 py-2 lg:px-2",children:Object(o.jsxs)("div",{className:"bg-white",children:[Object(o.jsxs)("div",{className:"w-full flow-root p-2 bg-gray-200",children:[Object(o.jsx)("p",{className:"font-semibold float-left",children:"BANK"}),Object(o.jsx)("div",{className:"float-right flex gap-1",children:Object(o.jsxs)("a",{href:"/bank",className:"bg-yellow-300 py-1 px-2 flex text-sm hover:bg-yellow-400 font-semibold rounded shadow",children:[Object(o.jsx)(h.p,{className:"w-5 h-5"}),"GO TO BANK"]})})]}),Object(o.jsxs)("div",{className:"flow-root p-2 border-2 border-gray-400",children:[Object(o.jsx)("p",{className:"float-left font-semibold text-gray-700",children:"Balance"}),Object(o.jsxs)("p",{className:"float-right",children:[j.meldas," [M]"]})]}),Object(o.jsxs)("div",{className:"p-2 border-b-2 border-r-2 border-l-2 border-gray-400",children:[Object(o.jsx)("p",{className:"font-semibold text-gray-700",children:"Transaction History"}),void 0!=j.transfers&&Object(o.jsx)("div",{className:"max-h-96 overflow-y-scroll bg-gray-100 md:scrollbar-show sm:scrollbar-hide",children:Object.values(j.transfers).sort((function(e,t){return t.ssre-e.ssre})).map((function(e){return Object(o.jsx)("div",{className:"p-1",children:Object(o.jsx)(W,{transfer:e})})}))}),void 0==j.transfers&&Object(o.jsx)("div",{className:"",children:"None yet"})]})]})}),Object(o.jsx)("div",{className:"col-span-2 py-2 lg:px-2",children:Object(o.jsxs)("div",{className:"bg-white",children:[Object(o.jsx)("div",{className:"p-2 flow-root w-full bg-gray-200",children:Object(o.jsx)("p",{className:"font-semibold float-left",children:"CRIMINAL CHARGES"})}),Object(o.jsxs)("div",{className:"flow-root p-2 border-2 border-gray-400",children:[Object(o.jsx)("p",{className:"float-left font-semibold text-gray-700",children:"Total"}),Object(o.jsx)("p",{className:"float-right",children:j.charges?Object.values(j.charges).length:0})]}),Object(o.jsxs)("div",{className:"p-2 border-b-2 border-r-2 border-l-2 border-gray-400",children:[void 0!=j.charges&&Object(o.jsx)("div",{className:"max-h-96 overflow-y-scroll bg-gray-100",children:Object.values(j.charges).sort((function(e,t){return t.ssre-e.ssre})).map((function(e){return Object(o.jsx)("div",{className:"p-1",children:Object(o.jsx)(G,{charge:e})})}))}),void 0==j.charges&&Object(o.jsx)("div",{className:"",children:"None yet"})]})]})}),Object(o.jsx)("div",{className:"col-span-2 py-2 lg:px-2",children:Object(o.jsxs)("div",{className:"bg-white",children:[Object(o.jsxs)("div",{className:"w-full flow-root p-2 bg-gray-200",children:[Object(o.jsx)("p",{className:"font-semibold float-left",children:"LICENSES"}),Object(o.jsx)("div",{className:"float-right flex gap-1",children:Object(o.jsxs)("a",{href:"/licenses",className:"bg-yellow-300 py-1 px-2 flex text-sm hover:bg-yellow-400 font-semibold rounded shadow",children:[Object(o.jsx)(h.l,{className:"w-5 h-5"}),"GO TO LICENSES"]})})]}),Object(o.jsxs)("div",{className:"flow-root p-2 border-2 border-gray-400",children:[Object(o.jsx)("p",{className:"float-left font-semibold text-gray-700",children:"Total"}),Object(o.jsx)("p",{className:"float-right",children:j.licenses?Object.values(j.licenses).length:0})]}),Object(o.jsxs)("div",{className:"p-2 border-b-2 border-r-2 border-l-2 border-gray-400",children:[void 0!=j.licenses&&Object(o.jsx)("div",{className:"max-h-96 overflow-y-scroll bg-gray-100",children:Object.values(j.licenses).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return Object(o.jsx)("div",{className:"w-full text-left group",onClick:function(){},children:Object(o.jsx)(J,{license:e})})}))}),void 0==j.licenses&&Object(o.jsx)("div",{className:"",children:"None yet"})]})]})})]})})]}),"Posts"==x&&Object(o.jsxs)("div",{className:"lg:px-2",children:[void 0!=D&&0!=D.length&&Object(o.jsx)("div",{className:"bg-gray-200 p-1 lg:p-2 rounded-b",children:D.map((function(e){return Object(o.jsx)("div",{className:"p-1 lg:p-2",children:Object(o.jsx)(Y,{post:e})})}))}),void 0!=D&&0==D.length&&Object(o.jsx)("div",{className:"bg-gray-200 p-1 lg:p-2 rounded-b",children:Object(o.jsx)("div",{className:"p-1 lg:p-2",children:Object(o.jsx)("p",{className:"text-gray-700 font-semibold text-center",children:"NONE YET"})})}),!C&&Object(o.jsx)("div",{className:"bg-gray-200 p-1 lg:p-2 rounded-b animate-pulse flex justify-center",children:Object(o.jsx)(h.m,{className:"h-10 w-10"})})]})]})]});function Y(e){var c=e.post;return Object(o.jsx)("div",{className:"rounded bg-white shadow",children:Object(o.jsxs)("a",{onClick:function(){localStorage.setItem("selectedPost",JSON.stringify(c))},href:"/post",children:[Object(o.jsxs)("div",{className:"flow-root",children:[Object(o.jsxs)("button",{onClick:function(e){e.preventDefault(),s.ref("/citizens/".concat(c.poster.citizenID)).get().then((function(e){localStorage.setItem("selectedCitizen",JSON.stringify(e.val())),window.location.href="/profile"}))},className:"p-1 m-1 text-gray-700 text-left font-semibold float-left hover:bg-gray-100 rounded",children:[Object(o.jsx)("p",{className:"",children:c.poster.citizenID==t.citizenID?"Me":c.poster.name}),Object(o.jsx)("p",{className:"text-sm",children:R(c.poster.citizenID)})]}),Object(o.jsx)("div",{className:"float-right p-2",children:Object(o.jsx)("p",{className:"text-right text-gray-700 font-semibold uppercase text-sm",children:U(c)})})]}),Object(o.jsx)("div",{className:"px-3 py-1",children:Object(o.jsx)("p",{className:"text-lg font-semibold py-2 px-2 border-2 border-gray-400 shadow-sm bg-white",children:c.text})}),Object(o.jsxs)("div",{className:L(void 0!=c.comments?"border-b border-gray-500":"","w-full flow-root pb-2 pt-5 px-2"),children:[Object(o.jsxs)("button",{className:"flex gap-1 float-left hover:bg-gray-200 rounded p-1",onClick:function(e){e.preventDefault(),s.ref("/posts/".concat(c.postID)).get().then((function(e){var c=e.val(),i=void 0!=c.liked?Object(M.a)(Object.values(c.liked)):[],o=void 0!=c.disliked?Object(M.a)(Object.values(c.disliked)):[];i.includes(t.citizenID)?(i.splice(i.indexOf(t.citizenID),1),console.log("liked",i),s.ref("/posts/".concat(c.postID,"/liked")).set(i),B()):(i.push(t.citizenID),o.includes(t.citizenID)&&o.splice(o.indexOf(t.citizenID),1),s.ref("/posts/".concat(c.postID,"/liked")).set(i),s.ref("/posts/".concat(c.postID,"/disliked")).set(o),B(),c.poster.citizenID!=t.citizenID&&s.ref("/citizens/".concat(c.poster.citizenID,"/notifications")).get().then((function(e){var i=void 0!=e.val()?Object.values(e.val()):[];i.push({dateAdded:"".concat(n(),", ").concat(a()),timeAdded:r(),action:"liked",actor:{name:t.name,citizenID:t.citizenID},post:{postID:c.postID,text:c.text},seen:!1,ssre:Math.round((new Date).getTime()/1e3-l)}),s.ref("/citizens/".concat(c.poster.citizenID,"/notifications")).set(i)})))}))},children:[Object(o.jsx)(h.y,{className:"h-6 w-6",fill:L(void 0!=c.liked&&Object.values(c.liked).includes(t.citizenID)?"#facc15":"white")}),Object(o.jsx)("p",{className:"font-semibold",children:void 0!=c.liked?Object.values(c.liked).length:0})]}),Object(o.jsxs)("button",{className:"flex gap-1 float-left hover:bg-gray-200 rounded p-1 mx-1",onClick:function(e){e.preventDefault(),s.ref("posts/".concat(c.postID)).get().then((function(e){var c=e.val(),i=void 0!=c.disliked?Object(M.a)(Object.values(c.disliked)):[],o=void 0!=c.liked?Object(M.a)(Object.values(c.liked)):[];i.includes(t.citizenID)?(i.splice(i.indexOf(t.citizenID),1),s.ref("/posts/".concat(c.postID,"/disliked")).set(i),B()):(i.push(t.citizenID),o.includes(t.citizenID)&&o.splice(o.indexOf(t.citizenID),1),s.ref("/posts/".concat(c.postID,"/disliked")).set(i),s.ref("/posts/".concat(c.postID,"/liked")).set(o),B(),c.poster.citizenID!=t.citizenID&&s.ref("/citizens/".concat(c.poster.citizenID,"/notifications")).get().then((function(e){var i=void 0!=e.val()?Object.values(e.val()):[];i.push({dateAdded:"".concat(n(),", ").concat(a()),timeAdded:r(),action:"disliked",actor:{name:t.name,citizenID:t.citizenID},post:{postID:c.postID,text:c.text},seen:!1,ssre:Math.round((new Date).getTime()/1e3-l)}),s.ref("/citizens/".concat(c.poster.citizenID,"/notifications")).set(i)})))}))},children:[Object(o.jsx)(h.x,{className:"h-6 w-6",fill:L(void 0!=c.disliked&&Object.values(c.disliked).includes(t.citizenID)?"#facc15":"white")}),Object(o.jsx)("p",{className:"font-semibold",children:void 0!=c.disliked?Object.values(c.disliked).length:0})]}),Object(o.jsxs)("a",{href:"/post",className:"p-1 gap-1 float-left rounded flex hover:bg-gray-200",onClick:function(){localStorage.setItem("selectedPost",JSON.stringify(c))},children:[Object(o.jsx)(h.i,{className:"h-6 w-6",fill:"white"}),Object(o.jsx)("p",{className:"font-semibold",children:void 0!=c.comments?Object.values(c.comments).length:0})]}),c.poster.citizenID==t.citizenID&&Object(o.jsx)("button",{className:"font-semibold bg-yellow-300 hover:bg-yellow-400 rounded shadow flex float-right",onClick:function(e){e.preventDefault(),s.ref("/posts/".concat(c.postID)).set(null),B()},children:Object(o.jsxs)("div",{className:"px-2 py-1 flex",children:[Object(o.jsx)(h.B,{className:"h-6 w-6"}),"DELETE"]})})]}),void 0!=c.comments&&Object(o.jsxs)("div",{className:"p-2",children:[Object.values(c.comments).sort((function(e,t){return t.ssre-e.ssre})).slice(0,2).map((function(e){return Object(o.jsxs)("div",{className:"flex gap-3",children:[Object(o.jsx)("div",{className:"font-bold flex-none",children:e.poster.name}),Object(o.jsx)("p",{className:"truncate",children:e.text})]})})),Object.values(c.comments).length>2&&Object(o.jsxs)("div",{className:"text-base font-semibold pt-1",children:[Object.values(c.comments).length-2," more..."]})]})]})})}function W(e){var t=e.transfer;return Object(o.jsxs)("div",{className:"rounded bg-white text-sm shadow",children:[Object(o.jsxs)("div",{className:"w-full",children:[Object(o.jsxs)("p",{className:"pl-2 pt-2 font-semibold text-gray-700",children:[t.date," at ",t.time]}),Object(o.jsxs)("p",{className:"pl-2 pt-2 font-semibold text-gray-700",children:[t.transferID," ",t.ssre]})]}),Object(o.jsxs)("div",{className:"grid grid-cols-4 gap-y-2 lg:gap-3 p-2",children:["Incoming"==t.type?Object(o.jsxs)("div",{className:"col-span-4 lg:col-span-2 grid grid-cols-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Amount"}),Object(o.jsxs)("p",{className:"text-green-700",children:["+",t.amount," [M]"]})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Sender"}),Object(o.jsx)("p",{className:"",children:t.senderName})]})]}):Object(o.jsxs)("div",{className:"col-span-4 lg:col-span-2 grid grid-cols-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Amount"}),Object(o.jsxs)("p",{className:"text-red-700",children:["-",t.amount," [M]"]})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Receiver"}),Object(o.jsx)("p",{className:"",children:t.receiverName})]})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Reason"}),Object(o.jsx)("p",{className:"",children:t.reason})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Resulting Balance"}),Object(o.jsxs)("p",{className:"",children:[t.resultingBalance," [M]"]})]})]})]})}function G(e){var t=e.charge;return Object(o.jsxs)("div",{className:"rounded bg-white shadow text-sm break-words",children:[Object(o.jsxs)("div",{className:"w-full",children:[Object(o.jsxs)("p",{className:"pl-2 pt-2 font-semibold text-gray-700",children:[t.date," at ",t.time]}),Object(o.jsxs)("p",{className:"pl-2 pt-2 font-semibold text-gray-700",children:[t.chargeID," ",t.ssre]})]}),"Guilty"==t.verdict?Object(o.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 p-2 gap-x-4 gap-y-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Prosecutor"}),Object(o.jsx)("p",{className:"",children:t.prosecutor.name}),Object(o.jsx)("p",{className:"",children:R(t.prosecutor.citizenID)})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Defendant"}),Object(o.jsx)("p",{className:"",children:t.defendant.name}),Object(o.jsx)("p",{className:"",children:R(t.defendant.citizenID)})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Crime"}),Object(o.jsx)("p",{className:"",children:t.crime})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Verdict"}),Object(o.jsx)("p",{className:"text-red-700",children:"Guilty"})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Reason for Verdict"}),Object(o.jsx)("p",{className:"",children:t.reasonForVerdict})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Sentence"}),Object(o.jsx)("p",{className:"",children:t.punishment})]})]}):Object(o.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-2 p-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Prosecutor"}),Object(o.jsx)("p",{className:"",children:t.prosecutor.name}),Object(o.jsx)("p",{className:"",children:R(t.prosecutor.citizenID)})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Defendant"}),Object(o.jsx)("p",{className:"",children:t.defendant.name}),Object(o.jsx)("p",{className:"",children:R(t.defendant.citizenID)})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Alleged Crime"}),Object(o.jsx)("p",{className:"",children:t.allegedCrime})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Verdict"}),Object(o.jsx)("p",{className:"text-green-700",children:"Not Guilty"})]}),Object(o.jsxs)("div",{className:"col-span-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Reason for Verdict"}),Object(o.jsx)("p",{className:"",children:t.reasonForVerdict})]})]})]})}function J(e){var t=e.license;return Object(o.jsxs)("div",{className:"border-2 border-gray-500 bg-white shadow p-2 m-2",children:[Object(o.jsxs)("div",{className:"flow-root",children:[Object(o.jsxs)("div",{className:"float-left",children:[Object(o.jsx)("p",{className:"text-lg font-semibold",children:t.title}),Object(o.jsx)("p",{className:"font-semibold text-gray-700",children:t.licenseID})]}),Object(o.jsxs)("p",{className:"float-right font-bold text-xl",children:[t.price," [M]"]})]}),Object(o.jsxs)("div",{className:"flow-root",children:[Object(o.jsx)("p",{className:"pt-2 pr-2 font-semibold float-left",children:t.permissions}),Object(o.jsxs)("div",{className:"flex float-right",children:[Object(o.jsx)(h.j,{className:"w-7 h-7"}),Object(o.jsxs)("p",{className:"float-right font-bold px-1 text-lg",children:["Purchased ",j.licenses[t.licenseID].datePurchased]})]})]})]})}},Z=function(e){var t=e.user,s=e.setUser,n=e.database,a=e.getDate,r=e.getYear,l=e.getTime,d=1522648800,b=Object(c.useState)([]),j=Object(i.a)(b,2),m=j[0],u=j[1];function f(){n.ref("/licenses").get().then((function(e){void 0!=e.val()&&u(Object.values(e.val()))})),n.ref("/citizens/".concat(t.citizenID)).get().then((function(e){console.log("user retrieved",e.val()),void 0!=e.val()&&s(e.val())}))}function x(e){var s=JSON.parse(JSON.stringify(e));if(s.datePurchased="".concat(a(),", ").concat(r()),Number(t.meldas)>=Number(e.price)){n.ref("/citizens/".concat(t.citizenID,"/licenses/").concat(e.licenseID)).set(s),n.ref("/licenses/".concat(e.licenseID,"/owners/").concat(t.citizenID)).set({citizenID:t.citizenID,datePurchased:"".concat(a(),", ").concat(r())});var c=Number(t.meldas)-Number(e.price),i=function(e){for(var t="".concat(e,"-"),s=0;s<5;s++)t+=String(Math.floor(10*Math.random()));return t}("MT");n.ref("/government/meldas").get().then((function(s){var o=Number(s.val()),b=Number(o)+Number(e.price);n.ref("/government/meldas").set(b),n.ref("/citizens/".concat(t.citizenID,"/meldas")).set(Number(c)),n.ref("/citizens/".concat(t.citizenID,"/transfers/").concat(i)).set({transferID:i,date:"".concat(a(),", ").concat(r()),time:l(),ssre:Math.round((new Date).getTime()/1e3-d),amount:Number(e.price),receiverName:"Rushington Government",type:"Outgoing",reason:"Purchased ".concat(e.title," ").concat(e.licenseID),resultingBalance:c}),n.ref("/government/transfers/".concat(i)).set({transferID:i,date:"".concat(a(),", ").concat(r()),time:l(),ssre:Math.round((new Date).getTime()/1e3-d),amount:Number(e.price),senderName:t.name,senderCitizenID:t.citizenID,type:"Incoming",reason:"Purchased ".concat(e.title," ").concat(e.licenseID),resultingBalance:b}),f()}))}}function p(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}return Object(c.useEffect)(f,[]),Object(o.jsxs)("div",{className:"mx-1 lg:mx-10 my-1 lg:my-5",children:[Object(o.jsxs)("div",{className:"py-2 w-full flow-root",children:[Object(o.jsx)("p",{className:"float-left text-4xl font-bold",children:"Licenses"}),Object(o.jsxs)("div",{className:"float-right",children:[Object(o.jsx)("p",{className:"font-semibold text-right text-xl",children:"Current Balance"}),Object(o.jsxs)("p",{className:"text-right text-xl font-bold",children:[t.meldas," [M]"]})]})]}),Object(o.jsx)("div",{className:"px-2 py-1 lg:px-6 lg:py-3 rounded bg-gray-100",children:m.map((function(e){return Object(o.jsx)("div",{className:"lg:py-3 py-1",children:Object(o.jsx)(g,{license:e})})}))})]});function g(e){var s=e.license;return Object(o.jsxs)("div",{className:"border-2 border-gray-500 bg-white shadow p-2",children:[Object(o.jsxs)("div",{className:"flow-root",children:[Object(o.jsxs)("div",{className:"float-left",children:[Object(o.jsx)("p",{className:"text-lg font-semibold",children:s.title}),Object(o.jsx)("p",{className:"font-semibold text-gray-700",children:s.licenseID})]}),Object(o.jsxs)("p",{className:"float-right font-bold text-xl",children:[s.price," [M]"]})]}),Object(o.jsxs)("div",{className:"lg:flow-root",children:[Object(o.jsx)("p",{className:"pt-2 pr-2 font-semibold lg:float-left",children:s.permissions}),void 0!=t.licenses&&Object.keys(t.licenses).includes(s.licenseID)?Object(o.jsxs)("div",{className:"flex lg:float-right",children:[Object(o.jsx)(h.j,{className:"w-7 h-7"}),Object(o.jsxs)("p",{className:"lg:float-right font-bold px-1 text-lg",children:["Purchased ",t.licenses[s.licenseID].datePurchased]})]}):Object(o.jsx)("button",{className:p(Number(t.meldas)<Number(s.price)?"bg-yellow-200 text-gray-400":"bg-yellow-300 hover:bg-yellow-400","font-semibold shadow rounded p-2 lg:float-right w-full mt-2 lg:mt-0 lg:w-52 text-lg"),onClick:function(){x(s)},children:t.meldas<s.price?"CAN'T AFFORD THIS":"BUY"})]})]})}},X=function(e){var t=e.selectedSection,s=e.setSelectedSection,n=e.selectedPost,a=e.setSelectedPost,r=(e.notifications,e.setValues,e.user),l=e.database,d=e.getTime,b=e.getDate,j=e.getYear,m=[{sectionName:"Public Posts",sectionSelected:"Public Posts"==t,icon:h.s},{sectionName:"Government Announcements",sectionSelected:"Government Announcements"==t,icon:h.w},{sectionName:"Criminal Charges",sectionSelected:"Criminal Charges"==t,icon:h.v},{sectionName:"Notifications",sectionSelected:"Notifications"==t,icon:h.d}];Object(c.useEffect)(x,[]);var u=1522648800;function f(e){void 0!=e&&""!=e&&l.ref("/posts/".concat(n.postID,"/comments")).get().then((function(t){var s=function(){for(var e="CO-",t=0;t<5;t++)e+=String(Math.floor(10*Math.random()));return e}(),c={commentID:s,text:e,poster:{name:r.name,citizenID:r.citizenID},datePosted:"".concat(b(),", ").concat(j()),timePosted:d(),ssre:Math.round((new Date).getTime()/1e3-u)};l.ref("/posts/".concat(n.postID,"/comments/").concat(s)).set(c),x(),n.poster.citizenID!=r.citizenID&&l.ref("/citizens/".concat(n.poster.citizenID,"/notifications")).get().then((function(t){var s=void 0!=t.val()?Object.values(t.val()):[];s.push({dateAdded:"".concat(b(),", ").concat(j()),timeAdded:d(),action:"commented",object:"post",commentText:e,actor:{name:r.name,citizenID:r.citizenID},post:{postID:n.postID,text:n.text},seen:!1,ssre:Math.round((new Date).getTime()/1e3-u)}),l.ref("/citizens/".concat(n.poster.citizenID,"/notifications")).set(s)}))}))}function x(){l.ref("/posts/".concat(n.postID)).get().then((function(e){a(e.val()),localStorage.setItem("selectedPost",JSON.stringify(e.val()))}))}function p(){var e=!1;return void 0!=r.notifications&&Object.values(r.notifications).forEach((function(t){t.seen||(e=!0)})),e}function g(e){var t=Math.round((new Date).getTime()/1e3-u)-e.ssre;if(t>2591999)return"".concat(e.datePosted);if(t>307199){var s=O(t/307200,0);return"".concat(s," Rushington ").concat(1!=s?"years":"year"," ago")}if(t>38399){var c=O(t/38400,0);return"".concat(c," Rushington ").concat(1!=c?"months":"month"," ago")}if(t>1199){var n=O(Math.round((new Date).getTime()/1e3-u)/1200,0)-O(e.ssre/1200,0);return"".concat(n," Rushington ").concat(1!=n?"days":"day"," ago")}if(t>59){var a=O(t/60,0);return"".concat(a," ").concat(1!=a?"minutes":"minute"," ago")}return"".concat(t," ").concat(1!=t?"seconds":"second"," ago")}function O(e,t){var s=new RegExp("^-?\\d+(?:.\\d{0,"+(t||-1)+"})?");return e.toString().match(s)[0]}function v(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}function N(e){return r.citizenID!=e?"CI-***".concat(e.substring(6,8)):e}return Object(o.jsx)("div",{children:Object(o.jsxs)("div",{className:"grid grid-cols-4 gap-5",children:[Object(o.jsx)("div",{className:"col-span-4 lg:col-span-1 lg:h-40 lg:sticky lg:top-6",children:m.map((function(e){var t=e.icon;return Object(o.jsx)("div",{className:"flex-auto lg:flex-none",children:Object(o.jsx)("button",{onClick:function(){s(e.sectionName),localStorage.setItem("selectedSection",e.sectionName),"Notifications"==e.sectionName&&l.ref("/citizens/".concat(r.citizenID,"/notifications")).get().then((function(e){if(void 0!=e.val()){var t=Object.values(e.val());t.forEach((function(e){e.seen=!0})),l.ref("/citizens/".concat(r.citizenID,"/notifications")).set(t),r.notifications=t,localStorage.setItem("user",JSON.stringify(r))}})),window.location.href="/"},className:"w-full",children:Object(o.jsx)("div",{className:v(e.sectionSelected?"bg-gray-200":"bg-white hover:bg-gray-100","rounded p-2 w-full text-center lg:text-left"),children:Object(o.jsxs)("div",{className:"flex gap-2 justify-center lg:justify-start",children:[Object(o.jsx)(t,{className:"h-6 w-6",fill:v("Notifications"==e.sectionName&&p()?"#facc15":"white")}),Object(o.jsx)("p",{className:"text-gray-800 font-semibold",children:e.sectionName})]})})})})}))}),Object(o.jsx)("div",{className:"col-span-4 lg:col-span-3 bg-gray-100 rounded",children:Object(o.jsxs)("div",{className:"",children:[Object(o.jsxs)("p",{className:"font-bold py-1 px-2 bg-gray-100 border-b border-gray-400 text-xl",children:[n.poster.name,"'s Post"]}),Object(o.jsx)(y,{})]})})]})});function y(e){Object(w.a)(e);var t=Object(c.useState)(),s=Object(i.a)(t,2),a=s[0],m=s[1];return console.log(n.postID),Object(o.jsxs)("div",{className:"border-b border-l border-r border-gray-400 bg-white shadow",children:[Object(o.jsxs)("div",{className:"flow-root",children:[Object(o.jsxs)("button",{onClick:function(e){e.preventDefault(),l.ref("/citizens/".concat(n.poster.citizenID)).get().then((function(e){localStorage.setItem("selectedCitizen",JSON.stringify(e.val())),window.location.href="/profile"}))},className:"px-1 m-1 text-gray-700 text-left font-semibold float-left hover:bg-gray-100 rounded",children:[Object(o.jsx)("p",{className:"",children:n.poster.citizenID==r.citizenID?"Me":n.poster.name}),Object(o.jsx)("p",{className:"text-sm",children:N(n.poster.citizenID)})]}),Object(o.jsx)("div",{className:"float-right p-2",children:Object(o.jsx)("p",{className:"text-right text-gray-700 font-semibold uppercase text-sm",children:g(n)})})]}),Object(o.jsx)("div",{className:"px-3 py-1",children:Object(o.jsx)("p",{className:"text-lg font-semibold py-2 px-2 border-2 border-gray-400 shadow-sm",children:n.text})}),Object(o.jsxs)("div",{className:"w-full flow-root pb-2 pt-5 px-2 border-b border-gray-500",children:[Object(o.jsxs)("button",{className:"flex gap-1 float-left hover:bg-gray-200 rounded p-1",onClick:function(){l.ref("/posts/".concat(n.postID)).get().then((function(e){var t=e.val(),s=void 0!=t.liked?Object(M.a)(Object.values(t.liked)):[],c=void 0!=t.disliked?Object(M.a)(Object.values(t.disliked)):[];s.includes(r.citizenID)?(s.splice(s.indexOf(r.citizenID),1),console.log("liked",s),l.ref("/posts/".concat(t.postID,"/liked")).set(s),x()):(s.push(r.citizenID),c.includes(r.citizenID)&&c.splice(c.indexOf(r.citizenID),1),l.ref("/posts/".concat(t.postID,"/liked")).set(s),l.ref("/posts/".concat(t.postID,"/disliked")).set(c),x(),t.poster.citizenID!=r.citizenID&&l.ref("/citizens/".concat(t.poster.citizenID,"/notifications")).get().then((function(e){var s=void 0!=e.val()?Object.values(e.val()):[];s.push({dateAdded:"".concat(b(),", ").concat(j()),timeAdded:d(),action:"liked",object:"post",actor:{name:r.name,citizenID:r.citizenID},post:{postID:t.postID,text:t.text},seen:!1,ssre:Math.round((new Date).getTime()/1e3-u)}),l.ref("/citizens/".concat(t.poster.citizenID,"/notifications")).set(s)})))}))},children:[Object(o.jsx)(h.y,{className:"h-6 w-6",fill:v(void 0!=n.liked&&Object.values(n.liked).includes(r.citizenID)?"#facc15":"white")}),Object(o.jsx)("p",{className:"font-semibold",children:void 0!=n.liked?Object.values(n.liked).length:0})]}),Object(o.jsxs)("button",{className:"flex gap-1 float-left hover:bg-gray-200 rounded p-1 mx-1",onClick:function(){l.ref("/posts/".concat(n.postID)).get().then((function(e){var t=e.val(),s=void 0!=t.disliked?Object(M.a)(Object.values(t.disliked)):[],c=void 0!=t.liked?Object(M.a)(Object.values(t.liked)):[];s.includes(r.citizenID)?(s.splice(s.indexOf(r.citizenID),1),l.ref("/posts/".concat(t.postID,"/disliked")).set(s),x()):(s.push(r.citizenID),c.includes(r.citizenID)&&c.splice(c.indexOf(r.citizenID),1),l.ref("/posts/".concat(t.postID,"/disliked")).set(s),l.ref("/posts/".concat(t.postID,"/liked")).set(c),x(),t.poster.citizenID!=r.citizenID&&l.ref("/citizens/".concat(t.poster.citizenID,"/notifications")).get().then((function(e){var s=void 0!=e.val()?Object.values(e.val()):[];s.push({dateAdded:"".concat(b(),", ").concat(j()),timeAdded:d(),action:"disliked",object:"post",actor:{name:r.name,citizenID:r.citizenID},post:{postID:t.postID,text:t.text},seen:!1,ssre:Math.round((new Date).getTime()/1e3-u)}),l.ref("/citizens/".concat(t.poster.citizenID,"/notifications")).set(s)})))}))},children:[Object(o.jsx)(h.x,{className:"h-6 w-6",fill:v(void 0!=n.disliked&&Object.values(n.disliked).includes(r.citizenID)?"#facc15":"white")}),Object(o.jsx)("p",{className:"font-semibold",children:void 0!=n.disliked?Object.values(n.disliked).length:0})]}),Object(o.jsxs)("div",{className:"p-1 gap-1 float-left rounded flex",children:[Object(o.jsx)(h.i,{className:"h-6 w-6"}),Object(o.jsx)("p",{className:"font-semibold",children:void 0!=n.comments?Object.values(n.comments).length:0})]}),n.poster.citizenID==r.citizenID&&Object(o.jsx)("button",{className:"font-semibold bg-yellow-300 hover:bg-yellow-400 rounded shadow flex float-right",onClick:function(){l.ref("/posts/".concat(n.postID)).set(null),x()},children:Object(o.jsxs)("div",{className:"px-2 py-1 flex",children:[Object(o.jsx)(h.B,{className:"h-6 w-6"}),"DELETE"]})})]}),Object(o.jsxs)("div",{className:"p-2 bg-gray-100",children:[Object(o.jsx)("p",{className:"font-semibold text-lg pb-2 text-gray-700",children:"Comments"}),Object(o.jsx)("textarea",{className:"rounded resize-none bg-white focus:outline-none h-16 w-full p-2 bg-gray-100 border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700",placeholder:"Write comment...",value:a,onKeyDown:function(e){"Enter"===e.code&&f(a)},onChange:function(e){e.target.value.includes("\n")||m(e.target.value)}}),Object(o.jsx)("div",{className:"flex justify-center w-full p-1",children:Object(o.jsx)("button",{onClick:function(){f(a)},className:v(""!=a&&void 0!=a?"bg-yellow-300 hover:bg-yellow-400":"bg-yellow-200 text-gray-400","w-64 flex text-md justify-center py-1 font-semibold rounded shadow"),children:Object(o.jsxs)("div",{className:"flex justify-center",children:[Object(o.jsx)(h.u,{className:"w-6 h-6"}),"POST COMMENT"]})})}),void 0!=n.comments?Object(o.jsx)("div",{className:"pt-8",children:Object.values(n.comments).sort((function(e,t){return t.ssre-e.ssre})).map((function(e){return Object(o.jsxs)("div",{className:"p-1 mt-2 bg-white rounded shadow",children:[Object(o.jsxs)("div",{className:"flow-root w-full pb-1",children:[Object(o.jsxs)("button",{onClick:function(t){t.preventDefault(),l.ref("/citizens/".concat(e.poster.citizenID)).get().then((function(e){localStorage.setItem("selectedCitizen",JSON.stringify(e.val())),window.location.href="/profile"}))},className:"text-gray-700 p-1 text-left font-semibold float-left hover:bg-gray-100 rounded",children:[Object(o.jsx)("p",{className:"",children:e.poster.citizenID==r.citizenID?"Me":e.poster.name}),Object(o.jsx)("p",{className:"text-sm",children:N(e.poster.citizenID)})]}),Object(o.jsx)("div",{className:"float-right",children:Object(o.jsx)("div",{className:"float-right px-1",children:Object(o.jsx)("p",{className:"text-right text-gray-700 font-semibold uppercase text-sm",children:g(e)})})})]}),Object(o.jsx)("p",{className:"p-2 mx-2 my-1 bg-white border-2 border-gray-400 shadow-sm font-semibold",children:e.text}),Object(o.jsxs)("div",{className:"flow-root m-0.5 pt-2",children:[Object(o.jsxs)("button",{className:"flex gap-1 float-left hover:bg-gray-200 rounded p-1",onClick:function(){l.ref("/posts/".concat(n.postID,"/comments/").concat(e.commentID)).get().then((function(e){var t=e.val(),s=void 0!=t.liked?Object(M.a)(Object.values(t.liked)):[],c=void 0!=t.disliked?Object(M.a)(Object.values(t.disliked)):[];s.includes(r.citizenID)?(s.splice(s.indexOf(r.citizenID),1),console.log("liked",s),l.ref("/posts/".concat(n.postID,"/comments/").concat(t.commentID,"/liked")).set(s),x()):(s.push(r.citizenID),c.includes(r.citizenID)&&c.splice(c.indexOf(r.citizenID),1),l.ref("/posts/".concat(n.postID,"/comments/").concat(t.commentID,"/liked")).set(s),l.ref("/posts/".concat(n.postID,"/comments/").concat(t.commentID,"/disliked")).set(c),x(),t.poster.citizenID!=r.citizenID&&l.ref("/citizens/".concat(t.poster.citizenID,"/notifications")).get().then((function(e){var s=void 0!=e.val()?Object.values(e.val()):[];s.push({dateAdded:"".concat(b(),", ").concat(j()),timeAdded:d(),action:"liked",object:"comment",actor:{name:r.name,citizenID:r.citizenID},post:{postID:n.postID,text:n.text},comment:{commentID:t.commentID,text:t.text},seen:!1,ssre:Math.round((new Date).getTime()/1e3-u)}),l.ref("/citizens/".concat(t.poster.citizenID,"/notifications")).set(s)})))}))},children:[Object(o.jsx)(h.y,{className:"h-5 w-5",fill:v(void 0!=e.liked&&Object.values(e.liked).includes(r.citizenID)?"#facc15":"white")}),Object(o.jsx)("p",{className:"font-semibold text-sm",children:void 0!=e.liked?Object.values(e.liked).length:0})]}),Object(o.jsxs)("button",{className:"flex gap-1 float-left hover:bg-gray-200 rounded p-1 ml-0.5",onClick:function(){l.ref("/posts/".concat(n.postID,"/comments/").concat(e.commentID)).get().then((function(e){var t=e.val(),s=void 0!=t.disliked?Object(M.a)(Object.values(t.disliked)):[],c=void 0!=t.liked?Object(M.a)(Object.values(t.liked)):[];s.includes(r.citizenID)?(s.splice(s.indexOf(r.citizenID),1),l.ref("/posts/".concat(n.postID,"/comments/").concat(t.commentID,"/disliked")).set(s),x()):(s.push(r.citizenID),c.includes(r.citizenID)&&c.splice(c.indexOf(r.citizenID),1),l.ref("/posts/".concat(n.postID,"/comments/").concat(t.commentID,"/disliked")).set(s),l.ref("/posts/".concat(n.postID,"/comments/").concat(t.commentID,"/liked")).set(c),x(),t.poster.citizenID!=r.citizenID&&l.ref("/citizens/".concat(t.poster.citizenID,"/notifications")).get().then((function(e){var s=void 0!=e.val()?Object.values(e.val()):[];s.push({dateAdded:"".concat(b(),", ").concat(j()),timeAdded:d(),action:"disliked",actor:{name:r.name,citizenID:r.citizenID},object:"comment",post:{postID:n.postID,text:n.text},comment:{commentID:t.commentID,text:t.text},seen:!1,ssre:Math.round((new Date).getTime()/1e3-u)}),l.ref("/citizens/".concat(t.poster.citizenID,"/notifications")).set(s)})))}))},children:[Object(o.jsx)(h.x,{className:"h-5 w-5",fill:v(void 0!=e.disliked&&Object.values(e.disliked).includes(r.citizenID)?"#facc15":"white")}),Object(o.jsx)("p",{className:"font-semibold text-sm",children:void 0!=e.disliked?Object.values(e.disliked).length:0})]}),e.poster.citizenID==r.citizenID&&Object(o.jsxs)("button",{className:"float-right text-sm rounded shadow bg-yellow-300 hover:bg-yellow-400 font-semibold flex px-2 py-1",onClick:function(){l.ref("/posts/".concat(n.postID,"/comments/").concat(e.commentID)).set(null),x()},children:[Object(o.jsx)(h.B,{className:"h-5 w-5"}),"DELETE"]})]})]})}))}):Object(o.jsx)("p",{className:"w-full text-center font-semibold text-gray-700 py-8",children:"NO COMMENTS"})]})]})}},Q=s.p+"static/media/RushingtonMap.fcfe45e2.png",$=function(e){return Object(w.a)(e),Object(o.jsxs)("div",{className:"p-5",children:[Object(o.jsx)("p",{className:"font-bold text-3xl text-center pb-7",children:"Map of Rushington"}),Object(o.jsx)("img",{src:Q,className:"rounded"})]})},_=function(e){var t=e.database,s=Object(c.useState)([]),n=Object(i.a)(s,2),a=n[0],r=n[1],l=Object(c.useState)([]),d=Object(i.a)(l,2),b=d[0],j=d[1];function m(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}return Object(c.useEffect)((function(){t.ref("/properties").get().then((function(e){r(Object.values(e.val()).sort((function(e,t){return e.address.localeCompare(t.address)}))),j(Object.values(e.val()).sort((function(e,t){return e.address.localeCompare(t.address)})))}))}),[]),Object(o.jsxs)("div",{className:"mx-1 lg:mx-10 my-1 lg:my-5",children:[Object(o.jsx)("div",{className:"py-2 w-full",children:Object(o.jsx)("p",{className:"text-4xl font-bold",children:"Properties"})}),Object(o.jsxs)("div",{className:"px-2 py-1 lg:px-6 lg:py-3 rounded bg-gray-100",children:[Object(o.jsx)("input",{className:"w-full border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2 mt-3 mb-6",placeholder:"Search",onChange:function(e){j(a.filter((function(t){return t.address.toUpperCase().includes(e.target.value.toUpperCase())})))}}),b.map((function(e){return Object(o.jsx)("div",{className:"lg:py-3 py-1",children:Object(o.jsx)(u,{property:e})})}))]})]});function u(e){var t=e.property;return Object(o.jsx)("div",{className:m(""),children:Object(o.jsxs)("div",{className:"w-full bg-white border-2 shadow border-gray-500 grid grid-cols-3",children:[Object(o.jsx)("div",{className:"col-span-3 p-2 flow-root",children:Object(o.jsxs)("div",{className:"float-left",children:[Object(o.jsx)("p",{className:m("text-xl","font-bold"),children:t.address}),Object(o.jsx)("p",{className:m("text-sm","uppercase font-semibold"),children:t.type})]})}),Object(o.jsxs)("div",{className:"col-span-1 p-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Property ID"}),Object(o.jsx)("p",{children:t.propertyID})]}),Object(o.jsxs)("div",{className:"col-span-1 p-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Date Property Added"}),Object(o.jsx)("p",{children:t.dateAdded})]}),Object(o.jsxs)("div",{className:"col-span-1 p-2",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Owner"}),Object(o.jsx)("p",{children:void 0!=t.owner?t.owner.name:"Available"})]}),"Business"==t.type&&Object(o.jsxs)("div",{className:"col-span-3 p-2",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{className:"font-semibold",children:"Business Name"}),Object(o.jsx)("p",{children:void 0!=t.business?t.business.name:"None yet"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{className:"font-semibold pt-3",children:"Business Description"}),Object(o.jsx)("p",{children:void 0!=t.business?t.business.description:"None yet"})]})]})]})})}},ee=function(e){var t=e.database,s=e.user,n=Object(c.useState)([]),a=Object(i.a)(n,2),r=a[0],l=a[1],d=Object(c.useState)([]),b=Object(i.a)(d,2),j=b[0],m=b[1];function u(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}return Object(c.useEffect)((function(){t.ref("/citizens").get().then((function(e){void 0!=e.val()&&(l(Object.values(e.val())),m(Object.values(e.val()).sort((function(e,t){return e.name.localeCompare(t.name)}))))}))}),[]),Object(o.jsxs)("div",{className:"mx-1 lg:mx-10 my-1 lg:my-5",children:[Object(o.jsx)("div",{className:"py-2 w-full",children:Object(o.jsx)("p",{className:"text-4xl font-bold",children:"Citizens"})}),Object(o.jsxs)("div",{className:"px-2 py-1 lg:px-6 lg:py-3 rounded bg-gray-100",children:[Object(o.jsx)("input",{className:"rounded w-full border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2 mt-3 mb-6",placeholder:"Search",onChange:function(e){m(r.filter((function(t){return t.name.toUpperCase().includes(e.target.value.toUpperCase())})).sort((function(e,t){return e.name.localeCompare(t.name)})))}}),j.map((function(e){return Object(o.jsx)("div",{className:"lg:py-3 py-1",children:Object(o.jsx)(h,{citizen:e})})}))]})]});function h(e){var c,n=e.citizen;return Object(o.jsx)("button",{className:u("w-full"),onClick:function(e){e.preventDefault(),t.ref("/citizens/".concat(n.citizenID)).get().then((function(e){localStorage.setItem("selectedCitizen",JSON.stringify(e.val())),window.location.href="/profile"}))},children:Object(o.jsx)("div",{className:"w-full bg-white border-2 shadow border-gray-500",children:Object(o.jsxs)("div",{className:"p-2 flow-root w-full",children:[Object(o.jsx)("p",{className:"float-left text-xl font-bold",children:n.name}),Object(o.jsx)("p",{className:"float-right text-xl",children:(c=n.citizenID,s.citizenID!=c?"CI-***".concat(c.substring(6,8)):c)})]})})})}},te=s(112),se=function(e){var t=e.user,s=e.database,n=e.setUser;Object(c.useEffect)(w,[]);var a=Object(c.useState)(""),r=Object(i.a)(a,2),l=r[0],d=r[1],b=Object(c.useState)(t.settings.requirePassword),j=Object(i.a)(b,2),m=j[0],u=j[1],f=Object(c.useState)(!1),x=Object(i.a)(f,2),p=x[0],g=x[1],O=Object(c.useState)(!1),v=Object(i.a)(O,2),N=v[0],y=v[1];function w(){s.ref("/citizens/".concat(t.citizenID)).get().then((function(e){n(e.val()),u(e.val().settings.requirePassword),localStorage.setItem("user",JSON.stringify(e.val()))}))}return Object(o.jsxs)("div",{className:"mx-1 lg:mx-10 my-1 lg:my-5",children:[Object(o.jsx)("div",{className:"py-2",children:Object(o.jsx)("p",{className:"text-4xl text-black font-bold",children:"Settings"})}),Object(o.jsxs)("div",{className:"my-4 p-2 border-2 border-gray-500 shadow",children:[Object(o.jsxs)("div",{className:"flow-root bg-gray-100 border border-gray-500 rounded shadow p-2",children:[Object(o.jsx)("div",{className:"float-left w-2/3",children:Object(o.jsx)("p",{className:"text-xl font-bold pt-1",children:"Censor my Citizen ID"})}),Object(o.jsx)("div",{className:"float-right",children:Object(o.jsx)(te.a,{checked:t.settings.censorCitizenID,onChange:function(){s.ref("/citizens/".concat(t.citizenID,"/settings/censorCitizenID")).set(!t.settings.censorCitizenID),w()},color:"primary"})})]}),Object(o.jsx)("div",{className:"pt-2",children:Object(o.jsx)("p",{className:"p-1 font-semibold text-lg",children:"To be able to screenshot, show my screen to others, etc. without them seeing my full Citizen ID"})})]}),Object(o.jsxs)("div",{className:"my-4 p-2 border-2 border-gray-500 shadow",children:[Object(o.jsxs)("div",{className:"bg-gray-100 border border-gray-500 rounded shadow p-2",children:[Object(o.jsxs)("div",{className:"flow-root",children:[Object(o.jsx)("div",{className:"float-left w-2/3",children:Object(o.jsx)("p",{className:"text-xl font-bold pt-1",children:"Require password to sign in"})}),Object(o.jsx)("div",{className:"float-right",children:Object(o.jsx)(te.a,{checked:m,onChange:function(){1==m&&(s.ref("/citizens/".concat(t.citizenID,"/settings/requirePassword")).set(!1),g(!1),d(""),y(!1)),m||(void 0!=t.password?s.ref("/citizens/".concat(t.citizenID,"/settings/requirePassword")).set(!0):g(!0)),u(!m)},color:"primary"})})]}),m&&p&&Object(o.jsx)("div",{className:"flex justify-center my-2",children:Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)("input",{className:"border-2 border-gray-500 focus:outline-none focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1",value:l,type:N?"":"password",placeholder:"Set password...",onChange:function(e){d(e.target.value),g(!0)}}),void 0!=l&&""!=l&&Object(o.jsxs)("div",{className:"flow-root w-full",children:[Object(o.jsxs)("button",{className:"float-left py-1 px-2 mt-2 font-semibold bg-yellow-300 hover:bg-yellow-400 shadow rounded flex",onClick:function(){y(!N)},children:[N?Object(o.jsx)(h.o,{className:"h-6 w-6"}):Object(o.jsx)(h.n,{className:"h-6 w-6"}),N?"HIDE":"SHOW"]}),Object(o.jsxs)("button",{className:"float-right py-1 px-2 mt-2 font-semibold bg-yellow-300 hover:bg-yellow-400 shadow rounded flex",onClick:function(){s.ref("/citizens/".concat(t.citizenID,"/settings/requirePassword")).set(!0),window.crypto.subtle.digest("SHA-256",function(e){for(var t=new ArrayBuffer(2*e.length),s=new Uint16Array(t),c=0,n=e.length;c<n;c++)s[c]=e.charCodeAt(c);return t}(l)).then((function(e){console.log(e);var c=Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("");console.log(c),s.ref("/citizens/".concat(t.citizenID,"/password")).set(c),g(!1),d(""),y(!1),w()}))},children:[Object(o.jsx)(h.j,{className:"h-6 w-6"}),"SAVE"]})]}),Object(o.jsxs)("button",{className:"mt-2 w-full rounded bg-yellow-300 hover:bg-yellow-400 shadow px-2 py-1 font-semibold flex justify-center",onClick:function(){g(!1),d(""),void 0==t.password&&u(!1),y(!1)},children:[Object(o.jsx)(h.B,{className:"h-6 w-6"}),"CANCEL"]})]})}),m&&!p&&Object(o.jsx)("div",{className:"flex justify-center my-2",children:Object(o.jsxs)("button",{className:"rounded bg-yellow-300 hover:bg-yellow-400 shadow px-2 py-1 font-semibold text-lg flex justify-center",onClick:function(){g(!0)},children:[Object(o.jsx)(h.t,{className:"h-7 w-7"}),"CHANGE PASSWORD"]})})]}),Object(o.jsx)("div",{className:"pt-2",children:Object(o.jsx)("p",{className:"p-1 font-semibold text-lg",children:"If my Citizen ID is leaked, someone will still need a password to sign in"})})]})]})},ce=function(e){var t=e.setAddNewBusinessPopupOpen,s=e.user,n=e.database,a=e.updateBusinesses,r=e.getTime,l=e.getDate,d=e.getYear,b=Object(c.useState)(""),j=Object(i.a)(b,2),m=j[0],u=j[1],f=Object(c.useState)(""),x=Object(i.a)(f,2),p=x[0],g=x[1];return Object(o.jsxs)("div",{className:"w-full justify-center ",children:[Object(o.jsx)("div",{className:"pb-4",children:Object(o.jsxs)("div",{className:"p-5 bg-blue-200 rounded shadow",children:[Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"NAME"}),Object(o.jsx)("input",{className:"rounded p-1 w-full border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 focus:outline-none",onChange:function(e){u(e.target.value)}})]}),Object(o.jsxs)("div",{className:"pt-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"DESCRIPTION"}),Object(o.jsx)("textarea",{className:"rounded p-1 w-full border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 resize-none focus:outline-none",onChange:function(e){g(e.target.value)}})]})]})}),Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)("button",{className:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}(m&&p?"text-black bg-yellow-300 hover:bg-yellow-400":"text-gray-400 bg-yellow-100","rounded py-1 px-2 font-semibold flex shadow"),onClick:function(){if(m&&p){var e=function(){for(var e="BU-",t=0;t<5;t++)e+=String(Math.floor(10*Math.random()));return e}();n.ref("/businesses/".concat(e)).set({businessID:e,name:m,description:p,founder:{citizenID:s.citizenID,name:s.name},owners:{0:{citizenID:s.citizenID,name:s.name}},timeAdded:r(),dateAdded:l(),yearAdded:d(),meldas:0}),a(),t(!1)}},children:[Object(o.jsx)(h.u,{className:"w-6 h-6"}),"ADD"]})})]})},ne=function(e){var t=e.database,s=e.user,n=(e.setUser,e.getTime),a=e.getDate,r=e.getYear,l=Object(c.useState)([]),d=Object(i.a)(l,2),b=d[0],j=d[1],m=Object(c.useState)([]),u=Object(i.a)(m,2),f=u[0],x=u[1],p=Object(c.useState)([]),g=Object(i.a)(p,2),O=g[0],v=g[1],N=Object(c.useState)("All"),y=Object(i.a)(N,2),w=y[0],D=y[1],I=Object(c.useState)(!1),S=Object(i.a)(I,2),C=S[0],k=S[1],T=void 0!=s.licenses&&function(){var e=!1;return Object.values(s.licenses).forEach((function(t){"LI-67981"==t.licenseID&&(e=!0)})),e};function A(){t.ref("/businesses").get().then((function(e){e.val()&&(j(Object.values(e.val())),v(Object.values(e.val()).sort((function(e,t){return e.name.localeCompare(t.name)}))),x(Object.values(e.val()).filter((function(e){return function(e){var t=!1;return Object.values(e.owners).forEach((function(e){e.citizenID==s.citizenID&&(t=!0)})),t}(e)}))))}))}function E(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}return Object(c.useEffect)(A,[]),Object(o.jsxs)("div",{className:"mx-1 lg:mx-10 my-1 lg:my-5",children:[Object(o.jsx)("div",{className:"py-2 w-full",children:Object(o.jsx)("p",{className:"text-4xl font-bold border-b border-gray-500 pb-4",children:"Businesses"})}),Object(o.jsxs)("div",{className:"pt-4 border-b border-gray-500",children:[Object(o.jsx)("button",{className:E("All"==w?"border-b-4 border-yellow-300 font-bold hover:bg-gray-100 rounded-t":"text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded","w-1/3 py-1 px-1"),onClick:function(){D("All")},children:"ALL BUSINESSES"}),Object(o.jsx)("button",{className:E("Purchases"==w?"border-b-4 border-yellow-300 font-bold hover:bg-gray-100 rounded-t":"text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded","w-1/3 py-1 px-1"),onClick:function(){D("Purchases")},children:"MY PURCHASES"}),Object(o.jsx)("button",{className:E("My"==w?"border-b-4 border-yellow-300 font-bold hover:bg-gray-100 rounded-t":"text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded","w-1/3 py-1 px-1"),onClick:function(){D("My")},children:"MY BUSINESSES"})]}),Object(o.jsxs)("div",{className:"px-2 py-1 lg:px-6 lg:py-3 rounded-b bg-gray-200",children:["All"==w&&Object(o.jsxs)("div",{children:[Object(o.jsx)("input",{className:"rounded w-full border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2 mt-3 mb-6",placeholder:"Search businesses...",onChange:function(e){v(b.filter((function(t){return t.name.toUpperCase().includes(e.target.value.toUpperCase())})).sort((function(e,t){return e.name.localeCompare(t.name)})))}}),O.map((function(e){return Object(o.jsx)("div",{className:"lg:py-3 py-1",children:Object(o.jsx)(P,{business:e})})}))]}),"Purchases"==w&&Object(o.jsxs)("div",{children:[void 0!=s.businessPurchases&&Object(o.jsx)("div",{children:Object.values(s.businessPurchases).sort((function(e,t){return t.ssre-e.ssre})).map((function(e){return Object(o.jsx)("div",{className:"py-2",children:Object(o.jsx)(M,{purchase:e})})}))}),void 0==s.businessPurchases&&Object(o.jsx)("p",{className:"text-gray-700 font-semibold text-center py-2",children:"NO PURCHASES YET"})]}),"My"==w&&T&&Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"flex justify-center py-3 lg:py-0",children:Object(o.jsxs)("button",{className:"bg-yellow-300 hover:bg-yellow-400 font-semibold py-1 px-2 flex rounded shadow justify-center",onClick:function(){k(!0)},children:[Object(o.jsx)(h.u,{className:"w-6 h-6"}),"ADD NEW BUSINESS",Object(o.jsx)(z,{open:C,setOpen:k,header:"New Business",additionalComponent:function(){return Object(o.jsx)(ce,{setAddNewBusinessPopupOpen:k,updateBusinesses:A,getTime:n,getDate:a,getYear:r,user:s,database:t})}})]})}),0==f.length?Object(o.jsx)("p",{className:"text-center text-gray-700 font-semibold pt-4",children:"NONE YET"}):Object(o.jsx)("div",{className:"",children:f.map((function(e){return Object(o.jsx)("div",{className:"lg:py-3 py-1",children:Object(o.jsx)(P,{business:e})})}))})]}),"My"==w&&!T&&Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{className:"text-center text-gray-700 font-semibold pt-4",children:"YOU DON'T HAVE A BUSINESS AND ORGANIZATION LICENSE"}),Object(o.jsx)("div",{className:"flex justify-center py-2",children:Object(o.jsxs)("a",{href:"/licenses",className:"bg-yellow-300 py-1 px-2 flex hover:bg-yellow-400 font-semibold rounded shadow",children:[Object(o.jsx)(h.l,{className:"w-6 h-6"}),"GO TO LICENSES"]})})]})]})]});function M(e){var t=e.purchase;return Object(o.jsxs)("div",{className:"rounded bg-white border border-gray-400 shadow",children:[Object(o.jsxs)("div",{className:"bg-gray-100 border-b border-gray-400 rounded-t p-2 lg:grid-cols-none lg:flow-root grid grid-cols-2 gap-2",children:[Object(o.jsxs)("div",{className:"lg:float-left",children:[Object(o.jsx)("p",{className:"text-gray-700 text-sm",children:"Buy"==t.type?"BOUGHT":"ORDERED"}),Object(o.jsxs)("p",{className:"text-lg text-gray-700 font-semibold",children:[t.datePurchased,", ",t.yearPurchased]})]}),Object(o.jsxs)("div",{className:"lg:float-left lg:pl-4",children:[Object(o.jsx)("p",{className:"text-gray-700 text-sm",children:"TOTAL"}),Object(o.jsxs)("p",{className:"text-lg text-gray-700 font-semibold",children:[t.total," [M]"]})]}),Object(o.jsxs)("div",{className:"lg:float-left lg:pl-4",children:[Object(o.jsx)("p",{className:"text-gray-700 text-sm",children:"BUSINESS"}),Object(o.jsx)("p",{className:"text-lg text-gray-700 font-semibold",children:t.business.name})]}),Object(o.jsxs)("div",{className:"lg:float-right",children:[Object(o.jsx)("p",{className:"text-gray-700 text-sm",children:"PURCHASE ID"}),Object(o.jsx)("p",{className:"text-lg text-gray-700 font-semibold lg:text-right",children:t.purchaseID})]})]}),Object(o.jsxs)("div",{className:"p-2",children:[Object(o.jsxs)("p",{className:"text-2xl font-semibold",children:[t.product.name," (",t.quantity,")"]}),Object(o.jsxs)("p",{className:"text-blue-900 text-lg uppercase font-semibold",children:["Buy"==t.type?t.product.buyingPrice:t.product.orderingPrice," [M] each"]})]}),"Order"==t.type&&Object(o.jsx)("div",{className:"p-2 border-t border-gray-400",children:t.delivered?Object(o.jsxs)("p",{className:"text-green-700 font-semibold text-lg",children:["Delivered ",t.dateDelivered,", ",t.yearDelivered," at ",t.timeDelivered]}):Object(o.jsx)("p",{className:"font-semibold text-red-700 text-lg",children:"Not delivered"})})]})}function P(e){var s=e.business;return Object(o.jsx)("button",{className:E("w-full"),onClick:function(e){e.preventDefault(),t.ref("/businesses/".concat(s.businessID)).get().then((function(e){localStorage.setItem("selectedBusiness",JSON.stringify(e.val())),window.location.href="/business"}))},children:Object(o.jsx)("div",{className:"w-full bg-white border-2 shadow border-gray-500",children:Object(o.jsxs)("div",{className:"p-2 flow-root w-full",children:[Object(o.jsx)("p",{className:"float-left text-xl font-bold",children:s.name}),Object(o.jsx)("p",{className:"float-right text-xl",children:s.founder.name})]})})})}},ae=s(35),re=function(e){var t=e.database,s=e.user,n=e.setUser,a=e.business,r=e.updateBusiness,l=(e.setMeldas,e.meldas,e.getTime),d=e.getDate,b=e.getYear,j=(e.setTransfers,e.setNewBusinessTransferPopupOpen),m=Object(c.useState)([]),u=Object(i.a)(m,2),f=u[0],x=u[1],p=Object(c.useState)([]),g=Object(i.a)(p,2),O=g[0],v=g[1],N=Object(c.useState)(),y=Object(i.a)(N,2),w=y[0],D=y[1],I=Object(c.useState)(0),z=Object(i.a)(I,2),C=z[0],k=z[1],T=Object(c.useState)(""),A=Object(i.a)(T,2),E=A[0],M=A[1],P=Object(c.useState)(0),R=Object(i.a)(P,2),B=R[0],U=R[1],F=1522648800;function L(){for(var e="MT-",t=0;t<5;t++)e+=String(Math.floor(10*Math.random()));return e}function Y(){return void 0!=w&&0!=String(C).length&&!String(C).startsWith("-")&&Number(a.meldas)-Number(C)>=0&&0!=C}return Object(c.useEffect)((function(){t.ref("/citizens").get().then((function(e){x(Object.values(e.val())),v(Object.values(e.val())),console.log(e.val()[s.citizenID]),t.ref("/government/salesTaxRate").get().then((function(e){U(e.val())})),JSON.stringify(s)!=JSON.stringify(e.val()[s.citizenID])&&n(e.val()[s.citizenID])}))}),[]),Object(o.jsxs)("div",{className:"w-full justify-center ",children:[Object(o.jsx)("div",{className:"pb-4",children:Object(o.jsxs)("div",{className:"p-5 bg-blue-200 rounded shadow",children:[Object(o.jsxs)("div",{className:"",children:[Object(o.jsxs)("div",{className:"w-full pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"TO"}),Object(o.jsx)(S,{filteredCitizens:O,setFilteredCitizens:v,citizens:f,selectedCitizen:w,setSelectedCitizen:D,className:"pb-2",user:s,type:"All"})]}),Object(o.jsxs)("div",{className:"w-full pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"AMOUNT"}),Object(o.jsxs)("div",{className:"flex w-full justify-center",children:[Object(o.jsx)("input",{type:"Number",placeholder:"",min:0,max:a.meldas,defaultValue:C,onChange:function(e){k(Number(e.target.value))},className:"rounded appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1"}),Object(o.jsx)("p",{className:"font-semibold pl-1 text-xl",children:"[M]"})]})]})]}),Object(o.jsxs)("div",{className:"pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"REASON"}),Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)("textarea",{placeholder:"",onChange:function(e){M(e.target.value)},className:"rounded w-full bg-white h-20 flex justify-center resize-none focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-2"})})]}),Y()&&Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"RESULTING BALANCE"}),Object(o.jsxs)("p",{className:"p-1 font-semibold shadow bg-white ",children:[Number(a.meldas)-Number(C)," ","[M]"]})]}),Object(o.jsxs)("div",{className:"pb-2",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"AMOUNT TAXED"}),Object(o.jsxs)("p",{className:"p-1 font-semibold shadow bg-white ",children:[Math.round(Number(C)*Number(B))," [M]"]})]})]})]})}),Object(o.jsx)("button",{className:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}(Y()?"text-black bg-yellow-300 hover:bg-yellow-400":"text-gray-400 bg-yellow-100","w-1/3 rounded py-1 px-2 font-semibold shadow"),onClick:function(){var e=0,s=0;Y()&&t.ref("/citizens/".concat(w.citizenID,"/meldas")).get().then((function(c){var n=Math.round(Number(C)*B);e=Number(c.val())+Number(C)-n,t.ref("/citizens/".concat(w.citizenID,"/meldas")).set(e),t.ref("/businesses/".concat(a.businessID,"/meldas")).get().then((function(c){s=Number(c.val())-Number(C),t.ref("/businesses/".concat(a.businessID,"/meldas")).set(s),a.meldas=s;var i=L();if(t.ref("/businesses/".concat(a.businessID,"/transfers/").concat(i)).set({transferID:i,date:"".concat(d(),", ").concat(b()),time:l(),ssre:Math.round((new Date).getTime()/1e3-F),amount:C,receiverID:w.citizenID,receiverName:w.name,type:"Outgoing",reason:0!=E.length?E:"None given",resultingBalance:s}),t.ref("/citizens/".concat(w.citizenID,"/transfers/").concat(i)).set({transferID:i,date:"".concat(d(),", ").concat(b()),time:l(),ssre:Math.round((new Date).getTime()/1e3-F),amount:C-n,senderID:a.businessID,senderName:a.name,type:"Incoming",reason:0!=E.length?E:"None given",resultingBalance:e}),n>0){var o=L();t.ref("/government").get().then((function(e){var s=e.val().meldas+n;t.ref("/government/meldas").set(s),t.ref("/government/transfers/".concat(o)).set({transferID:o,date:"".concat(d(),", ").concat(b()),time:l(),ssre:Math.round((new Date).getTime()/1e3-F),amount:n,senderID:a.businessID,senderName:a.name,type:"Incoming",reason:"".concat(100*B,"% tax of ").concat(i),resultingBalance:s})}))}t.ref("/businesses/".concat(a.businessID,"/transfers")).get().then((function(e){console.log("Transfers",e.val()),a.transfers=Object.values(e.val()).sort((function(e,t){return t.ssre-e.ssre})),r(),localStorage.setItem("selectedBusiness",JSON.stringify(a)),j(!1)}))}))}))},children:Object(o.jsxs)("div",{className:"flex justify-center",children:[Object(o.jsx)(h.c,{className:"h-6 w-6"}),"SEND"]})})]})},ie=n.a.memo(re),le=function(e){var t=e.database,s=e.user,n=e.setUser,a=e.getTime,r=e.getDate,l=e.getYear,d=Object(c.useState)(JSON.parse(localStorage.getItem("selectedBusiness"))),b=Object(i.a)(d,2),j=b[0],m=b[1],u=Object(c.useState)("Items"),f=Object(i.a)(u,2),x=f[0],p=f[1],g=Object(c.useState)(!1),O=Object(i.a)(g,2),v=O[0],N=O[1],y=Object(c.useState)(!1),D=Object(i.a)(y,2),I=D[0],C=D[1],k=Object(c.useState)(),T=Object(i.a)(k,2),A=T[0],E=T[1],M=Object(c.useState)([]),P=Object(i.a)(M,2),R=P[0],B=P[1],U=Object(c.useState)(""),F=Object(i.a)(U,2),L=F[0],Y=F[1],W=Object(c.useState)([]),G=Object(i.a)(W,2),J=G[0],V=G[1],H=Object(c.useState)([]),q=Object(i.a)(H,2),K=(q[0],q[1],Object(c.useState)([])),Z=Object(i.a)(K,2),X=(Z[0],Z[1],Object(c.useState)()),Q=Object(i.a)(X,2),$=Q[0],_=Q[1],ee=Object(c.useState)(!1),se=Object(i.a)(ee,2),ce=se[0],ne=se[1],re=Object(c.useState)(JSON.parse(localStorage.getItem("selectedBusiness")).name),le=Object(i.a)(re,2),oe=le[0],de=le[1],be=Object(c.useState)(JSON.parse(localStorage.getItem("selectedBusiness")).description),je=Object(i.a)(be,2),me=je[0],ue=je[1],he=Object(c.useState)(0),fe=Object(i.a)(he,2),xe=fe[0],pe=fe[1],ge=1522648800;Object(c.useEffect)((function(){t.ref("/citizens").get().then((function(e){var s=Object.values(e.val()).filter((function(e){var t=!0;return Object.values(j.owners).forEach((function(s){s.citizenID==e.citizenID&&(t=!1)})),t}));B(s),V(s),t.ref("/government/salesTaxRate").get().then((function(e){pe(e.val())}))}))}),[]);var Oe=j.founder.citizenID==s.citizenID?[{sectionName:"Items",sectionSelected:"Items"==x,icon:h.k},{sectionName:"Bank Account",sectionSelected:"Bank Account"==x,icon:h.p},{sectionName:"Orders",sectionSelected:"Orders"==x,icon:h.z},{sectionName:"Manage",sectionSelected:"Manage"==x,icon:h.f}]:[{sectionName:"Items",sectionSelected:"Items"==x,icon:h.k},{sectionName:"Bank Account",sectionSelected:"Bank Account"==x,icon:h.p},{sectionName:"Orders",sectionSelected:"Orders"==x,icon:h.z}],ve=function(){var e=!1;return Object.values(j.owners).forEach((function(t){t.citizenID==s.citizenID&&(e=!0)})),e}();function Ne(){t.ref("/businesses/".concat(j.businessID)).get().then((function(e){m(e.val()),localStorage.setItem("selectedBusiness",JSON.stringify(e.val()))}))}function ye(e){return e.startsWith("CI-")&&s.citizenID!=e?"CI-***".concat(e.substring(6,8)):e}function we(e){for(var t="".concat(e,"-"),s=0;s<5;s++)t+=String(Math.floor(10*Math.random()));return t}function De(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}return console.log("userIsOwner",ve),Object(c.useEffect)(Ne,[]),Object(o.jsxs)("div",{children:[ve&&Object(o.jsxs)("div",{className:"grid grid-cols-5 gap-5",children:[Object(o.jsx)("div",{className:"col-span-5 lg:col-span-1 lg:h-40 lg:sticky lg:top-6",children:Oe.map((function(e){var t=e.icon;return Object(o.jsx)("div",{className:"flex-auto lg:flex-none",children:Object(o.jsx)("button",{onClick:function(){p(e.sectionName)},className:De(e.sectionSelected?"bg-gray-200":"bg-white hover:bg-gray-100","rounded p-2 w-full text-center lg:text-left"),children:Object(o.jsxs)("div",{className:"flex gap-2 justify-center lg:justify-start",children:[Object(o.jsx)(t,{className:"h-6 w-6",fill:"white"}),Object(o.jsx)("p",{className:"text-gray-800 font-semibold",children:e.sectionName})]})})})}))}),Object(o.jsxs)("div",{className:"col-span-5 lg:col-span-4 bg-gray-100 rounded",children:["Items"==x&&Object(o.jsxs)("div",{children:[Object(o.jsx)(z,{header:"Edit Product",additionalComponent:function(){return Object(o.jsx)(Ce,{})},open:I,setOpen:C}),Object(o.jsxs)("div",{className:"gap-y-2 border-b border-gray-500",children:[Object(o.jsxs)("a",{className:"rounded bg-yellow-300 w-56 py-1 px-2 m-2 font-semibold hover:bg-yellow-400 flex justify-center shadow",href:"/businesses",children:[Object(o.jsx)(h.b,{className:"h-6 w-6"}),"BACK TO BUSINESSES"]}),Object(o.jsx)("div",{className:"gap-y-2 py-2",children:Object(o.jsxs)("div",{className:"bg-white border-2 border-gray-700 p-2 m-2 shadow",children:[Object(o.jsx)("p",{className:"text-center text-3xl font-bold",children:j.name}),Object(o.jsx)("p",{className:"text-center text-lg",children:j.description})]})})]}),Object(o.jsxs)("div",{className:"flow-root px-2",children:[Object(o.jsx)("div",{className:"float-left py-2",children:Object(o.jsxs)("button",{className:"bg-yellow-300 hover:bg-yellow-400 font-semibold rounded shadow flex py-1 px-2",onClick:function(){N(!0)},children:[Object(o.jsx)(z,{header:"New Product",additionalComponent:function(){return Object(o.jsx)(Se,{})},open:v,setOpen:N}),Object(o.jsx)(h.u,{className:"w-6 h-6"}),"ADD ITEM"]})}),Object(o.jsxs)("div",{className:"float-right",children:[Object(o.jsx)("p",{className:"font-bold text-center",children:"Personal Balance"}),Object(o.jsxs)("p",{className:"text-center border-2 border-gray-500 font-semibold bg-white",children:[s.meldas," [M]"]})]}),Object(o.jsx)("input",{className:"rounded w-full border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2 mt-8 mb-3",placeholder:"Search products...",onChange:function(e){Y(e.target.value)}})]}),Object(o.jsxs)("div",{className:"",children:[void 0!=j.products&&Object(o.jsx)("div",{className:"lg:grid lg:grid-cols-4 gap-2 m-2",children:Object.values(j.products).sort((function(e,t){return e.name.localeCompare(t.name)})).filter((function(e){return""==L||e.name.toUpperCase().includes(L.toUpperCase())})).map((function(e){return Object(o.jsx)("div",{className:"pt-2",children:Object(o.jsx)(Ie,{product:e})})}))}),void 0==j.products&&Object(o.jsx)("p",{className:"font-semibold text-center text-gray-700 pt-3 pb-6",children:"NO PRODUCTS YET"})]})]}),"Bank Account"==x&&Object(o.jsxs)("div",{className:"mx-1 lg:mx-2 my-1 lg:my-2",children:[Object(o.jsxs)("div",{className:"flow-root p-2",children:[Object(o.jsx)("div",{className:"float-left",children:Object(o.jsx)("p",{className:"text-3xl text-black font-bold",children:"Bank"})}),Object(o.jsx)("div",{className:"float-right",children:Object(o.jsxs)("button",{className:"rounded bg-yellow-300 p-2 font-semibold hover:bg-yellow-400 flex shadow",onClick:function(){ne(!0)},children:[Object(o.jsx)(h.u,{className:"w-6 h-6"}),Object(o.jsx)("p",{className:"pl-1",children:"NEW TRANSFER"}),Object(o.jsx)(z,{open:ce,setOpen:ne,header:"New Transfer",onClickSave:function(){},inputs:[],saveText:"Send",additionalComponent:function(){return Object(o.jsx)(ie,{database:t,user:s,business:j,updateBusiness:Ne,setUser:n,getTime:a,getDate:r,getYear:l,setNewBusinessTransferPopupOpen:ne})}})]})})]}),Object(o.jsxs)("div",{className:"p-2 group bg-gray-100 rounded",children:[Object(o.jsxs)("div",{className:"lg:flow-root w-full  p-1 shadow bg-white border-4 border-gray-500 text-bottom",children:[Object(o.jsx)("div",{className:"lg:float-left text-bottom bg-white",children:Object(o.jsx)("p",{className:"text-2xl font-semibold pl-1 text-gray-700",children:"Current Balance"})}),Object(o.jsxs)("div",{className:"flex justify-center text-2xl font-bold lg:float-right px-1 border-2 border-gray-500 bg-white",children:[Object(o.jsx)("p",{className:"pr-1",children:j.meldas}),Object(o.jsx)("p",{children:"[M]"})]})]}),Object(o.jsxs)("div",{className:"w-full border-gray-500 border-b-4 border-r-4 border-l-4 bg-white",children:[Object(o.jsx)("p",{className:"font-semibold text-gray-700 px-2 pt-2 text-2xl",children:"Transaction History"}),void 0!=j.transfers&&0!=Object.values(j.transfers).length?Object(o.jsx)("div",{className:"lg:p-2 p-1 bg-gray-200",children:Object.values(j.transfers).sort((function(e,t){return t.ssre-e.ssre})).map((function(e){return Object(o.jsx)("div",{className:"p-1",children:Object(o.jsx)(ze,{transfer:e})})}))}):Object(o.jsx)("div",{className:"p-2 bg-gray-100",children:Object(o.jsx)("p",{className:"font-semibold text-2xl",children:"Nothing yet"})})]})]})]}),"Orders"==x&&Object(o.jsxs)("div",{className:"m-4",children:[Object(o.jsx)("div",{className:"",children:Object(o.jsx)("p",{className:"text-3xl text-black font-bold",children:"Orders"})}),void 0!=j.orders?Object(o.jsx)("div",{children:Object.values(j.orders).sort((function(e,t){return t.ssre-e.ssre})).map((function(e){return Object(o.jsx)("div",{className:"py-2",children:Object(o.jsx)(ke,{order:e})})}))}):Object(o.jsx)("p",{className:"text-center text-gray-700 py-4 font-semibold",children:"NONE YET"})]}),"Manage"==x&&Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"p-4",children:Object(o.jsx)("p",{className:"text-3xl text-black font-bold",children:"Manage"})}),Object(o.jsxs)("div",{className:"py-4 rounded bg-white mx-4 my-2 shadow",children:[Object(o.jsx)("p",{className:"font-bold text-sm text-center",children:"ADD OWNER"}),Object(o.jsx)(S,{citizens:R,filteredCitizens:J,setFilteredCitizens:V,user:s,selectedCitizen:$,setSelectedCitizen:_}),Object(o.jsx)("div",{className:"flex justify-center pt-2",children:Object(o.jsxs)("button",{className:De(void 0!=$?"bg-yellow-300 hover:bg-yellow-400":"bg-yellow-200 text-gray-400","font-semibold rounded shadow px-2 py-1 flex"),onClick:function(){var e=Object.values(j.owners);e.push({citizenID:$.citizenID,name:$.name}),t.ref("/businesses/".concat(j.businessID,"/owners")).set(e),Ne()},children:[Object(o.jsx)(h.u,{className:"h-6 w-6"}),"ADD"]})})]}),Object(o.jsx)("div",{className:"p-4",children:Object.values(j.owners).map((function(e){return Object(o.jsx)("div",{className:"py-2",children:Object(o.jsxs)("div",{className:"bg-white border-2 border-gray-700 shadow p-2",children:[Object(o.jsxs)("div",{className:"flow-root",children:[Object(o.jsx)("p",{className:"float-left font-bold text-lg",children:e.name}),Object(o.jsx)("p",{className:"float-right text-lg",children:ye(e.citizenID)})]}),e.citizenID!=s.citizenID&&Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)("button",{className:"bg-yellow-300 hover:bg-yellow-400 rounded shadow px-2 py-1 flex font-semibold",onClick:function(){var s=Object.values(j.owners);s.splice(s.indexOf(e),1),t.ref("/businesses/".concat(j.businessID,"/owners")).set(s),Ne()},children:[Object(o.jsx)(h.B,{className:"w-6 h-6"}),"REMOVE OWNER"]})})]})})}))}),Object(o.jsxs)("div",{className:"py-4 border-t border-gray-500",children:[Object(o.jsx)("div",{className:"p-4",children:Object(o.jsx)("input",{className:"w-full rounded border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2",defaultValue:j.name,placeholder:"Business name",onChange:function(e){de(e.target.value)}})}),Object(o.jsx)("div",{className:"p-4",children:Object(o.jsx)("textarea",{className:"w-full resize-none rounded border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2",defaultValue:j.description,placeholder:"Business description",onChange:function(e){ue(e.target.value)}})}),(oe!=j.name||me!=j.description)&&oe&&me&&Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)("button",{className:"bg-yellow-300 hover:bg-yellow-400 rounded shadow px-2 py-1 flex font-semibold",onClick:function(){t.ref("/businesses/".concat(j.businessID,"/name")).set(oe),t.ref("/businesses/".concat(j.businessID,"/description")).set(me),Ne()},children:[Object(o.jsx)(h.j,{className:"h-6 w-6"}),"UPDATE NAME AND DESCRIPTION"]})})]}),Object(o.jsx)("div",{className:"flex justify-center py-4 border-t border-gray-500",children:Object(o.jsxs)("button",{className:"bg-yellow-300 hover:bg-yellow-400 rounded shadow px-2 py-1 flex font-semibold",onClick:function(){t.ref("/businesses/".concat(j.businessID)).set(null),window.location.href="/businesses"},children:[Object(o.jsx)(h.B,{className:"w-6 h-6"}),"DELETE BUSINESS"]})})]})]})]}),!ve&&Object(o.jsxs)("div",{className:"bg-gray-100 rounded p-2",children:[Object(o.jsxs)("a",{className:"rounded bg-yellow-300 w-56 py-1 px-2 font-semibold hover:bg-yellow-400 flex justify-center shadow",href:"/businesses",children:[Object(o.jsx)(h.b,{className:"h-6 w-6"}),"BACK TO BUSINESSES"]}),Object(o.jsx)("div",{className:"gap-y-2 py-6 border-b border-gray-500",children:Object(o.jsxs)("div",{className:"bg-white border-2 border-gray-700 py-2 shadow",children:[Object(o.jsx)("p",{className:"text-center text-3xl font-bold",children:j.name}),Object(o.jsx)("p",{className:"text-center text-lg",children:j.description})]})}),Object(o.jsxs)("div",{className:"flow-root px-2",children:[Object(o.jsxs)("div",{className:"float-right",children:[Object(o.jsx)("p",{className:"font-bold text-center",children:"Personal Balance"}),Object(o.jsxs)("p",{className:"text-center border-2 border-gray-500 font-semibold bg-white",children:[s.meldas," [M]"]})]}),Object(o.jsx)("input",{className:"rounded w-full border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 p-2 mt-8 mb-3",placeholder:"Search products...",onChange:function(e){Y(e.target.value)}})]}),Object(o.jsxs)("div",{className:"",children:[void 0!=j.products&&Object(o.jsx)("div",{className:"lg:grid lg:grid-cols-4 gap-2 lg:m-2 m-1",children:Object.values(j.products).sort((function(e,t){return e.name.localeCompare(t.name)})).filter((function(e){return""==L||e.name.toUpperCase().includes(L.toUpperCase())})).map((function(e){return Object(o.jsx)("div",{className:"pt-2",children:Object(o.jsx)(Ie,{product:e})})}))}),void 0==j.products&&Object(o.jsx)("p",{className:"font-semibold text-center text-gray-700 pt-3 pb-6",children:"NO PRODUCTS YET"})]})]})]});function Ie(e){var d=e.product,b=Object(c.useState)(1),m=Object(i.a)(b,2),u=m[0],f=m[1];return Object(o.jsxs)("div",{className:"bg-white shadow rounded place-content-end",children:[Object(o.jsx)("p",{className:"text-center font-bold p-2 text-xl",children:d.name}),Object(o.jsx)("p",{className:"text-sm font-bold text-center text-gray-700",children:"NUMBER"}),Object(o.jsx)("div",{className:"px-4 pb-2",children:Object(o.jsx)("input",{type:"Number",defaultValue:1,min:1,onChange:function(e){e.target.value>0&&f(e.target.value)},className:"border-2 border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-700 focus:border-gray-700 w-full p-1"})}),Object(o.jsxs)("div",{className:"flex",children:[d.buyable&&Object(o.jsx)("div",{className:De(d.orderable?"pr-1":"pr-2","pl-2 py-2 flex-1"),children:Object(o.jsxs)("button",{className:De(d.buyingPrice*u<=s.meldas?"bg-yellow-300 hover:bg-yellow-400":"bg-yellow-200 text-gray-400","w-full shadow rounded font-semibold py-1 px-2"),onClick:function(){var e=0,c=0;if(d.buyingPrice*u<=s.meldas){var i=Number(u*d.buyingPrice);t.ref("/businesses/".concat(j.businessID,"/meldas")).get().then((function(o){var b=Math.round(Number(i)*xe);e=Number(o.val())+i-b,t.ref("/businesses/".concat(j.businessID,"/meldas")).set(e),t.ref("/citizens/".concat(s.citizenID,"/meldas")).get().then((function(o){c=Number(o.val())-i,t.ref("/citizens/".concat(s.citizenID,"/meldas")).set(c),s.meldas=c;var m=we("MT");t.ref("/citizens/".concat(s.citizenID,"/transfers/").concat(m)).set(Object(ae.a)({transferID:m,date:"".concat(r(),", ").concat(l()),time:a(),ssre:Math.round((new Date).getTime()/1e3-ge),amount:i,receiverID:j.businessID,receiverName:j.name,type:"Outgoing",reason:"Bought ".concat(u," of '").concat(d.name,"'"),resultingBalance:c},"ssre",Math.round((new Date).getTime()/1e3-ge))),t.ref("/businesses/".concat(j.businessID,"/transfers/").concat(m)).set(Object(ae.a)({transferID:m,date:"".concat(r(),", ").concat(l()),time:a(),ssre:Math.round((new Date).getTime()/1e3-ge),amount:i-b,senderID:s.citizenID,senderName:s.name,type:"Incoming",reason:"Bought ".concat(u," of '").concat(d.name,"'"),resultingBalance:e},"ssre",Math.round((new Date).getTime()/1e3-ge)));var h=we("PU");if(t.ref("/citizens/".concat(s.citizenID,"/businessPurchases/").concat(h)).set({purchaseID:h,type:"Buy",product:{name:d.name,productID:d.productID,buyingPrice:d.buyingPrice},business:{businessID:j.businessID,name:j.name,description:j.description},quantity:u,total:i,timePurchased:a(),datePurchased:r(),yearPurchased:l(),ssre:Math.round((new Date).getTime()/1e3-ge)}),b>0){var f=we("MT");t.ref("/government").get().then((function(e){var c=e.val().meldas+b;t.ref("/government/meldas").set(c),t.ref("/government/transfers/".concat(f)).set({transferID:f,date:"".concat(r(),", ").concat(l()),time:a(),ssre:Math.round((new Date).getTime()/1e3-ge),amount:b,senderID:s.citizenID,senderName:s.name,type:"Incoming",reason:"".concat(100*xe,"% tax of ").concat(m),resultingBalance:c})}))}n(s),localStorage.setItem("user",JSON.stringify(s)),Ne()}))}))}},children:[Object(o.jsx)("div",{className:"flex justify-center",children:"BUY"}),Object(o.jsxs)("p",{children:[u*d.buyingPrice," [M]"]})]})}),d.orderable&&Object(o.jsx)("div",{className:De(d.orderable?"pl-1":"pl-2","pr-2 py-2 flex-1"),children:Object(o.jsxs)("button",{className:De(d.orderingPrice*u<=s.meldas?"bg-yellow-300 hover:bg-yellow-400":"bg-yellow-200 text-gray-400","w-full shadow rounded font-semibold py-1 px-2"),onClick:function(){var e=0,c=0;if(d.orderingPrice*u<=s.meldas){var i=Number(u*d.orderingPrice);t.ref("/businesses/".concat(j.businessID,"/meldas")).get().then((function(o){var b=Math.round(Number(i)*xe);e=Number(o.val())+i-b,t.ref("/businesses/".concat(j.businessID,"/meldas")).set(e),t.ref("/citizens/".concat(s.citizenID,"/meldas")).get().then((function(o){c=Number(o.val())-i,t.ref("/citizens/".concat(s.citizenID,"/meldas")).set(c),s.meldas=c;var m=we("MT");t.ref("/citizens/".concat(s.citizenID,"/transfers/").concat(m)).set(Object(ae.a)({transferID:m,date:"".concat(r(),", ").concat(l()),time:a(),ssre:Math.round((new Date).getTime()/1e3-ge),amount:i,receiverID:j.businessID,receiverName:j.name,type:"Outgoing",reason:"Ordered ".concat(u," of '").concat(d.name,"'"),resultingBalance:c},"ssre",Math.round((new Date).getTime()/1e3-ge))),t.ref("/businesses/".concat(j.businessID,"/transfers/").concat(m)).set(Object(ae.a)({transferID:m,date:"".concat(r(),", ").concat(l()),time:a(),ssre:Math.round((new Date).getTime()/1e3-ge),amount:i-b,senderID:s.citizenID,senderName:s.name,type:"Incoming",reason:"Ordered ".concat(u," of '").concat(d.name,"'"),resultingBalance:e},"ssre",Math.round((new Date).getTime()/1e3-ge)));var h=we("PU");if(t.ref("/citizens/".concat(s.citizenID,"/businessPurchases/").concat(h)).set({purchaseID:h,type:"Order",delivered:!1,product:{name:d.name,productID:d.productID,orderingPrice:d.orderingPrice},business:{businessID:j.businessID,name:j.name,description:j.description},quantity:u,total:i,timePurchased:a(),datePurchased:r(),yearPurchased:l(),ssre:Math.round((new Date).getTime()/1e3-ge)}),t.ref("/businesses/".concat(j.businessID,"/orders/").concat(h)).set({purchaseID:h,delivered:!1,product:{name:d.name,productID:d.productID,orderingPrice:d.orderingPrice},business:{businessID:j.businessID,name:j.name,description:j.description},customer:{citizenID:s.citizenID,name:s.name},quantity:u,total:i-b,timePurchased:a(),datePurchased:r(),yearPurchased:l(),ssre:Math.round((new Date).getTime()/1e3-ge)}),b>0){var f=we("MT");t.ref("/government").get().then((function(e){var c=e.val().meldas+b;t.ref("/government/meldas").set(c),t.ref("/government/transfers/".concat(f)).set({transferID:f,date:"".concat(r(),", ").concat(l()),time:a(),ssre:Math.round((new Date).getTime()/1e3-ge),amount:b,senderID:s.citizenID,senderName:s.name,type:"Incoming",reason:"".concat(100*xe,"% tax of ").concat(m),resultingBalance:c})}))}n(s),localStorage.setItem("user",JSON.stringify(s)),Ne()}))}))}},children:[Object(o.jsx)("div",{className:"flex justify-center",children:"ORDER"}),Object(o.jsxs)("p",{children:[u*d.orderingPrice," [M]"]})]})})]}),ve&&Object(o.jsxs)("div",{className:"grid grid-cols-2 p-2 gap-2",children:[Object(o.jsx)("button",{className:"shadow rounded font-semibold py-1 px-2 bg-yellow-300 hover:bg-yellow-400",children:Object(o.jsxs)("div",{className:"flex justify-center",onClick:function(){E(d),C(!0)},children:[Object(o.jsx)(h.t,{className:"w-6 h-6"}),"EDIT"]})}),Object(o.jsx)("button",{className:"shadow rounded font-semibold py-1 px-2 bg-yellow-300 hover:bg-yellow-400",children:Object(o.jsxs)("div",{className:"flex justify-center",onClick:function(){t.ref("/businesses/".concat(j.businessID,"/products/").concat(d.productID)).set(null),Ne()},children:[Object(o.jsx)(h.B,{className:"w-6 h-6"}),"DELETE"]})})]})]})}function ze(e){var t=e.transfer;return Object(o.jsxs)("div",{className:"rounded bg-white shadow",children:[Object(o.jsxs)("div",{className:"w-full lg:flow-root",children:[Object(o.jsxs)("p",{className:"lg:float-left pl-2 pt-2 font-semibold text-gray-700",children:[t.date," at ",t.time]}),Object(o.jsxs)("p",{className:"lg:float-right lg:pl-0 pl-2 pr-2 pt-2 font-semibold text-gray-700",children:[t.transferID," ",t.ssre]})]}),Object(o.jsxs)("div",{className:"grid grid-cols-4 lg:gap-3 gap-y-3 p-2",children:["Incoming"==t.type?Object(o.jsxs)("div",{className:"col-span-4 lg:col-span-2 grid grid-cols-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Amount"}),Object(o.jsxs)("p",{className:"text-green-700",children:["+",t.amount," [M]"]})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Sender"}),Object(o.jsx)("p",{className:"",children:t.senderName}),Object(o.jsx)("p",{className:"",children:"Rushington Government"!=t.senderName&&"Rushington Bank"!=t.senderName?ye(t.senderID):""})]})]}):Object(o.jsxs)("div",{className:"col-span-4 lg:col-span-2 grid grid-cols-2",children:[Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Amount"}),Object(o.jsxs)("p",{className:"text-red-700",children:["-",t.amount," [M]"]})]}),Object(o.jsxs)("div",{className:"col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Receiver"}),Object(o.jsx)("p",{className:"",children:t.receiverName}),Object(o.jsx)("p",{className:"",children:"Rushington Government"!=t.receiverName&&"Rushington Bank"!=t.receiverName?ye(t.receiverID):""})]})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Reason"}),Object(o.jsx)("p",{className:"",children:t.reason})]}),Object(o.jsxs)("div",{className:"col-span-2 lg:col-span-1",children:[Object(o.jsx)("p",{className:"font-semibold",children:"Resulting Balance"}),Object(o.jsxs)("p",{className:"",children:[t.resultingBalance," [M]"]})]})]})]})}function Se(e){Object(w.a)(e);var s=Object(c.useState)(null),n=Object(i.a)(s,2),a=n[0],r=n[1],l=Object(c.useState)(null),d=Object(i.a)(l,2),b=d[0],m=d[1],u=Object(c.useState)(""),f=Object(i.a)(u,2),x=f[0],p=f[1],g=Object(c.useState)(!0),O=Object(i.a)(g,2),v=O[0],y=O[1],D=Object(c.useState)(!1),I=Object(i.a)(D,2),z=I[0],S=I[1];return Object(o.jsxs)("div",{className:"w-full justify-center ",children:[Object(o.jsx)("div",{className:"pb-4",children:Object(o.jsxs)("div",{className:"p-5 bg-blue-200 rounded shadow",children:[Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"PRODUCT NAME"}),Object(o.jsx)("input",{className:"rounded p-1 w-full border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 focus:outline-none",onChange:function(e){p(e.target.value)}})]}),Object(o.jsxs)("div",{className:"bg-white shadow rounded",children:[Object(o.jsxs)("div",{className:"mt-4 flow-root",children:[Object(o.jsx)("p",{className:"float-left pt-2 font-bold pl-2",children:"Buyable"}),Object(o.jsx)(te.a,{className:"float-right",checked:v,onChange:function(){v&&r(null),y(!v)},color:"primary"})]}),Object(o.jsx)("p",{className:"text-center text-gray-700 text-sm font-semibold w-full p-2",children:"With this option selected, people will click buy when they take it from your store, and money will just be transferred"}),v&&Object(o.jsxs)("div",{className:"px-4 pb-4 pt-1",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"BUYING PRICE"}),Object(o.jsxs)("div",{className:"flex w-full justify-center",children:[Object(o.jsx)("input",{type:"Number",placeholder:"",min:0,onChange:function(e){r(e.target.value)},className:"rounded appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1"}),Object(o.jsx)("p",{className:"font-semibold pl-1 text-xl",children:"[M]"})]})]})]}),Object(o.jsxs)("div",{className:"bg-white shadow rounded",children:[Object(o.jsxs)("div",{className:"mt-4 flow-root",children:[Object(o.jsx)("p",{className:"float-left pt-2 font-bold pl-2",children:"Orderable"}),Object(o.jsx)(te.a,{className:"float-right",checked:z,onChange:function(){z&&m(null),S(!z)},color:"primary"})]}),Object(o.jsx)("p",{className:"text-center text-gray-700 text-sm font-semibold w-full p-2",children:"With this option selected, people will click order, money will be transferred, and the order will be added to an order queue that your business is expected to fulfill"}),z&&Object(o.jsxs)("div",{className:"px-4 pb-4 pt-1",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"ORDERING PRICE"}),Object(o.jsxs)("div",{className:"flex w-full justify-center",children:[Object(o.jsx)("input",{type:"Number",placeholder:"",min:0,onChange:function(e){m(e.target.value)},className:"rounded appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1"}),Object(o.jsx)("p",{className:"font-semibold pl-1 text-xl",children:"[M]"})]})]})]})]})}),Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)("button",{className:De(x&&(!v||a>0)&&(!z||b>0)&&(z||v)?"text-black bg-yellow-300 hover:bg-yellow-400":"text-gray-400 bg-yellow-100","rounded py-1 px-2 font-semibold flex shadow"),onClick:function(){if(x&&(!v||a>0)&&(!z||b>0)&&(z||v)){var e=function(){for(var e="PR-",t=0;t<5;t++)e+=String(Math.floor(10*Math.random()));return e}();t.ref("/businesses/".concat(j.businessID,"/products/").concat(e)).set({productID:e,name:x,buyingPrice:a,orderingPrice:b,buyable:v,orderable:z}),Ne(),N(!1)}},children:[Object(o.jsx)(h.u,{className:"w-6 h-6"}),"ADD"]})})]})}function Ce(e){Object(w.a)(e);var s=Object(c.useState)(A.buyingPrice?A.buyingPrice:null),n=Object(i.a)(s,2),a=n[0],r=n[1],l=Object(c.useState)(A.orderingPrice?A.orderingPrice:null),d=Object(i.a)(l,2),b=d[0],m=d[1],u=Object(c.useState)(A.name),f=Object(i.a)(u,2),x=f[0],p=f[1],g=Object(c.useState)(!!A.buyable||null),O=Object(i.a)(g,2),v=O[0],N=O[1],y=Object(c.useState)(!!A.orderable||null),D=Object(i.a)(y,2),I=D[0],z=D[1];return Object(o.jsxs)("div",{className:"w-full justify-center ",children:[Object(o.jsx)("div",{className:"pb-4",children:Object(o.jsxs)("div",{className:"p-5 bg-blue-200 rounded shadow",children:[Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"PRODUCT NAME"}),Object(o.jsx)("input",{className:"p-1 w-full border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 focus:outline-none",value:x,onChange:function(e){p(e.target.value)}})]}),Object(o.jsxs)("div",{className:"bg-white shadow rounded",children:[Object(o.jsxs)("div",{className:"mt-4 flow-root",children:[Object(o.jsx)("p",{className:"float-left pt-2 font-bold pl-2",children:"Buyable"}),Object(o.jsx)(te.a,{className:"float-right",checked:v,onChange:function(){v&&r(null),N(!v)},color:"primary"})]}),Object(o.jsx)("p",{className:"text-center text-gray-700 text-sm font-semibold w-full p-2",children:"With this option selected, people will click buy when they take it from your store, and money will just be transferred"}),v&&Object(o.jsxs)("div",{className:"px-4 pb-4 pt-1",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"BUYING PRICE"}),Object(o.jsxs)("div",{className:"flex w-full justify-center",children:[Object(o.jsx)("input",{type:"Number",placeholder:"",defaultValue:a,min:0,onChange:function(e){r(e.target.value)},className:"appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1"}),Object(o.jsx)("p",{className:"font-semibold pl-1 text-xl",children:"[M]"})]})]})]}),Object(o.jsxs)("div",{className:"bg-white shadow rounded",children:[Object(o.jsxs)("div",{className:"mt-4 flow-root",children:[Object(o.jsx)("p",{className:"float-left pt-2 font-bold pl-2",children:"Orderable"}),Object(o.jsx)(te.a,{className:"float-right",checked:I,onChange:function(){I&&m(null),z(!I)},color:"primary"})]}),Object(o.jsx)("p",{className:"text-center text-gray-700 text-sm font-semibold w-full p-2",children:"With this option selected, people will click order, money will be transferred, and the order will be added to an order queue that your business is expected to fulfill"}),I&&Object(o.jsxs)("div",{className:"px-4 pb-4 pt-1",children:[Object(o.jsx)("p",{className:"text-sm font-bold",children:"ORDERING PRICE"}),Object(o.jsxs)("div",{className:"flex w-full justify-center",children:[Object(o.jsx)("input",{type:"Number",placeholder:"",defaultValue:b,min:0,onChange:function(e){m(e.target.value)},className:"appearance-textfield flex justify-center w-full focus:outline-none border-2 border-gray-500 focus:border-gray-700 focus:ring-1 focus:ring-gray-700 p-1"}),Object(o.jsx)("p",{className:"font-semibold pl-1 text-xl",children:"[M]"})]})]})]})]})}),Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)("button",{className:De(x&&(!v||a>0)&&(!I||b>0)&&(I||v)?"text-black bg-yellow-300 hover:bg-yellow-400":"text-gray-400 bg-yellow-100","rounded py-1 px-2 font-semibold flex shadow"),onClick:function(){x&&(!v||a>0)&&(!I||b>0)&&(I||v)&&(t.ref("/businesses/".concat(j.businessID,"/products/").concat(A.productID)).set({productID:A.productID,name:x,buyingPrice:a,orderingPrice:b,buyable:v,orderable:I}),Ne(),C(!1))},children:[Object(o.jsx)(h.j,{className:"w-6 h-6"}),"SAVE"]})})]})}function ke(e){var c=e.order;return Object(o.jsxs)("div",{className:"rounded bg-white border border-gray-400 shadow",children:[Object(o.jsxs)("div",{className:"bg-gray-100 border-b border-gray-400 rounded-t p-2 lg:grid-cols-none lg:flow-root grid grid-cols-2 gap-2",children:[Object(o.jsxs)("div",{className:"lg:float-left",children:[Object(o.jsx)("p",{className:"text-gray-700 text-sm",children:"ORDERED"}),Object(o.jsxs)("p",{className:"text-lg text-gray-700 font-semibold",children:[c.datePurchased,", ",c.yearPurchased]})]}),Object(o.jsxs)("div",{className:"lg:float-left lg:pl-4",children:[Object(o.jsx)("p",{className:"text-gray-700 text-sm",children:"TOTAL"}),Object(o.jsxs)("p",{className:"text-lg text-gray-700 font-semibold",children:[c.total," [M]"]})]}),Object(o.jsxs)("div",{className:"lg:float-left lg:pl-4",children:[Object(o.jsx)("p",{className:"text-gray-700 text-sm",children:"CUSTOMER"}),Object(o.jsx)("p",{className:"text-lg text-gray-700 font-semibold",children:c.customer.name})]}),Object(o.jsxs)("div",{className:"lg:float-right",children:[Object(o.jsx)("p",{className:"text-gray-700 text-sm",children:"PURCHASE ID"}),Object(o.jsx)("p",{className:"text-lg text-gray-700 font-semibold lg:text-right",children:c.purchaseID})]})]}),Object(o.jsxs)("div",{className:"p-2",children:[Object(o.jsxs)("p",{className:"text-2xl font-semibold",children:[c.product.name," (",c.quantity,")"]}),Object(o.jsxs)("p",{className:"text-blue-900 text-lg uppercase font-semibold",children:[c.product.orderingPrice," [M] each"]})]}),Object(o.jsx)("div",{className:"p-2 border-t border-gray-400",children:c.delivered?Object(o.jsxs)("p",{className:"text-green-700 font-semibold text-lg",children:["Delivered ",c.dateDelivered,", ",c.yearDelivered," at ",c.timeDelivered]}):Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{className:"font-semibold text-red-700 text-lg",children:"Not delivered"}),Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsxs)("button",{className:"shadow flex rounded font-semibold py-1 px-2 bg-yellow-300 hover:bg-yellow-400",onClick:function(){var e="/businesses/".concat(j.businessID,"/orders/").concat(c.purchaseID);t.ref("".concat(e,"/delivered")).set(!0),t.ref("".concat(e,"/timeDelivered")).set(a()),t.ref("".concat(e,"/dateDelivered")).set(r()),t.ref("".concat(e,"/yearDelivered")).set(l()),Ne();var i="/citizens/".concat(c.customer.citizenID,"/businessPurchases/").concat(c.purchaseID);t.ref("".concat(i,"/delivered")).set(!0),t.ref("".concat(i,"/timeDelivered")).set(a()),t.ref("".concat(i,"/dateDelivered")).set(r()),t.ref("".concat(i,"/yearDelivered")).set(l()),c.customer.citizenID==s.citizenID&&t.ref("/citizens/".concat(c.customer.citizenID)).get().then((function(e){n(e.val()),localStorage.setItem("user",JSON.stringify(e.val()))}))},children:[Object(o.jsx)(h.j,{className:"h-6 w-6"}),"SET AS DELIVERED"]})})]})})]})}},oe=function(e){var t=e.isAdmin,s=e.currentDate,n=e.currentYear,a=e.user,r=e.setUser,l=e.citizenID,d=e.database,b=e.getTime,j=e.getDate,m=e.getYear,u=Object(c.useState)(void 0!=localStorage.getItem("selectedSection")?localStorage.getItem("selectedSection"):"Public Posts"),h=Object(i.a)(u,2),f=h[0],x=h[1],p=Object(c.useState)(void 0!=localStorage.getItem("selectedPost")?JSON.parse(localStorage.getItem("selectedPost")):void 0),g=Object(i.a)(p,2),O=g[0],w=g[1];return Object(o.jsx)("div",{className:"h-full",children:Object(o.jsx)(N.a,{children:Object(o.jsxs)(y.c,{children:[Object(o.jsx)(y.a,{exact:!0,path:"/",render:function(e){return Object(o.jsx)(q,Object(v.a)(Object(v.a)({},e),{},{database:d,getDate:j,getYear:m,getTime:b,user:a,selectedSection:f,setSelectedSection:x,selectedPost:O,setSelectedPost:w}))}}),Object(o.jsx)(y.a,{path:"/bank",render:function(e){return Object(o.jsx)(T,Object(v.a)(Object(v.a)({},e),{},{user:a,citizenID:l,database:d,getDate:j,getYear:m,getTime:b}))}}),Object(o.jsx)(y.a,{path:"/resources",render:function(e){return Object(o.jsx)(D,Object(v.a)({},e))}}),Object(o.jsx)(y.a,{path:"/calendar",render:function(e){return Object(o.jsx)(A,Object(v.a)(Object(v.a)({},e),{},{currentDate:s,currentYear:n}))}}),Object(o.jsx)(y.a,{path:"/constitution",render:function(e){return Object(o.jsx)(E,Object(v.a)({},e))}}),t&&Object(o.jsx)(y.a,{path:"/government",render:function(e){return Object(o.jsx)(V,Object(v.a)(Object(v.a)({},e),{},{database:d,getDate:j,getYear:m,getTime:b,user:a,setUser:r}))}}),Object(o.jsx)(y.a,{path:"/profile",render:function(e){return Object(o.jsx)(K,Object(v.a)(Object(v.a)({},e),{},{user:a,database:d,getDate:j,getYear:m,getTime:b}))}}),Object(o.jsx)(y.a,{path:"/licenses",render:function(e){return Object(o.jsx)(Z,Object(v.a)(Object(v.a)({},e),{},{user:a,database:d,getDate:j,getYear:m,getTime:b,setUser:r}))}}),Object(o.jsx)(y.a,{path:"/post",render:function(e){return Object(o.jsx)(X,Object(v.a)(Object(v.a)({},e),{},{user:a,database:d,getTime:b,getDate:j,getYear:m,selectedSection:f,setSelectedSection:x,selectedPost:O,setSelectedPost:w}))}}),Object(o.jsx)(y.a,{path:"/map",render:function(e){return Object(o.jsx)($,Object(v.a)({},e))}}),Object(o.jsx)(y.a,{path:"/properties",render:function(e){return Object(o.jsx)(_,Object(v.a)(Object(v.a)({},e),{},{database:d}))}}),Object(o.jsx)(y.a,{path:"/citizens",render:function(e){return Object(o.jsx)(ee,Object(v.a)(Object(v.a)({},e),{},{database:d,user:a}))}}),Object(o.jsx)(y.a,{path:"/settings",render:function(e){return Object(o.jsx)(se,Object(v.a)(Object(v.a)({},e),{},{database:d,user:a,setUser:r}))}}),Object(o.jsx)(y.a,{path:"/businesses",render:function(e){return Object(o.jsx)(ne,Object(v.a)(Object(v.a)({},e),{},{database:d,user:a,setUser:r,getTime:b,getDate:j,getYear:m}))}}),Object(o.jsx)(y.a,{path:"/business",render:function(e){return Object(o.jsx)(le,Object(v.a)(Object(v.a)({},e),{},{database:d,user:a,setUser:r,getTime:b,getDate:j,getYear:m}))}})]})})})},de=n.a.memo(oe),be=function(e){var t=e.isAdmin,s=e.currentDate,c=e.currentYear,n=e.user,a=e.database,r=e.getTime,i=e.getDate,l=e.getYear,d=e.setUser;return Object(o.jsx)("main",{className:"-mt-24 lg:pb-8 bg-blue-200",children:Object(o.jsxs)("div",{className:"max-w-3xl mx-auto px-2 sm:px-6 lg:max-w-7xl lg:px-8",children:[Object(o.jsx)("h1",{className:"sr-only",children:"Page title"}),Object(o.jsx)("div",{className:"grid grid-cols-1 gap-4 items-start lg:grid-cols-3 lg:gap-8",children:Object(o.jsx)(N.a,{children:Object(o.jsx)(y.c,{children:Object(o.jsx)(y.a,{exact:!0,path:["/bank","/constitution","/calendar","/resources","/","/profile",t?"/government":"","/licenses","/post","/map","/properties","/citizens","/settings","/businesses","/business"],render:function(e){return Object(o.jsx)("div",{className:"grid grid-cols-1 gap-4 lg:col-span-3 py-2 lg:pt-5",children:Object(o.jsxs)("section",{"aria-labelledby":"section-1-title",children:[Object(o.jsx)("h2",{className:"sr-only",id:"section-1-title",children:"Section title"}),Object(o.jsx)("div",{className:"border-2 border-gray-700 bg-white shadow",children:Object(o.jsx)("div",{className:"p-2 lg:p-6",children:Object(o.jsx)(de,{isAdmin:t,user:n,database:a,getTime:r,getYear:l,getDate:i,currentYear:c,currentDate:s,setUser:d})})})]})})}})})})})]})})},je=function(){return Object(o.jsx)("footer",{className:"bg-dark",children:Object(o.jsx)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 md:flex md:items-center md:justify-between lg:px-8",children:Object(o.jsx)("div",{className:"mt-8 md:mt-0 md:order-1",children:Object(o.jsx)("p",{className:"text-center text-base text-green",children:"\xa9 2021 Jonah Nelson. All rights reserved."})})})})},me=function(e){var t=e.user,s=e.setUser,c=e.setSignedIn,n=e.setIsAdmin,a=e.isAdmin,r=e.database,i=e.currentTime,l=e.currentDate,d=e.currentYear,b=e.getTime,j=e.getDate,m=e.getYear;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(O,{setIsAdmin:n,currentTime:i,currentDate:l,currentYear:d,user:t,setSignedIn:c,isAdmin:a,setUser:s}),Object(o.jsx)(be,{user:t,database:r,setUser:s,isAdmin:a,currentDate:l,currentYear:d,getDate:j,getYear:m,getTime:b}),Object(o.jsx)(je,{})]})},ue=s(59),he=(s(90),s(92),ue.a.initializeApp({apiKey:"AIzaSyDxMjxCQ2kfL3u3e0e9wCp5Iz4b5MhdqIo",authDomain:"rushington-virtual-bank.firebaseapp.com",databaseURL:"https://rushington-virtual-bank-default-rtdb.firebaseio.com",projectId:"rushington-virtual-bank",storageBucket:"rushington-virtual-bank.appspot.com",messagingSenderId:"470262828378",appId:"1:470262828378:web:1763b4bfd889cf74dc3763"}).database()),fe=1522648800;function xe(e){return"true"===e||!0===e}var pe=[{number:1,name:"Igmo"},{number:2,name:"Bostiod"},{number:3,name:"Walin"},{number:4,name:"Sabetata"},{number:5,name:"Carton"},{number:6,name:"Wayu"},{number:7,name:"Wildder"},{number:8,name:"Wekenbarg"},{number:9,name:"Pape"},{number:10,name:"Fortis"},{number:11,name:"Callidus"},{number:12,name:"Fastis"}];function ge(){var e,t,s,c,n,a,r=new Date;return t=Ne((e=Math.round(r.getTime()/1e3-fe))/345600,0),s=Ne((e-345600*t)/28800,0),c=Ne((e-345600*t-28800*s)/1200,0),n=Ne((e-345600*t-28800*s-1200*c)/60,0),a=Ne(e-345600*t-28800*s-1200*c-60*n,0),n++,a=String(a).length>1?String(a):"0".concat(a),"".concat(n,":").concat(a)}function Oe(){var e,t,s,c,n=new Date;t=Ne((e=Math.round(n.getTime()/1e3-fe))/345600,0),s=Ne((e-345600*t)/28800,0),c=Ne((e-345600*t-28800*s)/1200+1,0);var a="";pe.forEach((function(e){e.number===Number(s)+1&&(a=e.name)}));var r=String(c);return r.endsWith("0")||r.endsWith("4")||r.endsWith("5")||r.endsWith("6")||r.endsWith("7")||r.endsWith("8")||r.endsWith("9")?r=r.concat("th"):r.endsWith("1")?r="11"==r?r.concat("th"):r.concat("st"):r.endsWith("2")?r="12"==r?r.concat("th"):r.concat("nd"):r.endsWith("3")&&(r="13"==r?r.concat("th"):r.concat("rd")),"".concat(a," ").concat(r)}function ve(){var e,t=new Date;return e=Ne(Math.round(t.getTime()/1e3-fe)/345600,0),"".concat(e)}function Ne(e,t){var s=new RegExp("^-?\\d+(?:.\\d{0,"+(t||-1)+"})?");return e.toString().match(s)[0]}var ye=function(){var e=Object(c.useState)(),t=Object(i.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(JSON.parse(localStorage.getItem("user"))),r=Object(i.a)(a,2),l=r[0],d=r[1],j=Object(c.useState)(xe(localStorage.getItem("isAdmin"))),m=Object(i.a)(j,2),u=m[0],h=m[1],f=Object(c.useState)(xe(localStorage.getItem("signedIn"))),x=Object(i.a)(f,2),p=x[0],g=x[1],O=Object(c.useState)(ve()),v=Object(i.a)(O,2),N=v[0],y=v[1],w=Object(c.useState)(Oe()),D=Object(i.a)(w,2),I=D[0],z=D[1],S=Object(c.useState)(ge()),C=Object(i.a)(S,2),k=C[0],T=C[1];return Object(c.useEffect)((function(){var e=setInterval((function(){T(ge()),z(Oe()),y(ve())}),1e3);return function(){return clearInterval(e)}})),Object(c.useEffect)((function(){he.ref("citizens").get().then((function(e){n(e.val()),void 0!=l&&(d(e.val()[l.citizenID]),localStorage.setItem("user",JSON.stringify(e.val()[l.citizenID])))}))}),[]),!0===p?Object(o.jsx)(me,{signedIn:p,setSignedIn:g,setIsAdmin:h,isAdmin:u,citizens:s,setUser:d,user:l,database:he,currentTime:k,currentDate:I,currentYear:N,getTime:ge,getDate:Oe,getYear:ve}):Object(o.jsx)(b,{signedIn:p,setSignedIn:g,setIsAdmin:h,citizens:s,setUser:d,database:he})},we=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,116)).then((function(t){var s=t.getCLS,c=t.getFID,n=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),c(e),n(e),a(e),r(e)}))};r.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(ye,{})}),document.getElementById("root")),we()}},[[96,1,2]]]);
//# sourceMappingURL=main.97320d0d.chunk.js.map